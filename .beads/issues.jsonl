{"id":"gitlab-insights-05v","title":"8.3.2: Implement collision detection algorithm","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:13:45.847952-05:00","updated_at":"2025-12-15T12:03:19.203473-05:00","closed_at":"2025-12-15T12:03:19.203473-05:00","dependencies":[{"issue_id":"gitlab-insights-05v","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.326141-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-05v","depends_on_id":"gitlab-insights-9ts","type":"blocks","created_at":"2025-12-15T11:14:31.765262-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-07y","title":"8.1.3: Build expertise scoring algorithm","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:10:33.776462-05:00","updated_at":"2025-12-15T12:03:17.641537-05:00","closed_at":"2025-12-15T12:03:17.641537-05:00","dependencies":[{"issue_id":"gitlab-insights-07y","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.836433-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-07y","depends_on_id":"gitlab-insights-a0y","type":"blocks","created_at":"2025-12-15T11:11:40.816304-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0f6","title":"Phase 5: Migration Path","description":"Smooth transition with user preference toggle between views.\n\n## Goal\nAllow users to switch between grouped (new) and flat (old) views.\n\n## On Completion (Epic)\nWhen all Phase 5 tasks complete:\n1. All ACs should be marked 'complete' in plan file\n2. bd close gitlab-insights-0f6","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:25:06.844896-05:00","updated_at":"2025-12-11T15:10:35.452296-05:00","dependencies":[{"issue_id":"gitlab-insights-0f6","depends_on_id":"gitlab-insights-ntz","type":"blocks","created_at":"2025-12-11T14:25:36.31061-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0ina","title":"Bug: High failure rate in api-polling still returns success=true","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T14:11:18.756728-05:00","updated_at":"2025-12-15T14:30:34.972583-05:00","closed_at":"2025-12-15T14:30:34.972583-05:00"}
{"id":"gitlab-insights-0kop","title":"5.8: Implement show/hide closed items toggle","description":"## Purpose\nAdd toggle control to dashboard allowing users to show or hide closed/merged work items. Default is hidden (open items only), but users can toggle to see historical items.\n\n## Background \u0026 Rationale\nPRD FR38-39, FR41:\n- FR38: Dashboard can show only open cards by default\n- FR39: Dashboard can exclude closed/merged items from the main view\n- FR41: Users can toggle the dashboard to show closed/merged issues and MRs\n\nUser Journey 2 (Return After Absence): 'Three issues have been closed while Taylor was away. They don't clutter the main dashboard - Taylor can find them via search if needed.'\n\nThe default hides closed items to reduce noise during triage. But users investigating historical context need access to closed items without leaving to search.\n\n## Implementation Details\n\n### Toggle Location\nFilter bar area, alongside other filter controls:\n```\n[Status: Open ▼] [Type: All ▼] [☐ Show closed items]\n```\n\n### Default State\n- Unchecked (closed items hidden)\n- Persisted in URL query params for bookmarkable state\n\n### Behavior When Toggled On\n- Closed issues appear with 'Closed' status badge (gray)\n- Merged MRs appear with 'Merged' status badge (green)\n- Sorting unchanged (unread first, then by activity)\n- Closed items can still be marked as read\n\n### Visual Distinction for Closed Items\n- Status badge color: gray for closed, green for merged\n- Slightly reduced opacity (0.8) to distinguish from open items\n- Same card structure otherwise\n\n## Dependencies\n- WorkItemFilters component exists (5.2)\n- getWorkItemsGrouped endpoint supports status filter (2.2)\n\n## Deliverables\n1. Toggle checkbox in filter controls\n2. URL query param persistence (?showClosed=true)\n3. Visual styling for closed/merged items\n4. Integration with getWorkItemsGrouped status filter","status":"open","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T13:36:05.0015-05:00","updated_at":"2025-12-15T13:36:05.0015-05:00","dependencies":[{"issue_id":"gitlab-insights-0kop","depends_on_id":"gitlab-insights-nkuh","type":"blocks","created_at":"2025-12-15T13:36:54.631353-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-0kop","depends_on_id":"gitlab-insights-i3u9","type":"blocks","created_at":"2025-12-15T13:36:55.51328-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0qd","title":"Story 12.10: Integrate embedding into Event creation","description":"**Context:** Generate embeddings when new Events are stored.\n\n**Implementation:**\n\nModify `src/server/services/event-transformer.ts` to generate embeddings after storing events:\n- Only for issues and MRs (exclude comments)\n- Queue embedding generation for each new event\n\n**Options for async processing:**\n- Inngest job for background embedding\n- Direct inline (slower but simpler)\n- Batch at end of refresh\n\n**Acceptance criteria:**\n- [ ] New Events get embeddings\n- [ ] Does not block event storage\n- [ ] Comments excluded\n- [ ] Error handling for failures\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:43.636439-05:00","updated_at":"2025-12-12T09:05:43.636439-05:00","dependencies":[{"issue_id":"gitlab-insights-0qd","depends_on_id":"gitlab-insights-agx","type":"blocks","created_at":"2025-12-15T12:13:43.63436-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0ran","title":"1.2: Create migration for clean slate data reset","description":"Generate Prisma migration with custom SQL to truncate Event table before applying new schema. CLEAN SLATE RATIONALE: Existing 40k+ events lack relationship data - backfilling is complex/error-prone. Users have ~2 weeks history anyway, acceptable to wipe and re-import cleanly. Command: npx prisma migrate dev --name add_event_relationships. Add TRUNCATE TABLE Event CASCADE before schema changes.","status":"closed","priority":0,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T12:21:52.134562-05:00","updated_at":"2025-12-15T14:00:51.6529-05:00","closed_at":"2025-12-15T14:00:51.6529-05:00","dependencies":[{"issue_id":"gitlab-insights-0ran","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:52.302141-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-0ran","depends_on_id":"gitlab-insights-tt9f","type":"blocks","created_at":"2025-12-15T12:21:52.376838-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0rb","title":"Story 14.6: Add topic filter","description":"Context: Filter activity by keywords/topics.\n\nImplementation:\n\n```tsx\n\u003cFilterSection title=\"Topics\"\u003e\n  \u003cTopicInput\n    topics={filters.topics}\n    onChange={(topics) =\u003e setFilters({ ...filters, topics })}\n    suggestions={recentSearchTerms}\n  /\u003e\n\u003c/FilterSection\u003e\n```\n\nTopic matching:\n- FTS search on title + body\n- Label matching\n- File path matching\n\nAcceptance criteria:\n- [ ] Can add topic keywords\n- [ ] Suggests from search history\n- [ ] FTS matching\n- [ ] Multiple topics (OR logic)\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:13.746275-05:00","updated_at":"2025-12-12T09:05:13.746275-05:00","dependencies":[{"issue_id":"gitlab-insights-0rb","depends_on_id":"gitlab-insights-7n4","type":"blocks","created_at":"2025-12-15T12:13:54.947423-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0rj","title":"Phase 2: Enhanced Data Layer","description":"Create new tRPC endpoints that leverage relationships for grouped queries.\n\n## Goal\nBuild data layer to serve hierarchical work item data to UI.\n\n## Key Files\n- src/server/api/routers/events.ts\n- src/server/services/event-relationships.ts (new)\n\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion (Epic)\nWhen all Phase 2 tasks complete:\n1. Verify AC-5 is marked 'implemented' in plan file\n2. bd close gitlab-insights-0rj","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:24:24.796401-05:00","updated_at":"2025-12-11T15:08:37.781133-05:00","dependencies":[{"issue_id":"gitlab-insights-0rj","depends_on_id":"gitlab-insights-9mx","type":"blocks","created_at":"2025-12-11T14:25:35.68822-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0w4","title":"Story 14.4: Add territory filter","description":"Context: Filter activity to user's areas of interest.\n\nImplementation:\n\nAdd to ActivityViewClient:\n\n```tsx\n// Territory filter\n\u003cFilterSection title=\"Territory\"\u003e\n  \u003cDirectoryPicker\n    selected={filters.territories}\n    onChange={(dirs) =\u003e setFilters({ ...filters, territories: dirs })}\n    suggestions={userTerritories} // From Epic 11\n  /\u003e\n\u003c/FilterSection\u003e\n```\n\nSuggestions source:\n- User's recent commit directories\n- User's open MR directories\n- Manually added directories\n\nAcceptance criteria:\n- [ ] Can select directories to watch\n- [ ] Suggests based on user activity\n- [ ] Filter applies to feed\n- [ ] Multiple directories supported\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:56.041834-05:00","updated_at":"2025-12-12T09:04:56.041834-05:00","dependencies":[{"issue_id":"gitlab-insights-0w4","depends_on_id":"gitlab-insights-8zv","type":"blocks","created_at":"2025-12-15T12:13:54.79416-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0yt","title":"Story 16.2: Add suggested reviewers based on expertise","description":"Add functionality to suggest reviewers based on file expertise, excluding the MR author.\n\n**Context:** Use expertise scoring from Epic 10 to identify people who know the files being changed in an MR. This helps speed up review assignment by surfacing domain experts.\n\n**Implementation:**\n- Query File expertise for files touched in the MR\n- Rank people by expertise score\n- Filter out the MR author\n- Return ranked list of suggested reviewers\n\n**Acceptance criteria:**\n- Suggested reviewers list excludes MR author\n- Reviewers ranked by expertise on touched files\n- Returns meaningful results for MRs with known file expertise\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:48.618052-05:00","updated_at":"2025-12-12T09:04:48.618052-05:00","dependencies":[{"issue_id":"gitlab-insights-0yt","depends_on_id":"gitlab-insights-uum","type":"blocks","created_at":"2025-12-15T12:13:59.837269-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0zb","title":"3.8 Add empty states","description":"Add empty state displays for various scenarios.\n\n## Implementation\n\nNo open issues:\n\"No open issues\"\n\nNo open MRs:\n\"No open merge requests\"\n\nNo search results:\n\"No items match your search. Try adjusting your query or clearing filters.\"\n\nSection with 0 items:\nShow section header with (0) count, collapsed by default\n\n## Files\n- WorkItemList.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-0zb: Add empty states\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-0zb","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:47.305803-05:00","updated_at":"2025-12-11T15:09:55.488702-05:00","dependencies":[{"issue_id":"gitlab-insights-0zb","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:41.091576-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0zd2","title":"CRITICAL: Silent commit store failures in commit-transformer - errors swallowed","description":"","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T12:15:53.084147-05:00","updated_at":"2025-12-16T15:51:52.669526-05:00","closed_at":"2025-12-16T15:51:52.669526-05:00"}
{"id":"gitlab-insights-12d","title":"Story 14.1: Create activity-relevance-scorer service","description":"Context: Score events by relevance to user's interests.\n\nImplementation:\n\nCreate src/server/services/activity-relevance-scorer.ts:\n\n```typescript\ninterface RelevanceScore {\n  territoryMatch: number;  // 0-1\n  personMatch: number;     // 0-1\n  topicMatch: number;      // 0-1\n  recency: number;         // 0-1\n  totalScore: number;      // Weighted\n}\n\nasync function scoreEventRelevance(\n  db: PrismaClient,\n  userId: string,\n  event: Event,\n  userContext: {\n    territories: string[];      // User's active directories\n    watchedPeople: string[];    // People user follows\n    watchedTopics: string[];    // Topics user watches\n  }\n): Promise\u003cRelevanceScore\u003e\n```\n\nScoring:\n- Territory: Does event touch user's directories?\n- Person: Is author someone user watches?\n- Topic: Does content match watched keywords?\n- Recency: How recent? (1 = today, 0 = 30+ days)\n\nAcceptance criteria:\n- [ ] Scores all relevance signals\n- [ ] Weights match spec\n- [ ] Returns breakdown\n- [ ] Efficient for batch scoring\n\nHours: 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:20.820554-05:00","updated_at":"2025-12-12T09:04:20.820554-05:00","dependencies":[{"issue_id":"gitlab-insights-12d","depends_on_id":"gitlab-insights-784","type":"blocks","created_at":"2025-12-15T12:14:19.310427-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-147i","title":"Fix NEW badge hover behavior","description":"## Problem\nThe NEW badge changes to 'Mark Read' when the entire card is hovered, not just the badge.\n\n## Acceptance Criteria\n- AC 4.1: NEW badge only changes to 'Mark Read' when the badge ITSELF is hovered (not the card)\n- AC 4.2: Clicking 'Mark Read' on the badge marks the item as read\n- AC 4.3: Clicking the card body (to open side panel) marks the item as read\n- AC 4.4: Clicking the expand icon marks the item as read\n- AC 4.5: Hovering the card body does NOT trigger the badge hover state\n- AC 4.6: 'Mark All as Read' button remains functional for bulk marking\n\n## Implementation Notes\n- **Fix approach**: Replace card-level `isHovered` state with badge-specific hover state. Add separate `onMouseEnter`/`onMouseLeave` handlers on the badge div itself, not the Card.\n- **Mobile/touch behavior**: First tap on badge reveals 'Mark Read' button, second tap marks as read (two-tap interaction). Implement using:\n  1. Track `isBadgeTapped` state\n  2. First tap sets `isBadgeTapped = true`, shows 'Mark Read'\n  3. Second tap (or tap on 'Mark Read') calls `onMarkAsRead`\n  4. Tap elsewhere resets `isBadgeTapped = false`\n- **Keyboard accessibility**: Badge should be focusable, Enter/Space triggers mark as read when focused\n\n## Testing Requirements\n\n### Manual Testing (dev-browser) - Desktop\nRun the dev server and use dev-browser to verify:\n1. Navigate to catch-up view with unread items\n2. **Test card hover does NOT affect badge**:\n   - Hover over the card body (title, metadata area)\n   - VERIFY: NEW badge stays as 'NEW' (does NOT change to 'Mark Read')\n3. **Test badge hover shows Mark Read**:\n   - Hover directly over the NEW badge\n   - VERIFY: Badge changes to 'Mark Read'\n   - Move mouse away from badge (but still on card)\n   - VERIFY: Badge changes back to 'NEW'\n4. **Test clicking Mark Read**:\n   - Hover over badge to show 'Mark Read'\n   - Click 'Mark Read'\n   - VERIFY: Item is marked as read\n   - VERIFY: Side panel does NOT open\n5. **Test card body click still works**:\n   - Click on card body (not badge, not expand icon)\n   - VERIFY: Side panel opens\n   - VERIFY: Item is marked as read\n6. **Test expand icon click still works**:\n   - Click expand icon\n   - VERIFY: Card expands\n   - VERIFY: Item is marked as read\n7. **Test keyboard navigation**:\n   - Tab to focus the badge\n   - Press Enter or Space\n   - VERIFY: Item is marked as read\n\n### Manual Testing (dev-browser) - Mobile\nUse dev-browser with mobile viewport (375x667):\n1. **Test two-tap interaction**:\n   - Tap the NEW badge once\n   - VERIFY: Badge changes to 'Mark Read'\n   - Tap 'Mark Read'\n   - VERIFY: Item is marked as read\n2. **Test tap elsewhere resets**:\n   - Tap the NEW badge once (shows 'Mark Read')\n   - Tap somewhere else on the page\n   - VERIFY: Badge resets to 'NEW'\n3. **Test card tap still opens panel**:\n   - Tap on card body (not badge)\n   - VERIFY: Side panel opens (or full-screen on mobile)\n\n### Unit Tests (src/components/work-items/__tests__/WorkItemCard.test.tsx)\n- Badge has its own `onMouseEnter`/`onMouseLeave` handlers\n- Card hover does NOT set badge hover state\n- Badge hover sets badge-specific hover state\n- `isBadgeTapped` state toggles correctly on touch\n- Clicking badge calls `onMarkAsRead` without calling `onSelect`\n- Keyboard Enter/Space on focused badge calls `onMarkAsRead`\n\n### Accessibility Tests\n- Badge has `role=\"button\"` and `tabIndex={0}`\n- Badge has appropriate `aria-label`\n- Focus is visible on badge when tabbed\n\n## Files\n- src/components/work-items/WorkItemCard.tsx\n- src/components/work-items/__tests__/WorkItemCard.test.tsx (new or update)","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-17T09:54:38.158296-05:00","updated_at":"2025-12-17T12:25:03.980591-05:00"}
{"id":"gitlab-insights-14gc","title":"Bug: Retry-After header value 0 causes unnecessary backoff delay","description":"","status":"closed","priority":3,"issue_type":"bug","estimated_minutes":15,"created_at":"2025-12-15T14:11:17.226465-05:00","updated_at":"2025-12-16T16:06:46.389444-05:00","closed_at":"2025-12-16T16:06:46.389444-05:00"}
{"id":"gitlab-insights-162","title":"Story 9.8: Add FileExplorer component","description":"**Context:** UI to browse files, see commit history, and discover who worked on them.\n\n**Implementation:**\n\nCreate `src/app/(auth)/files/page.tsx` and `src/components/files/FileExplorer.tsx`:\n\n```tsx\ninterface FileExplorerProps {\n  projectId?: string; // If provided, filter to this project\n}\n\nexport function FileExplorer({ projectId }: FileExplorerProps) {\n  // Tree view of directories\n  // Click directory to expand\n  // Click file to see details\n  // File details show:\n  //   - Commit history (recent commits)\n  //   - Contributors (people who touched it)\n  //   - Last modified date\n}\n```\n\n**Components needed:**\n- `FileTree` - Directory tree navigation\n- `FileDetailPanel` - Right pane showing file info\n- `CommitList` - List of commits for a file\n- `ContributorList` - People who touched file\n\n**Acceptance criteria:**\n- [ ] Page renders at /files\n- [ ] Can browse directory tree\n- [ ] Clicking file shows details\n- [ ] Shows commit history\n- [ ] Shows contributors\n\n**Hours:** 4","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:51.383857-05:00","updated_at":"2025-12-15T14:21:05.670897-05:00","closed_at":"2025-12-15T14:21:05.670897-05:00","dependencies":[{"issue_id":"gitlab-insights-162","depends_on_id":"gitlab-insights-1n3","type":"blocks","created_at":"2025-12-15T12:13:14.279338-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1a5","title":"8.2.1: Implement decision keyword extraction","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:12:12.733892-05:00","updated_at":"2025-12-15T12:03:18.286974-05:00","closed_at":"2025-12-15T12:03:18.286974-05:00","dependencies":[{"issue_id":"gitlab-insights-1a5","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.343198-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1bx","title":"8.2.2: Build decision timeline view","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:12:25.938613-05:00","updated_at":"2025-12-15T12:03:18.548866-05:00","closed_at":"2025-12-15T12:03:18.548866-05:00","dependencies":[{"issue_id":"gitlab-insights-1bx","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.418731-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-1bx","depends_on_id":"gitlab-insights-1a5","type":"blocks","created_at":"2025-12-15T11:13:20.990219-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1dz1","title":"Bug: Missing search input sanitization in people.ts (trim, length limit)","description":"","status":"closed","priority":3,"issue_type":"bug","estimated_minutes":15,"created_at":"2025-12-15T14:10:55.043158-05:00","updated_at":"2025-12-16T16:08:08.837783-05:00","closed_at":"2025-12-16T16:08:08.837783-05:00"}
{"id":"gitlab-insights-1hw","title":"Story 17.7: Create shareable incident response URL","description":"Create shareable URL functionality for incident response pages.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Enables team collaboration during incidents\n\nAcceptance Criteria:\n- Generate unique URLs for each incident response view\n- Encode path/context in URL parameters\n- Support direct navigation via shared URL\n- Show all relevant info when URL is accessed\n- Add copy-to-clipboard functionality for easy sharing\n\nEstimated Hours: 2h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.925082-05:00","updated_at":"2025-12-12T09:04:39.925082-05:00","dependencies":[{"issue_id":"gitlab-insights-1hw","depends_on_id":"gitlab-insights-p16","type":"blocks","created_at":"2025-12-15T12:14:02.394944-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1n3","title":"Story 9.7: Add getFileActivity tRPC endpoint","description":"**Context:** API to query who has touched a file and what commits affected it.\n\n**Implementation:**\n\nCreate `src/server/api/routers/files.ts`:\n\n```typescript\nexport const filesRouter = createTRPCRouter({\n  // Get file by path\n  getByPath: protectedProcedure\n    .input(z.object({\n      projectId: z.string(),\n      path: z.string()\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return File with commit count, last modified\n    }),\n\n  // Get commits that touched a file\n  getCommits: protectedProcedure\n    .input(z.object({\n      fileId: z.string(),\n      limit: z.number().default(50)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Commits with Person info, ordered by date\n    }),\n\n  // Get people who touched a file (aggregated)\n  getContributors: protectedProcedure\n    .input(z.object({\n      fileId: z.string()\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Person[] with commit counts\n    }),\n\n  // List files in a directory\n  listDirectory: protectedProcedure\n    .input(z.object({\n      projectId: z.string(),\n      directory: z.string()\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return File[] in directory\n    })\n});\n```\n\n**Acceptance criteria:**\n- [ ] Can get file by path\n- [ ] Can get commits for a file\n- [ ] Can get contributors for a file\n- [ ] Can list directory contents\n- [ ] All enforce user isolation\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:36.424518-05:00","updated_at":"2025-12-15T14:17:51.037049-05:00","closed_at":"2025-12-15T14:17:51.037049-05:00","dependencies":[{"issue_id":"gitlab-insights-1n3","depends_on_id":"gitlab-insights-edm","type":"blocks","created_at":"2025-12-15T12:13:14.205378-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1vc6","title":"Bug: extractMentionedIds doesnt distinguish issue (#) vs MR (!) references","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:11:20.994396-05:00","updated_at":"2025-12-15T14:11:20.994396-05:00"}
{"id":"gitlab-insights-1wm5","title":"Performance: Person-Event denormalized relationship - string joins slower than FK","description":"","status":"open","priority":3,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T14:11:42.692352-05:00","updated_at":"2025-12-15T14:11:42.692352-05:00"}
{"id":"gitlab-insights-203","title":"8.3.4: Build TerritoryRadarView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:14:16.87553-05:00","updated_at":"2025-12-15T12:03:19.396344-05:00","closed_at":"2025-12-15T12:03:19.396344-05:00","dependencies":[{"issue_id":"gitlab-insights-203","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.476139-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-203","depends_on_id":"gitlab-insights-46s","type":"blocks","created_at":"2025-12-15T11:14:32.120207-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-203","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.181049-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-20t","title":"Story 10.1: Create expertise-scorer service with decay function","description":"Context: Core scoring service that will be used across all expertise queries.\n\nImplementation:\n\nCreate src/server/services/expertise-scorer.ts with:\n- DecayConfig interface (commits 3.0/90d, mrsAuthored 4.0/120d, mrsReviewed 2.0/60d, issuesAssigned 2.0/45d, comments 0.5/30d)\n- DEFAULT_DECAY_CONFIG constant\n- decay(days, tau) function using Math.exp(-days / tau)\n- daysSince(date) helper\n- calculateSignalScore(count, date, config) function\n\nAcceptance criteria:\n- Decay function implemented correctly\n- Configurable weights and tau values\n- Unit tests for decay calculations\n- Default config matches spec\n\nHours: 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:22.535421-05:00","updated_at":"2025-12-15T14:28:11.901996-05:00","closed_at":"2025-12-15T14:28:11.901996-05:00","dependencies":[{"issue_id":"gitlab-insights-20t","depends_on_id":"gitlab-insights-d1a","type":"blocks","created_at":"2025-12-15T12:14:19.079376-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-212q","title":"BUG: Query errors with UNAUTHORIZED don't log users out - inconsistent with mutation behavior","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:10:24.111708-05:00","updated_at":"2025-12-16T16:02:50.254982-05:00","closed_at":"2025-12-16T16:02:50.254982-05:00"}
{"id":"gitlab-insights-21d","title":"8.1.6: Build ExpertSearchView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:11:07.35292-05:00","updated_at":"2025-12-15T12:03:18.035009-05:00","closed_at":"2025-12-15T12:03:18.035009-05:00","dependencies":[{"issue_id":"gitlab-insights-21d","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.128422-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-21d","depends_on_id":"gitlab-insights-ylc","type":"blocks","created_at":"2025-12-15T11:11:41.17542-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-21d","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.039102-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-27c","title":"Story 13.5: Add discussion thread aggregation","description":"**Context:** Group related Events into discussion threads.\n\n**Implementation:**\n\nCreate `src/server/services/thread-aggregator.ts`:\n\n```typescript\ninterface DiscussionThread {\n  rootEvent: Event;           // Issue or MR\n  comments: Event[];          // Related comments\n  participants: Person[];     // All people involved\n  dateRange: { start: Date; end: Date };\n}\n\nasync function aggregateThread(\n  db: PrismaClient,\n  userId: string,\n  eventId: string\n): Promise\u003cDiscussionThread\u003e\n```\n\n**Aggregation logic:**\n1. If comment: find parent issue/MR\n2. Find all comments on the parent\n3. Extract unique participants\n4. Calculate date range\n\n**Acceptance criteria:**\n- [ ] Groups comments with parent\n- [ ] Extracts participants\n- [ ] Calculates date range\n- [ ] Works for issues and MRs\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:55.032297-05:00","updated_at":"2025-12-12T09:04:55.032297-05:00","dependencies":[{"issue_id":"gitlab-insights-27c","depends_on_id":"gitlab-insights-cf4","type":"blocks","created_at":"2025-12-15T12:13:45.862603-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2gt","title":"Story 8.7: Add \"Who touched?\" query","description":"**Context:** Enable the core expert discovery query: \"Given a file path or search term, who has touched related Events?\"\n\n**Implementation:**\n\nAdd to `src/server/api/routers/people.ts`:\n\n```typescript\n// Find people whose Events match a search term\nwhoTouched: protectedProcedure\n  .input(z.object({\n    query: z.string().min(1),\n    limit: z.number().default(10)\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    // 1. Search Events matching query (use existing FTS)\n    // 2. Group by author\n    // 3. Count occurrences per author\n    // 4. Return ranked Person[] with match counts\n  })\n```\n\n**Ranking logic:**\n- Count how many matching Events each person authored\n- More matches = higher rank\n- Return Person with `matchCount` and sample matching Events\n\n**Acceptance criteria:**\n- [ ] Can query with file path (e.g., \"src/auth/\")\n- [ ] Can query with keyword (e.g., \"authentication\")\n- [ ] Returns ranked people by relevance\n- [ ] Includes match count per person\n- [ ] Performance acceptable (\u003c1s for typical queries)\n\n**Hours:** 4","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:04.698323-05:00","updated_at":"2025-12-15T14:05:53.811791-05:00","closed_at":"2025-12-15T14:05:53.811791-05:00","dependencies":[{"issue_id":"gitlab-insights-2gt","depends_on_id":"gitlab-insights-9pu","type":"blocks","created_at":"2025-12-15T12:13:11.632874-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2o7","title":"8.2.4: Enhance FTS with decision boosting","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:12:51.008678-05:00","updated_at":"2025-12-15T12:03:18.883629-05:00","closed_at":"2025-12-15T12:03:18.883629-05:00","dependencies":[{"issue_id":"gitlab-insights-2o7","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.561142-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-2o7","depends_on_id":"gitlab-insights-1a5","type":"blocks","created_at":"2025-12-15T11:13:21.067664-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2q6","title":"Story 13.1: Enhance FTS to weight content types","description":"**Context:** Title matches should rank higher than body matches.\n\n**Implementation:**\n\nUpdate `src/lib/search/postgres-fts.ts`:\n\n```sql\n-- Weighted search\nSELECT\n  e.id,\n  e.title,\n  ts_rank(\n    setweight(to_tsvector('english', e.title), 'A') ||\n    setweight(to_tsvector('english', COALESCE(e.body, '')), 'B'),\n    plainto_tsquery('english', $1)\n  ) as rank\nFROM \"Event\" e\nWHERE\n  to_tsvector('english', e.title || ' ' || COALESCE(e.body, ''))\n  @@ plainto_tsquery('english', $1)\nORDER BY rank DESC\n```\n\n**Weight meanings:**\n- A (title): Highest weight\n- B (body): Medium weight\n- C, D: Lower weights (for future use)\n\n**Acceptance criteria:**\n- [ ] Title matches ranked higher\n- [ ] Search still fast\n- [ ] Existing search tests pass\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.170099-05:00","updated_at":"2025-12-12T09:04:54.170099-05:00","dependencies":[{"issue_id":"gitlab-insights-2q6","depends_on_id":"gitlab-insights-784","type":"blocks","created_at":"2025-12-15T12:14:19.23516-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2ql9","title":"PHASE 3: New UI Components - WorkItemCard, WorkItemList, ActivityTimeline","description":"Phase 3 implements React components for hierarchical work-item-centric view using HeroUI design system. Creates WorkItemCard (collapsible with three states), WorkItemList (grouped sections), ActivityTimeline (event display), and DetailPane (side panel). Includes three-level progressive disclosure, visual hierarchy for read/unread states, context signals as first-class info, and split-screen pattern. Requires React Aria accessibility, responsive breakpoints, and dark mode support.","status":"open","priority":0,"issue_type":"task","estimated_minutes":600,"created_at":"2025-12-15T13:25:38.851393-05:00","updated_at":"2025-12-15T13:25:38.851393-05:00","dependencies":[{"issue_id":"gitlab-insights-2ql9","depends_on_id":"gitlab-insights-lhyu","type":"parent-child","created_at":"2025-12-15T13:25:51.783338-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-2ql9","depends_on_id":"gitlab-insights-u1na","type":"blocks","created_at":"2025-12-15T13:25:53.876278-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2r7","title":"Story 14.9: Persist filter preferences","description":"Context: Save user's filter settings.\n\nImplementation:\n\nAdd to User model:\n```prisma\nmodel User {\n  // ... existing\n  activityFilters Json? // { territories: [], people: [], topics: [] }\n}\n```\n\nSave/load on ActivityView:\n\n```typescript\n// Load saved filters on mount\nconst savedFilters = user.activityFilters;\n\n// Save when filters change\nconst debouncedSave = useDebouncedCallback((filters) =\u003e {\n  updateUserPrefs.mutate({ activityFilters: filters });\n}, 1000);\n```\n\nAcceptance criteria:\n- [ ] Filters saved to user prefs\n- [ ] Restored on page load\n- [ ] Debounced saves\n- [ ] Works across sessions\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:57.874628-05:00","updated_at":"2025-12-12T09:05:57.874628-05:00","dependencies":[{"issue_id":"gitlab-insights-2r7","depends_on_id":"gitlab-insights-n04","type":"blocks","created_at":"2025-12-15T12:13:55.177762-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2t2","title":"Story 12.6: Implement combined similarity score","description":"**Context:** Combine embedding similarity with label and file overlap.\n\n**Implementation:**\n\nExtend similarity-scorer with CombinedSimilarity interface and combineSimilarityScores function.\n\n**Algorithm:**\n```\ntotalScore = titleSim * 0.35 + descSim * 0.35 + labelJaccard * 0.15 + fileOverlap * 0.15\n```\n\nUses Jaccard similarity (|intersection| / |union|) for labels and files.\n\n**Acceptance criteria:**\n- [ ] Combines all signals\n- [ ] Weights match spec (0.35, 0.35, 0.15, 0.15)\n- [ ] Returns breakdown\n- [ ] Handles missing labels/files\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:06.843963-05:00","updated_at":"2025-12-12T09:05:06.843963-05:00","dependencies":[{"issue_id":"gitlab-insights-2t2","depends_on_id":"gitlab-insights-63u","type":"blocks","created_at":"2025-12-15T12:13:43.216433-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-38z","title":"BUG: useScrollRestoration saves to wrong key due to stale closure","description":"## Root Cause\nIn src/hooks/useScrollRestoration.ts, the `handleScroll` callback (lines 68-81) captures `key` via closure but is created with an empty useMemo dependency array:\n\n```typescript\nconst handleScroll = useMemo(() =\u003e {\n  return (e: React.UIEvent\u003cHTMLDivElement\u003e) =\u003e {\n    // ...\n    sessionStorage.setItem(\\`scroll-${key}\\`, scrollY.toString());\n  };\n// eslint-disable-next-line react-hooks/exhaustive-deps\n}, []); // \u003c-- Empty deps!\n```\n\nThe comment on lines 66-67 claims this is intentional and correct, but it's WRONG. The closure captures the INITIAL value of `key` when the component mounts. When `key` changes (e.g., switching search queries), the callback still saves scroll position to the OLD key.\n\n## Impact\nWhen a user switches between different search queries or views:\n1. Scroll positions are saved to the wrong sessionStorage key\n2. Scroll restoration works incorrectly - may restore wrong position or not restore at all\n3. User experience degraded when navigating between different filtered views\n\n## Suggested Fix\nOption 1: Add `key` to useMemo dependencies (recreates callback when key changes):\n```typescript\n}, [key]);\n```\n\nOption 2: Use a ref to always read current value (keeps stable callback):\n```typescript\nconst keyRef = useRef(key);\nkeyRef.current = key; // Update on each render\n\nconst handleScroll = useMemo(() =\u003e {\n  return (e) =\u003e {\n    sessionStorage.setItem(\\`scroll-${keyRef.current}\\`, ...);\n  };\n}, []);\n```\n\nOption 2 is preferred as it maintains a stable callback reference while still accessing the current key.\n\n## Files Affected\n- src/hooks/useScrollRestoration.ts (lines 68-81)","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T09:41:25.240086-05:00","updated_at":"2025-12-15T09:52:39.419415-05:00","closed_at":"2025-12-15T09:52:39.419415-05:00"}
{"id":"gitlab-insights-3gs","title":"Story 12.3: Create embedding-generator service","description":"**Context:** Generate embeddings for issue/MR title and description.\n\n**Implementation:**\n\nCreate `src/server/services/embedding-generator.ts`:\n\n```typescript\n// Using transformers.js or API call\nasync function generateEmbedding(text: string): Promise\u003cnumber[]\u003e\n\n// Combine title + description for embedding\nfunction prepareTextForEmbedding(title: string, body: string | null): string {\n  const combined = body ? `${title}\\n\\n${body}` : title;\n  // Truncate to model's max length (512 tokens typically)\n  return truncateToTokens(combined, 400);\n}\n\n// Generate and store embedding for an Event\nasync function embedEvent(\n  db: PrismaClient,\n  eventId: string\n): Promise\u003cvoid\u003e\n```\n\n**Model options:**\n- `Xenova/all-MiniLM-L6-v2` via transformers.js (runs in Node)\n- API call to Hugging Face Inference\n\n**Acceptance criteria:**\n- [ ] Can generate embeddings for text\n- [ ] Handles title + description\n- [ ] Truncates long text\n- [ ] Stores in Event.embedding\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.971177-05:00","updated_at":"2025-12-12T09:04:39.971177-05:00","dependencies":[{"issue_id":"gitlab-insights-3gs","depends_on_id":"gitlab-insights-dwy","type":"blocks","created_at":"2025-12-15T12:13:42.991802-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3ir1","title":"Bug: GitLab author interfaces missing id field - breaks person extraction","description":"","status":"closed","priority":1,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T14:06:48.998593-05:00","updated_at":"2025-12-15T14:19:59.197261-05:00","closed_at":"2025-12-15T14:19:59.197261-05:00"}
{"id":"gitlab-insights-3kcb","title":"Implement configurable page sizes per endpoint","description":"Different views have different optimal page sizes. Dashboard: 50 (mixed browsing), Search: 25 (scanning for specific item, less scrolling), Query detail: 100 (known context, fewer fetches), Catch-up: 100 (batch review). Add pageSize param to tRPC schema with sensible defaults.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:33.595448-05:00","updated_at":"2025-12-15T13:41:33.595448-05:00","dependencies":[{"issue_id":"gitlab-insights-3kcb","depends_on_id":"gitlab-insights-mz1k","type":"blocks","created_at":"2025-12-15T13:42:25.328967-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3kr","title":"Story 11.7: Create getCollisions endpoint","description":"**Context:** API to check collisions for an MR.\n\n**Implementation:**\n\nAdd to territory router:\n\n```typescript\n// Get collisions for an MR\ngetCollisions: protectedProcedure\n  .input(z.object({\n    mrEventId: z.string(),\n    threshold: z.number().default(0.3)\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    return findCollisions(ctx.db, ctx.session.userId, input.mrEventId, {\n      threshold: input.threshold,\n      includeExpertise: true\n    });\n  }),\n\n// Check if any open MRs have collisions (for dashboard alert)\ngetActiveCollisions: protectedProcedure\n  .input(z.object({\n    threshold: z.number().default(0.3)\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    // Find user's open MRs\n    // Check each for collisions\n    // Return MRs with collision counts\n  })\n```\n\n**Acceptance criteria:**\n- [ ] Can check single MR for collisions\n- [ ] Can get all active collisions\n- [ ] Respects threshold\n- [ ] Returns severity scores\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:18.546697-05:00","updated_at":"2025-12-12T09:05:18.546697-05:00","dependencies":[{"issue_id":"gitlab-insights-3kr","depends_on_id":"gitlab-insights-dik","type":"blocks","created_at":"2025-12-15T12:13:40.730046-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3lmr","title":"Bug: Redundant gitlabEventId index - @unique already creates index","description":"","status":"closed","priority":4,"issue_type":"chore","estimated_minutes":10,"created_at":"2025-12-15T14:11:38.719719-05:00","updated_at":"2025-12-16T17:29:59.50003-05:00","closed_at":"2025-12-16T17:29:59.50003-05:00"}
{"id":"gitlab-insights-3oq","title":"Story 9.4: Create commit-transformer service","description":"**Context:** Transform GitLab commit API responses into our database models.\n\n**Implementation:**\n\nCreate `src/server/services/commit-transformer.ts`:\n\n```typescript\ninterface TransformResult {\n  commit: Prisma.CommitCreateInput;\n  files: { path: string; changeType: string }[];\n}\n\n// Transform GitLab commit to our format\nfunction transformCommit(\n  gitlabCommit: GitLabCommit,\n  diff: GitLabCommitDiff[],\n  userId: string,\n  projectId: string\n): TransformResult\n\n// Determine change type from diff entry\nfunction getChangeType(diff: GitLabCommitDiff): 'added' | 'modified' | 'deleted' | 'renamed'\n\n// Store commits with their files\nasync function storeCommits(\n  db: PrismaClient,\n  userId: string,\n  commits: TransformResult[]\n): Promise\u003c{ stored: number; skipped: number }\u003e\n```\n\n**Change type logic:**\n```typescript\nfunction getChangeType(diff: GitLabCommitDiff) {\n  if (diff.new_file) return 'added';\n  if (diff.deleted_file) return 'deleted';\n  if (diff.renamed_file) return 'renamed';\n  return 'modified';\n}\n```\n\n**Acceptance criteria:**\n- [ ] Transforms GitLab commits to our format\n- [ ] Extracts files from diff\n- [ ] Determines change types correctly\n- [ ] Stores with deduplication (skip existing SHAs)\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:58.439015-05:00","updated_at":"2025-12-15T14:15:27.28535-05:00","closed_at":"2025-12-15T14:15:27.28535-05:00","dependencies":[{"issue_id":"gitlab-insights-3oq","depends_on_id":"gitlab-insights-b0x","type":"blocks","created_at":"2025-12-15T12:13:13.927216-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3uo","title":"Story 13.9: Add related decisions suggestions","description":"**Context:** When viewing a decision, show related discussions.\n\n**Implementation:**\n\nAdd to ThreadView:\n\n```tsx\n// After main thread content\n\u003cRelatedDecisions eventId={thread.rootEvent.id} /\u003e\n```\n\nCreate `src/components/decisions/RelatedDecisions.tsx`:\n\n```tsx\nexport function RelatedDecisions({ eventId }: { eventId: string }) {\n  const { data } = trpc.similarity.getSimilar.useQuery({\n    eventId,\n    threshold: 0.6,\n    limit: 5\n  });\n\n  return (\n    \u003cPanel title=\"Related Discussions\"\u003e\n      {data?.map(item =\u003e (\n        \u003cRelatedDecisionCard key={item.id} item={item} /\u003e\n      ))}\n    \u003c/Panel\u003e\n  );\n}\n```\n\n**Acceptance criteria:**\n- [ ] Shows related discussions\n- [ ] Uses similarity scoring\n- [ ] Links to other threads\n- [ ] Hidden when none found\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:57.029817-05:00","updated_at":"2025-12-12T09:04:57.029817-05:00","dependencies":[{"issue_id":"gitlab-insights-3uo","depends_on_id":"gitlab-insights-8hl","type":"blocks","created_at":"2025-12-15T12:13:46.167188-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3xi","title":"Story 8.1: Add Person model to Prisma schema","description":"**Context:** Currently authors are stored as strings on Events. We need a first-class Person entity to enable expertise tracking, relationship queries, and person-centric views.\n\n**Implementation:**\n\nAdd to `prisma/schema.prisma`:\n\n```prisma\nmodel Person {\n  id            String   @id @default(cuid())\n  userId        String   // The app user who owns this data\n  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  gitlabId      Int      // GitLab user ID\n  username      String   // GitLab username\n  name          String?  // Display name (may be null)\n  email         String?  // Email (may be null/hidden)\n  avatarUrl     String?  // Avatar URL\n\n  createdAt     DateTime @default(now())\n  updatedAt     DateTime @updatedAt\n\n  @@unique([userId, gitlabId])\n  @@index([userId])\n  @@index([userId, username])\n}\n```\n\nAlso add relation to User model:\n```prisma\nmodel User {\n  // ... existing fields\n  people        Person[]\n}\n```\n\n**Acceptance criteria:**\n- [ ] Person model added with all fields\n- [ ] Unique constraint on [userId, gitlabId] prevents duplicates\n- [ ] Migration runs successfully\n- [ ] No breaking changes to existing Event model\n\n**Hours:** 2","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:29.55181-05:00","updated_at":"2025-12-15T12:20:26.908315-05:00","closed_at":"2025-12-15T12:20:26.908315-05:00"}
{"id":"gitlab-insights-3zi","title":"Story 11.11: Add configurable collision threshold","description":"**Context:** Allow user to adjust collision sensitivity.\n\n**Implementation:**\n\nAdd to settings:\n\n```tsx\n// In Settings page\n\u003cFormField label=\"Collision Alert Threshold\"\u003e\n  \u003cSlider\n    min={0.1}\n    max={0.9}\n    step={0.1}\n    value={threshold}\n    onChange={setThreshold}\n  /\u003e\n  \u003cHelpText\u003e\n    Lower = more alerts, Higher = only major collisions\n    (Default: 0.3)\n  \u003c/HelpText\u003e\n\u003c/FormField\u003e\n```\n\nStore in user preferences.\n\n**Acceptance criteria:**\n- [ ] Can adjust threshold in settings\n- [ ] Saved to user prefs\n- [ ] Used in collision queries\n- [ ] Help text explains impact\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:52.825673-05:00","updated_at":"2025-12-12T09:05:52.825673-05:00","dependencies":[{"issue_id":"gitlab-insights-3zi","depends_on_id":"gitlab-insights-w9l","type":"blocks","created_at":"2025-12-15T12:13:41.036148-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-440g","title":"P1.6: Validation - Compare captured relationships to GitLab API","description":"Write validation script that: 1) Samples 20 random work items from DB, 2) Fetches corresponding data from GitLab API, 3) Compares parentEventId, closesIssueIds, mentionsWorkItemIds, participants fields, 4) Reports discrepancies. Goal: 100% accuracy. If any mismatch found, investigate transformer logic. Include test cases: issue with no comments, MR with 50+ comments, MR closing multiple issues, cross-project references. This is quality gate before Phase 2.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T13:26:34.798909-05:00","updated_at":"2025-12-16T11:52:41.111014-05:00","closed_at":"2025-12-16T11:52:41.111014-05:00"}
{"id":"gitlab-insights-46s","title":"8.3.5: Add territory tRPC router","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:14:24.640967-05:00","updated_at":"2025-12-15T12:03:19.470824-05:00","closed_at":"2025-12-15T12:03:19.470824-05:00","dependencies":[{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.542798-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-9ts","type":"blocks","created_at":"2025-12-15T11:14:31.907065-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-05v","type":"blocks","created_at":"2025-12-15T11:14:31.979466-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-a86","type":"blocks","created_at":"2025-12-15T11:14:32.050563-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-4kf","title":"BUG: auth-client.ts has hardcoded localhost:3000 baseURL instead of using relative path","description":"## Root Cause\nIn src/lib/auth-client.ts, the better-auth client is configured with a hardcoded baseURL:\n```typescript\nbaseURL: \"http://localhost:3000\"\n```\n\nThis works in local development but will break in production deployments.\n\n## Impact\nAuthentication will fail in any non-localhost environment (staging, production) because API calls will be directed to localhost:3000 instead of the actual server.\n\n## Suggested Fix\nRemove the baseURL or use an empty string to default to the current origin:\n```typescript\nbaseURL: \"\"\n```\n\nOr use window.location.origin for explicit clarity:\n```typescript\nbaseURL: typeof window !== 'undefined' ? window.location.origin : ''\n```\n\nNote: The server-side auth.ts properly uses env.BETTER_AUTH_URL but the client doesn't have access to server env vars.\n\n## Files Affected\n- src/lib/auth-client.ts","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":15,"created_at":"2025-12-15T09:38:42.887583-05:00","updated_at":"2025-12-15T09:52:38.16125-05:00","closed_at":"2025-12-15T09:52:38.16125-05:00"}
{"id":"gitlab-insights-4y1h","title":"MEDIUM: Debounce timeout leak in useDebounce causes stale queries after unmount","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:12:52.462843-05:00","updated_at":"2025-12-16T15:58:29.128329-05:00","closed_at":"2025-12-16T15:58:29.128329-05:00"}
{"id":"gitlab-insights-4zq","title":"Story 11.8: Create TerritoryView page","description":"**Context:** Dedicated page showing activity heatmap and collision alerts.\n\n**Implementation:**\n\nCreate `src/app/(auth)/territory/page.tsx`:\n\n```tsx\nexport default async function TerritoryPage() {\n  await requireAuth();\n  return \u003cTerritoryViewClient /\u003e;\n}\n```\n\nCreate `src/components/territory/TerritoryViewClient.tsx`:\n\n```tsx\nexport function TerritoryViewClient() {\n  // Two tabs: \"Heatmap\" and \"My Collisions\"\n\n  // Heatmap tab:\n  // - Directory tree with activity intensity\n  // - Click directory to see who's active there\n  // - Color intensity = activity level\n\n  // Collisions tab:\n  // - List of your open MRs with collision indicators\n  // - Click to see collision details\n}\n```\n\n**Acceptance criteria:**\n- [ ] Page renders at /territory\n- [ ] Heatmap shows activity by directory\n- [ ] Collision list shows alerts\n- [ ] Sidebar link added\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:29.976362-05:00","updated_at":"2025-12-12T09:05:29.976362-05:00","dependencies":[{"issue_id":"gitlab-insights-4zq","depends_on_id":"gitlab-insights-3kr","type":"blocks","created_at":"2025-12-15T12:13:40.807095-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5fg","title":"Epic 10: Expertise Scoring Engine","description":"Goal: Implement weighted expertise scoring algorithm and Expert View UI.\n\nTestable when closed:\n- Can query 'Who is the expert on [file/directory/topic]?'\n- Results show ranked people with expertise scores\n- Scores incorporate recency decay\n- Can see score breakdown (commits, MRs, reviews, comments)\n\nDependencies: Epic 9 (Commit \u0026 File data)\n\nAlgorithm:\nexpertise_score = commits x 3.0 x decay(90d) + mrs_authored x 4.0 x decay(120d) + mrs_reviewed x 2.0 x decay(60d) + issues_assigned x 2.0 x decay(45d) + comments x 0.5 x decay(30d)\n\nContains 10 stories (10.1-10.10), ~30 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:05.246894-05:00","updated_at":"2025-12-12T09:03:05.246894-05:00","dependencies":[{"issue_id":"gitlab-insights-5fg","depends_on_id":"gitlab-insights-mo8","type":"blocks","created_at":"2025-12-12T09:03:21.384031-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5g2z","title":"3.6: Implement read/unread visual states and animations","description":"Implement visual state system for read/unread distinction. UNREAD: Bold title (weight 600), olive border 2px (#9DAA5F dark), high contrast text (gray-50), NEW badge visible. READ: Normal title (weight 400), gray border 1px, reduced opacity 0.7, no badge. TRANSITIONS: opacity/border 200ms ease-out, font-weight 0ms (prevent blur). Grid-based expand animation (grid-template-rows: 0fr → 1fr, 200ms ease-out). Hover states: NEW → Mark Read button (200ms fade), card highlight. File: src/components/work-items/WorkItemCard.module.css","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T12:21:57.324602-05:00","updated_at":"2025-12-15T14:21:31.03912-05:00","closed_at":"2025-12-15T14:21:31.03912-05:00","dependencies":[{"issue_id":"gitlab-insights-5g2z","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:57.759841-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-5g2z","depends_on_id":"gitlab-insights-5h1j","type":"blocks","created_at":"2025-12-15T12:21:57.909828-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5h1j","title":"3.1: Build WorkItemCard component with collapse/expand","description":"Create collapsible work item card component. COLLAPSED STATE: Title (14px, semibold if unread), one-line activity summary, context signals (repo, component, keywords as badges), NEW badge (olive #9DAA5F), metadata (status, number, timestamp). EXPANDED STATE: Grid-based animation (200ms ease-out, NOT max-height), activity timeline with events. HOVER: NEW badge → Mark Read button transformation (200ms fade). Visual hierarchy: olive 2px border when unread, gray 1px when read, reduced opacity 0.7 for read. File: src/components/work-items/WorkItemCard.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-15T12:21:55.432618-05:00","updated_at":"2025-12-15T14:12:23.972306-05:00","closed_at":"2025-12-15T14:12:23.972306-05:00","dependencies":[{"issue_id":"gitlab-insights-5h1j","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:55.590976-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-5h1j","depends_on_id":"gitlab-insights-i3u9","type":"blocks","created_at":"2025-12-15T12:21:55.678715-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5iz","title":"Story 10.9: Add expand to directory option","description":"Context: When viewing file experts, offer to expand to containing directory.\n\nImplementation:\n\nAdd to ExpertViewClient:\n\nWhen query is a file path and results exist:\n- Extract parent directory using getParentDirectory(query)\n- Show button: 'Expand to directory: {directory}'\n- On click, setQuery(directory, 'directory')\n- Can continue expanding up the directory tree\n\nUse cases:\n- File has few experts → expand to see directory experts\n- Broaden search to find more people\n- Navigate up the directory tree\n\nAcceptance criteria:\n- Button shown for file queries\n- Click expands to parent directory\n- Can continue expanding up\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:10.975902-05:00","updated_at":"2025-12-12T09:06:10.975902-05:00","dependencies":[{"issue_id":"gitlab-insights-5iz","depends_on_id":"gitlab-insights-r9i","type":"blocks","created_at":"2025-12-15T12:13:17.16137-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5kc","title":"2.4 Add unread status to grouped queries","description":"Update getWorkItemsGrouped to include unread status based on ReadEvent.\n\n## Implementation\nIn getWorkItemsGrouped query:\n\nFor each work item, determine:\n- hasNewActivity: true if:\n  - No ReadEvent exists for this user+event, OR\n  - lastActivityAt \u003e readAt\n- unreadComments: count of child comments where:\n  - No ReadEvent exists, OR\n  - comment.createdAt \u003e readAt\n\nUse Prisma subquery or raw SQL for efficiency.\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-4\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-5kc: Add unread status to grouped queries\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-5kc\n- Update plan: AC-4 -\u003e \"query-ready\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.780296-05:00","updated_at":"2025-12-11T15:08:38.751919-05:00","dependencies":[{"issue_id":"gitlab-insights-5kc","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:29.023681-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5oj","title":"1.6 Update event transformer for issues","description":"Update event-transformer.ts to capture issue metadata.\n\n## Implementation\nMap GitLab Issues API fields directly:\n- issue.assignees[].username -\u003e assignees[]\n- issue.state -\u003e status (\"opened\" | \"closed\")\n- issue.updated_at -\u003e lastActivityAt\n- issue.user_notes_count -\u003e commentCount\n\n## File\nsrc/server/services/gitlab/event-transformer.ts\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-5oj: Update event transformer for issues\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-5oj","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:06.442139-05:00","updated_at":"2025-12-15T13:49:27.723419-05:00","closed_at":"2025-12-15T13:49:27.723419-05:00","dependencies":[{"issue_id":"gitlab-insights-5oj","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:47.679909-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5tky","title":"Update technical documentation","description":"Document cursor pagination API in code comments and README. Add examples for cursor format, usage patterns, error handling. Document pagination logging format for monitoring. Update component prop documentation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:08.364115-05:00","updated_at":"2025-12-15T12:09:08.364115-05:00"}
{"id":"gitlab-insights-5tsw","title":"HIGH: Promise.all() failures lose partial data - should use Promise.allSettled()","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:15:53.468759-05:00","updated_at":"2025-12-16T15:55:53.440586-05:00","closed_at":"2025-12-16T15:55:53.440586-05:00"}
{"id":"gitlab-insights-5xmm","title":"Write integration tests for tRPC endpoints","description":"Test pagination logic in getRecent, getForDashboard, search, getNewItems. Verify cursor-based queries return correct items, no duplicates, proper hasMore flag. Test with various dataset sizes and cursor positions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:05.544835-05:00","updated_at":"2025-12-15T13:24:04.251214-05:00","closed_at":"2025-12-15T13:24:04.251214-05:00","dependencies":[{"issue_id":"gitlab-insights-5xmm","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:40.429703-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-63u","title":"Story 12.5: Create similarity-scorer service","description":"**Context:** Calculate similarity between Events using embeddings.\n\n**Implementation:**\n\nCreate `src/server/services/similarity-scorer.ts` with cosine similarity function and findSimilarEvents function using pgvector.\n\n**pgvector query uses:**\n- Distance operator \u003c=\u003e for cosine similarity\n- Filters by userId and excludes self\n- Orders by similarity and respects threshold\n\n**Acceptance criteria:**\n- [ ] Cosine similarity calculation correct\n- [ ] pgvector query efficient\n- [ ] Returns ranked results\n- [ ] Respects threshold\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:00.023944-05:00","updated_at":"2025-12-12T09:05:00.023944-05:00","dependencies":[{"issue_id":"gitlab-insights-63u","depends_on_id":"gitlab-insights-cls","type":"blocks","created_at":"2025-12-15T12:13:43.141505-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6d21","title":"Bug: Event onDelete:SetNull can orphan comments that appear as work items","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:11:36.151003-05:00","updated_at":"2025-12-15T14:29:40.97341-05:00","closed_at":"2025-12-15T14:29:40.97341-05:00"}
{"id":"gitlab-insights-6d3","title":"Epic 14: Activity View \u0026 Filtering","description":"Goal: 'What's happening in time window?' view with smart filtering.\n\nTestable when closed:\n- Can see activity feed for a time range\n- Can filter by territory (my files), person (my team), or topic\n- Activity relevance scoring surfaces what matters\n- Configurable filters that persist\n\nDependencies: Epic 10 (Territory), Epic 8 (Person)\n\nAlgorithm:\nevent_relevance = territory_match x 0.4 + person_match x 0.3 + topic_match x 0.2 + recency x 0.1\ndigest_threshold = 0.5, daily_limit = 15\n\nContains 10 stories (14.1-14.10), ~28 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.409589-05:00","updated_at":"2025-12-12T09:03:06.409589-05:00","dependencies":[{"issue_id":"gitlab-insights-6d3","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:22.34376-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6d3","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:22.405164-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6fx","title":"Epic 15: Email Digest","description":"Goal: Proactive daily briefing via email based on user's territory and interests.\n\nTestable when closed:\n- Can configure email digest preferences\n- Daily email sent with relevant activity (territory, person, topic matches)\n- Email includes expert suggestions for topics user searched\n- Unsubscribe works correctly\n\nDependencies: Epic 14 (Activity relevance), Epic 10 (Territory)\n\nContains 10 stories (15.1-15.10), ~27 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.685399-05:00","updated_at":"2025-12-12T09:03:06.685399-05:00","dependencies":[{"issue_id":"gitlab-insights-6fx","depends_on_id":"gitlab-insights-6d3","type":"blocks","created_at":"2025-12-12T09:03:22.625221-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6fx","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:22.687354-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6j1","title":"Story 9.2: Add File model","description":"**Context:** Need to store unique file paths with computed directory and extension for grouping and querying.\n\n**Implementation:**\n\nAdd to `prisma/schema.prisma`:\n\n```prisma\nmodel File {\n  id          String   @id @default(cuid())\n  userId      String\n  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  path        String   // Full file path (e.g., \"src/auth/login.ts\")\n  directory   String   // Parent directory (e.g., \"src/auth\")\n  filename    String   // Just filename (e.g., \"login.ts\")\n  extension   String?  // Extension (e.g., \"ts\")\n  projectId   String   // GitLab project ID\n\n  // Relationships\n  commits     CommitFile[]\n\n  createdAt   DateTime @default(now())\n  updatedAt   DateTime @updatedAt\n\n  @@unique([userId, projectId, path])\n  @@index([userId, projectId])\n  @@index([userId, directory])\n  @@index([userId, extension])\n}\n```\n\n**Directory/extension parsing logic:**\n```typescript\nfunction parseFilePath(fullPath: string) {\n  const parts = fullPath.split('/');\n  const filename = parts.pop() || '';\n  const directory = parts.join('/') || '/';\n  const extMatch = filename.match(/\\.([^.]+)$/);\n  const extension = extMatch ? extMatch[1] : null;\n  return { filename, directory, extension };\n}\n```\n\n**Acceptance criteria:**\n- [ ] File model with all fields\n- [ ] Unique constraint on [userId, projectId, path]\n- [ ] Directory index for prefix queries\n- [ ] Extension index for type filtering\n\n**Hours:** 2","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:29.079249-05:00","updated_at":"2025-12-15T14:10:41.850327-05:00","closed_at":"2025-12-15T14:10:41.850327-05:00","dependencies":[{"issue_id":"gitlab-insights-6j1","depends_on_id":"gitlab-insights-o58","type":"blocks","created_at":"2025-12-15T12:12:55.889211-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6kvz","title":"8.0.1: Add shared navigation for Intelligence views","description":"","status":"closed","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:16:26.125053-05:00","updated_at":"2025-12-15T12:03:19.979764-05:00","closed_at":"2025-12-15T12:03:19.979764-05:00","dependencies":[{"issue_id":"gitlab-insights-6kvz","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:16:44.054434-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6n6h","title":"Bug: Race condition in person-extractor upsertPeople - stats computed outside transaction","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:06:53.2876-05:00","updated_at":"2025-12-16T16:04:26.988929-05:00","closed_at":"2025-12-16T16:04:26.988929-05:00"}
{"id":"gitlab-insights-6ob3","title":"Deployment and monitoring setup","description":"Run full test suite (unit + integration + E2E). Test in staging with 1000+ events. Verify DB query performance \u003c10ms. Deploy to production. Monitor error rates and query performance for 24 hours post-deployment. Set up alerts for cursor decode errors and slow queries.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:08.865836-05:00","updated_at":"2025-12-15T12:09:08.865836-05:00"}
{"id":"gitlab-insights-6pgy","title":"5.6: Write end-to-end tests for complete user workflows","description":"Create E2E tests covering core user journeys. TESTS: (1) Morning triage - scan cards, mark some read, expand timeline, open detail pane (2) Return after absence - unread items at top, mark all read in section (3) Search for specific work item - filters work, detail view accessible (4) Mobile workflow - touch interactions, full-screen panel, scroll-into-view read marking (5) Read state persistence - refresh page, read items stay read. Use Playwright or Cypress. File: tests/e2e/work-item-grouping.spec.ts. Run in CI.","status":"open","priority":0,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T12:22:02.693883-05:00","updated_at":"2025-12-15T12:22:02.693883-05:00","dependencies":[{"issue_id":"gitlab-insights-6pgy","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:02.875485-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6pgy","depends_on_id":"gitlab-insights-jiyx","type":"blocks","created_at":"2025-12-15T12:22:02.951233-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6pgy","depends_on_id":"gitlab-insights-esyi","type":"blocks","created_at":"2025-12-15T12:22:03.03939-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6q0","title":"Epic 13: Decision Archaeology View","description":"Goal: Enable 'What was decided about X?' queries into historical discussions.\n\nTestable when closed:\n- Can search for a topic and see relevant past discussions\n- Results show issues, MR discussions, and comments mentioning the topic\n- Results are ranked by relevance with context snippets\n- Can drill into full discussion threads\n\nDependencies: Epic 12 (Similarity), Epic 8 (Person)\n\nContains 9 stories (13.1-13.9), ~28 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.141227-05:00","updated_at":"2025-12-12T09:03:06.141227-05:00","dependencies":[{"issue_id":"gitlab-insights-6q0","depends_on_id":"gitlab-insights-b5y","type":"blocks","created_at":"2025-12-12T09:03:22.061038-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6q0","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:22.124665-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6t4v","title":"Add load testing with realistic data distributions","description":"Test beyond seeded data. Scenarios: power users with 10,000+ events, events with varying sizes (small vs huge descriptions), users with many labels (filtering perf), concurrent users all scrolling (DB load). Measure p95/p99 latency under realistic load. Use k6 or Artillery for load generation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:42:00.796306-05:00","updated_at":"2025-12-15T13:42:00.796306-05:00","dependencies":[{"issue_id":"gitlab-insights-6t4v","depends_on_id":"gitlab-insights-loqk","type":"blocks","created_at":"2025-12-15T13:42:25.599068-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-70iy","title":"3.4: Build SidePanelDetail component with auto-scroll","description":"Create side panel for deep-dive detail view. Split-screen pattern: list stays visible (40%), panel slides in from right (60%, 600px desktop, full-screen mobile). Panel header: work item title (16px semibold), close button (X). Content: full activity timeline using ActivityTimeline component, related work section (closes/closedBy/mentions). AUTO-SCROLL: useEffect scrolls to newest unread activity on open (saves 3-5 seconds per card). Animation: 200ms slide-in ease-out. File: src/components/work-items/SidePanelDetail.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-15T12:21:56.42652-05:00","updated_at":"2025-12-15T14:19:53.610018-05:00","closed_at":"2025-12-15T14:19:53.610018-05:00","dependencies":[{"issue_id":"gitlab-insights-70iy","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:56.575166-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-70iy","depends_on_id":"gitlab-insights-zup3","type":"blocks","created_at":"2025-12-15T12:21:56.643121-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-70iy","depends_on_id":"gitlab-insights-vjs0","type":"blocks","created_at":"2025-12-15T12:21:56.72839-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-738d","title":"Create cursor encode/decode utilities","description":"Create /src/utils/cursor.ts with encode/decode functions for cursor-based pagination. Cursor format: {createdAt: ISO8601, id: string} encoded as base64 JSON. Includes validation and error handling for malformed cursors.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:00.572378-05:00","updated_at":"2025-12-15T12:23:08.650429-05:00","closed_at":"2025-12-15T12:23:08.650429-05:00"}
{"id":"gitlab-insights-784","title":"Story 8.8: Add PersonActivityStats component","description":"**Context:** Reusable component showing a person's activity breakdown with date ranges.\n\n**Implementation:**\n\nCreate `src/components/people/PersonActivityStats.tsx`:\n\n```tsx\ninterface PersonActivityStatsProps {\n  personId: string;\n  dateRange?: {\n    from: Date;\n    to: Date;\n  };\n  variant?: 'compact' | 'full';\n}\n\nexport function PersonActivityStats({ personId, dateRange, variant = 'compact' }: PersonActivityStatsProps) {\n  // Fetch stats from API\n  // Display:\n  // - Issues authored (count)\n  // - MRs authored (count)\n  // - MRs reviewed (count) - future, placeholder for now\n  // - Comments (count)\n  // - Date range selector (full variant)\n}\n```\n\n**Stats to display:**\n- Issues authored\n- MRs authored\n- MRs reviewed (placeholder - Epic 9 adds this)\n- Comments made\n- \"Last active\" date\n\n**Acceptance criteria:**\n- [ ] Compact variant shows badges\n- [ ] Full variant shows detailed breakdown\n- [ ] Date range filtering works\n- [ ] Loading and error states handled\n\n**Hours:** 2","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:19.013528-05:00","updated_at":"2025-12-15T13:22:46.442823-05:00","closed_at":"2025-12-15T13:22:46.442823-05:00","dependencies":[{"issue_id":"gitlab-insights-784","depends_on_id":"gitlab-insights-2gt","type":"blocks","created_at":"2025-12-15T12:13:11.709584-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-79c","title":"Story 10.2: Implement commit-based expertise calculation","description":"Context: Calculate expertise from commits touching a file/directory.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface CommitExpertise with personId, commitCount, lastCommitDate, score\n\nFunction getCommitExpertise(db, userId, fileIdOrDirectory, isDirectory, config) that:\n- Queries commits touching file(s)\n- Groups by personId\n- Calculates decayed scores using 3.0 weight and 90d tau\n- Returns sorted by score DESC\n\nSQL approach for performance:\nSELECT personId, COUNT(*) as commit_count, MAX(authoredAt) as last_commit,\n  SUM(3.0 * EXP(-EXTRACT(DAY FROM NOW() - authoredAt) / 90)) as score\nFROM Commit c\nJOIN CommitFile cf ON cf.commitId = c.id\nJOIN File f ON f.id = cf.fileId\nWHERE c.userId =  AND (f.id =  OR f.directory LIKE )\nGROUP BY c.personId\nORDER BY score DESC\n\nAcceptance criteria:\n- Calculates commit expertise per person\n- Works for single file or directory\n- Applies decay correctly\n- Performance acceptable (\u003c500ms)\n\nHours: 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.693265-05:00","updated_at":"2025-12-15T14:28:51.459534-05:00","closed_at":"2025-12-15T14:28:51.459534-05:00","dependencies":[{"issue_id":"gitlab-insights-79c","depends_on_id":"gitlab-insights-20t","type":"blocks","created_at":"2025-12-15T12:13:16.610021-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-79su","title":"4.5: Write tests for read tracking state machine","description":"Create automated tests validating read tracking state machine correctness. TEST CASES: (1) New work item → isUnread=true, no ReadEvent (2) Mark as read → ReadEvent created, isUnread=false (3) New activity after read → isUnread=true (max childEvent.createdAt \u003e readAt) (4) Mark multiple as read → batch operation works (5) Race conditions: rapid mark/unmark doesn't corrupt state (6) Optimistic updates revert on server error. File: tests/integration/read-tracking.test.ts. SUCCESS CRITERIA: Zero state corruption, predictable transitions.","status":"open","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T12:21:59.916151-05:00","updated_at":"2025-12-15T12:21:59.916151-05:00","dependencies":[{"issue_id":"gitlab-insights-79su","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:00.083788-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-79su","depends_on_id":"gitlab-insights-9yln","type":"blocks","created_at":"2025-12-15T12:22:00.155404-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7e5","title":"1.7 Update event transformer for MRs","description":"Update event-transformer.ts to capture MR metadata and closes relationships.\n\n## Implementation\nMap GitLab MRs API fields directly:\n- merge_request.assignees[].username -\u003e assignees[]\n- merge_request.state -\u003e status (\"opened\" | \"closed\" | \"merged\")\n- merge_request.updated_at -\u003e lastActivityAt\n- merge_request.user_notes_count -\u003e commentCount\n\nFor closesIssueIds, call GitLab API endpoint:\n- GET /projects/:id/merge_requests/:mr_iid/closes_issues\n- Extract IIDs from response array\n- Store in closesIssueIds[]\n\nMay need to add this API call to gitlab-api.ts or equivalent.\n\n## Files\n- src/server/services/gitlab/event-transformer.ts\n- src/server/services/gitlab/gitlab-api.ts (if exists)\n\n---\n## Acceptance Criteria\nContributes to: AC-2\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-7e5: Update event transformer for MRs\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-7e5\n- Update plan: AC-2 -\u003e \"implemented\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:06.68728-05:00","updated_at":"2025-12-15T13:50:24.743123-05:00","closed_at":"2025-12-15T13:50:24.743123-05:00","dependencies":[{"issue_id":"gitlab-insights-7e5","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:48.046357-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7hnl","title":"EPIC: Fix Work Item Cards","description":"The current work item card implementation has significant deviations from the PRD specification. This epic tracks the fixes needed.\n\nIssues:\n1. Card expansion behavior - clicking anywhere opens side panel instead of in-place expansion\n2. Read items disappear immediately - should persist until navigation\n3. Cards don't fill width - wrap to content instead\n4. NEW badge hover behavior - triggers on card hover instead of badge hover\n5. Need tabs for Issues/MRs - currently both in same scrollable view\n6. No context about what's new in collapsed cards - missing activity summary, latest preview, etc.\n\nSee plan file: ~/.claude/plans/sorted-roaming-galaxy.md for full acceptance criteria","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-17T09:54:18.925522-05:00","updated_at":"2025-12-17T09:54:18.925522-05:00","dependencies":[{"issue_id":"gitlab-insights-7hnl","depends_on_id":"gitlab-insights-147i","type":"blocks","created_at":"2025-12-17T11:10:43.839943-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7hnl","depends_on_id":"gitlab-insights-faz3","type":"blocks","created_at":"2025-12-17T11:10:44.184478-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7hnl","depends_on_id":"gitlab-insights-hh8z","type":"blocks","created_at":"2025-12-17T11:10:44.519407-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7hnl","depends_on_id":"gitlab-insights-hu57","type":"blocks","created_at":"2025-12-17T11:10:44.875878-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7hnl","depends_on_id":"gitlab-insights-j277","type":"blocks","created_at":"2025-12-17T11:10:45.225056-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7hnl","depends_on_id":"gitlab-insights-tthb","type":"blocks","created_at":"2025-12-17T11:10:45.573174-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7n4","title":"Story 14.5: Add person filter","description":"Context: Filter activity to specific people.\n\nImplementation:\n\n```tsx\n\u003cFilterSection title=\"People\"\u003e\n  \u003cPersonPicker\n    selected={filters.people}\n    onChange={(people) =\u003e setFilters({ ...filters, people })}\n    suggestions={frequentCollaborators}\n  /\u003e\n\u003c/FilterSection\u003e\n```\n\nSuggestions:\n- People user has commented on\n- People who commented on user's work\n- People in same territories\n\nAcceptance criteria:\n- [ ] Can select people to watch\n- [ ] Shows suggestions\n- [ ] Filter applies to feed\n- [ ] Multiple people supported\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:03.918608-05:00","updated_at":"2025-12-12T09:05:03.918608-05:00","dependencies":[{"issue_id":"gitlab-insights-7n4","depends_on_id":"gitlab-insights-0w4","type":"blocks","created_at":"2025-12-15T12:13:54.870749-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7ve","title":"Story 10.5: Create calculateExpertise function","description":"Context: Combine all expertise signals into a single ranked result.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface ExpertiseResult with:\n- person: Person\n- totalScore: number\n- breakdown: { commits, mrsAuthored, mrsReviewed, issuesAssigned, comments (each with count and score) }\n- lastActivity: Date\n\nFunction calculateExpertise(db, userId, query, options)\nQuery params:\n- filePath?: string (specific file)\n- directory?: string (directory prefix)\n- searchTerm?: string (keyword search)\nOptions:\n- limit?: number (max results, default 10)\n- config?: DecayConfig (custom weights)\n\nImplementation flow:\n1. Get commit expertise\n2. Get MR expertise\n3. Get issue expertise\n4. Merge by personId\n5. Sum total scores\n6. Sort by totalScore DESC\n7. Limit results\n8. Fetch Person details\n9. Return with breakdown\n\nAcceptance criteria:\n- Combines all signal types\n- Returns breakdown per signal\n- Sorts by total score\n- Includes Person details\n- Respects limit\n\nHours: 4","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:20.315943-05:00","updated_at":"2025-12-15T14:31:49.726885-05:00","closed_at":"2025-12-15T14:31:49.726885-05:00","dependencies":[{"issue_id":"gitlab-insights-7ve","depends_on_id":"gitlab-insights-904","type":"blocks","created_at":"2025-12-15T12:13:16.848294-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7x83","title":"8.4.5: Add activity tRPC router","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:15:48.096213-05:00","updated_at":"2025-12-15T12:03:19.817525-05:00","closed_at":"2025-12-15T12:03:19.817525-05:00","dependencies":[{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.637334-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-mas3","type":"blocks","created_at":"2025-12-15T11:16:08.037183-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-e9on","type":"blocks","created_at":"2025-12-15T11:16:08.104233-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-v6kq","type":"blocks","created_at":"2025-12-15T11:16:08.171085-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7yjg","title":"Implement new items toast notification system","description":"Implement toast notification when sync brings new items, but FIX LOGIC: Track first page item IDs (not just count). Compare new fetch with previous first page IDs. Only show toast for genuinely NEW items not already in cache. Prevents false 'new items available' when items were already loaded via background refetch.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:07.16786-05:00","updated_at":"2025-12-15T13:41:34.347997-05:00"}
{"id":"gitlab-insights-81u","title":"8.2.6: Add decisions tRPC router","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:13:13.627838-05:00","updated_at":"2025-12-15T12:03:19.047863-05:00","closed_at":"2025-12-15T12:03:19.047863-05:00","dependencies":[{"issue_id":"gitlab-insights-81u","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.701086-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-81u","depends_on_id":"gitlab-insights-1a5","type":"blocks","created_at":"2025-12-15T11:13:21.14959-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-81u","depends_on_id":"gitlab-insights-las","type":"blocks","created_at":"2025-12-15T11:13:21.231112-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-82a","title":"1.2 Create ReadEvent model","description":"Create new ReadEvent model for tracking which events each user has read.\n\n## Implementation\nAdd to prisma/schema.prisma:\n\nmodel ReadEvent {\n  id        String   @id @default(cuid())\n  userId    String\n  eventId   String\n  readAt    DateTime @default(now())\n\n  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n  event     Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)\n\n  @@unique([userId, eventId])\n  @@index([userId, readAt])\n}\n\nAlso add relation to User model:\nreadEvents  ReadEvent[]\n\nAnd to Event model:\nreadBy      ReadEvent[]\n\n## File\nprisma/schema.prisma\n\n---\n## Acceptance Criteria\nContributes to: AC-4, AC-9\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-82a: Create ReadEvent model\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-82a\n- Update plan: AC-4, AC-9 -\u003e \"schema-ready\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:23:57.412545-05:00","updated_at":"2025-12-11T15:29:29.548659-05:00","closed_at":"2025-12-11T15:29:29.548659-05:00"}
{"id":"gitlab-insights-85l","title":"Story 11.5: Add collision severity scoring","description":"**Context:** Weight collisions by the expertise of both parties.\n\n**Implementation:**\n\nExtend collision detection:\n\n```typescript\nasync function calculateCollisionSeverity(\n  db: PrismaClient,\n  userId: string,\n  collision: Collision,\n  yourPersonId: string\n): Promise\u003cnumber\u003e {\n  // Get your expertise in overlapping files\n  const yourExpertise = await calculateExpertise(\n    db, userId,\n    { filePaths: collision.overlapScore.overlappingFiles }\n  );\n\n  // Get their expertise (MR author)\n  const theirPersonId = await getPersonIdFromAuthor(\n    db, userId, collision.otherMR.author\n  );\n  const theirExpertise = await calculateExpertise(\n    db, userId,\n    { filePaths: collision.overlapScore.overlappingFiles }\n  );\n\n  // Severity = overlap × (your_expertise + their_expertise) / 2\n  const avgExpertise = (yourExpertise + theirExpertise) / 2;\n  return collision.overlapScore.totalScore * avgExpertise;\n}\n```\n\n**Interpretation:**\n- High severity: Both parties are experts → important collision\n- Low severity: Neither is expert → less critical\n- Mixed: Expert should be aware of non-expert's work\n\n**Acceptance criteria:**\n- [ ] Calculates severity with expertise weighting\n- [ ] Higher expertise = higher severity\n- [ ] Severity used for ranking/filtering\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:00.554676-05:00","updated_at":"2025-12-12T09:05:00.554676-05:00","dependencies":[{"issue_id":"gitlab-insights-85l","depends_on_id":"gitlab-insights-j6z","type":"blocks","created_at":"2025-12-15T12:13:40.576719-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-86d","title":"Story 17.5: Show related discussions about the area","description":"Surface related discussions (MRs, issues, comments) about the selected area.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Leverages decision context from Epic 13\n- Helps find historical context during incidents\n\nAcceptance Criteria:\n- Query discussions related to selected path\n- Display relevant MRs, issues, and comments\n- Show discussion titles, authors, dates\n- Link to GitLab discussion threads\n- Sort by relevance to the current path\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.445186-05:00","updated_at":"2025-12-12T09:04:39.445186-05:00","dependencies":[{"issue_id":"gitlab-insights-86d","depends_on_id":"gitlab-insights-xfb","type":"blocks","created_at":"2025-12-15T12:14:02.248517-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8co","title":"8.1.8: Integrate commit fetching into manualRefresh","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:11:32.517997-05:00","updated_at":"2025-12-15T12:01:29.582282-05:00","closed_at":"2025-12-15T12:01:29.582282-05:00","dependencies":[{"issue_id":"gitlab-insights-8co","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.269869-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-8co","depends_on_id":"gitlab-insights-pf0","type":"blocks","created_at":"2025-12-15T11:11:41.316419-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8db","title":"Epic 17: Incident Response Mode (Bonus)","description":"Goal: Quick expert finding for production issues.\n\nTestable when closed:\n- Can enter a file path or error area and immediately see experts\n- Recent changes to that area displayed\n- Related discussions surfaced quickly\n- Single-page focused interface for urgency\n\nDependencies: Epic 10 (Expertise), Epic 13 (Decisions)\n\nContains 7 stories (17.1-17.7), ~19 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:07.261225-05:00","updated_at":"2025-12-12T09:03:07.261225-05:00","dependencies":[{"issue_id":"gitlab-insights-8db","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:23.268416-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-8db","depends_on_id":"gitlab-insights-6q0","type":"blocks","created_at":"2025-12-12T09:03:23.331858-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8hl","title":"Story 13.8: Integrate with Expert View","description":"Context: Show who was involved in decision discussions.\n\nImplementation:\nAdd to DecisionResultCard showing key contributors section with participant avatars that link to person views. Also add Related decisions section to PersonDetailView.\n\nAcceptance criteria:\n- Shows contributors on results\n- Links to Person views\n- Person view shows their decisions\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:11.808065-05:00","updated_at":"2025-12-12T09:05:11.808065-05:00","dependencies":[{"issue_id":"gitlab-insights-8hl","depends_on_id":"gitlab-insights-f87","type":"blocks","created_at":"2025-12-15T12:13:46.09212-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8iba","title":"P1.5: Create re-sync script to fetch all GitLab data","description":"Build CLI script that: 1) Confirms user wants to wipe existing data, 2) Executes Prisma migration, 3) Fetches all issues/MRs/comments from GitLab API with pagination, 4) Runs enhanced transformer on each response, 5) Bulk inserts into DB with relationship fields populated. Include progress logging, error handling, rate limit backoff. Rationale: One-time operation to populate DB with relationship-aware data. Should be idempotent for safety. Estimate 5-10 min runtime for typical project with 500 issues.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T13:26:30.180631-05:00","updated_at":"2025-12-16T11:04:25.943646-05:00","closed_at":"2025-12-16T11:04:25.943646-05:00"}
{"id":"gitlab-insights-8pw","title":"Story 17.2: Add quick path input with autocomplete","description":"Add path input field with autocomplete functionality using File model data.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Part of quick expert finding for production issues\n- Dependencies: Epic 10 (Expertise), Epic 13 (Decisions)\n\nAcceptance Criteria:\n- Create path input field on /incident page\n- Implement autocomplete using File model\n- Show relevant file paths as user types\n- Handle path selection to trigger expert/commit/discussion queries\n- Provide clear UX for path navigation\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.794155-05:00","updated_at":"2025-12-12T09:04:38.794155-05:00","dependencies":[{"issue_id":"gitlab-insights-8pw","depends_on_id":"gitlab-insights-r13","type":"blocks","created_at":"2025-12-15T12:14:02.004902-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8tm","title":"Feature 10.4: Activity Summaries \u0026 Stalled Work Detection","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":480,"created_at":"2025-12-15T11:09:50.226601-05:00","updated_at":"2025-12-15T12:03:01.318974-05:00","closed_at":"2025-12-15T12:03:01.318974-05:00","dependencies":[{"issue_id":"gitlab-insights-8tm","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.399245-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8ue","title":"Story 15.10: Create digest analytics","description":"**Context:** Track digest engagement.\n\n**Implementation:**\n\nAdd tracking model:\n```prisma\nmodel DigestLog {\n  id          String   @id @default(cuid())\n  userId      String\n  sentAt      DateTime\n  itemCount   Int\n  openedAt    DateTime?\n  clickCount  Int      @default(0)\n}\n```\n\nAdd tracking pixel/link tracking to email:\n```tsx\n// In email template\n\u003cimg src={'/api/digest/track?id=\u0026event=open'} /\u003e\n\n// Links\n\u003cLink href={'/api/digest/track?id=\u0026event=click\u0026target='}\u003e\n```\n\nAdd analytics view to settings.\n\n**Acceptance criteria:**\n- [ ] Tracks email opens\n- [ ] Tracks link clicks\n- [ ] Shows stats on settings\n- [ ] Respects privacy (opt-in)\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:35.854985-05:00","updated_at":"2025-12-12T09:06:35.854985-05:00","dependencies":[{"issue_id":"gitlab-insights-8ue","depends_on_id":"gitlab-insights-fno","type":"blocks","created_at":"2025-12-15T12:13:58.241827-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8xf8","title":"New Items Toast Notifications","description":"Implement toast notifications for new items that arrive during active browsing session. Shows persistent toast with scroll-to-top action when manual/auto sync brings in new events while user is scrolled down.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:07.675458-05:00","updated_at":"2025-12-15T12:08:07.675458-05:00","dependencies":[{"issue_id":"gitlab-insights-8xf8","depends_on_id":"gitlab-insights-ju80","type":"blocks","created_at":"2025-12-15T12:09:40.992665-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8y3x","title":"Implementation Note: Stalled Work Detection Algorithm for Epic 14","description":"","status":"open","priority":3,"issue_type":"chore","estimated_minutes":0,"created_at":"2025-12-15T12:05:41.685097-05:00","updated_at":"2025-12-15T12:05:41.685097-05:00","dependencies":[{"issue_id":"gitlab-insights-8y3x","depends_on_id":"gitlab-insights-6d3","type":"related","created_at":"2025-12-15T12:05:59.488813-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8zv","title":"Story 14.3: Create ActivityView page","description":"Context: Dedicated activity feed page.\n\nImplementation:\n\nCreate src/app/(auth)/activity/page.tsx:\n\n```tsx\nexport default async function ActivityPage() {\n  await requireAuth();\n  return \u003cActivityViewClient /\u003e;\n}\n```\n\nCreate src/components/activity/ActivityViewClient.tsx:\n\n```tsx\nexport function ActivityViewClient() {\n  // Date range picker (last 24h, 7d, 30d, custom)\n  // Filter panel (territory, person, topic)\n  // Activity feed\n  // Relevance indicator on each item\n}\n```\n\nAcceptance criteria:\n- [ ] Page renders at /activity\n- [ ] Date range selector\n- [ ] Filter panel\n- [ ] Infinite scroll\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:44.461089-05:00","updated_at":"2025-12-12T09:04:44.461089-05:00","dependencies":[{"issue_id":"gitlab-insights-8zv","depends_on_id":"gitlab-insights-mfn","type":"blocks","created_at":"2025-12-15T12:13:54.705274-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-904","title":"Story 10.4: Implement issue-based expertise","description":"Context: Calculate expertise from issues assigned and comments made.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface IssueExpertise with personId, issuesAssigned, commentsCount, assignedScore, commentScore\n\nFunction getIssueExpertise(db, userId, searchTerms, config)\n- searchTerms: File paths or keywords\n\nQuery approach:\n1. Search Events (issues, comments) matching terms\n2. For issues: group by author, apply 2.0 weight, 45d tau\n3. For comments: group by author, apply 0.5 weight, 30d tau\n4. Combine scores\n\nAcceptance criteria:\n- Calculates issue assigned score\n- Calculates comment score\n- Searches by file path or keyword\n- Applies correct weights and decay\n\nHours: 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:06.119366-05:00","updated_at":"2025-12-15T14:30:12.33703-05:00","closed_at":"2025-12-15T14:30:12.33703-05:00","dependencies":[{"issue_id":"gitlab-insights-904","depends_on_id":"gitlab-insights-u8w","type":"blocks","created_at":"2025-12-15T12:13:16.764175-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-929","title":"Feature 10.2: Decision Archaeology System","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":480,"created_at":"2025-12-15T11:09:18.265689-05:00","updated_at":"2025-12-15T12:02:59.962173-05:00","closed_at":"2025-12-15T12:02:59.962173-05:00","dependencies":[{"issue_id":"gitlab-insights-929","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.252765-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9b9","title":"Story 9.9: Integrate commit fetching into manualRefresh","description":"**Context:** Add commit fetching to the existing refresh flow.\n\n**Implementation:**\n\nModify `src/server/api/routers/events.ts` `manualRefresh`:\n\n```typescript\nmanualRefresh: protectedProcedure\n  .input(z.object({\n    includeCommits: z.boolean().default(true),\n    commitDepth: z.number().default(100) // Max commits per project\n  }))\n  .mutation(async ({ ctx, input }) =\u003e {\n    // Existing: fetch issues, MRs, notes\n\n    // New: if includeCommits\n    if (input.includeCommits) {\n      for (const project of monitoredProjects) {\n        const commits = await gitlabClient.fetchCommits(\n          project.gitlabProjectId,\n          { per_page: 100, maxPages: Math.ceil(input.commitDepth / 100) }\n        );\n        // Fetch diffs for each commit (rate limited)\n        // Transform and store\n      }\n    }\n\n    // Return combined stats\n  })\n```\n\n**Configuration options:**\n- `includeCommits` - Toggle commit fetching (default true)\n- `commitDepth` - How many commits to fetch per project\n\n**Performance considerations:**\n- Fetch diffs in batches (10 at a time)\n- Skip commits already in DB\n- Add progress tracking for long operations\n\n**Acceptance criteria:**\n- [ ] Commits fetched during manual refresh\n- [ ] Respects depth limit\n- [ ] Skips existing commits\n- [ ] Reports commit stats in response\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:05.642883-05:00","updated_at":"2025-12-15T14:25:12.466253-05:00","closed_at":"2025-12-15T14:25:12.466253-05:00","dependencies":[{"issue_id":"gitlab-insights-9b9","depends_on_id":"gitlab-insights-162","type":"blocks","created_at":"2025-12-15T12:13:14.362217-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9c3","title":"Story 8.5: Create PersonListView page","description":"**Context:** Need a page to browse all extracted people with search functionality.\n\n**Implementation:**\n\nCreate `src/app/(auth)/people/page.tsx`:\n\n```tsx\n// Server component for auth\nexport default async function PeoplePage() {\n  await requireAuth();\n  return \u003cPersonListClient /\u003e;\n}\n```\n\nCreate `src/components/people/PersonListClient.tsx`:\n\n```tsx\nexport function PersonListClient() {\n  // Search input (debounced)\n  // List of PersonCards\n  // Loading skeleton\n  // Empty state if no people extracted yet\n  // \"Extract people\" button if empty\n}\n```\n\n**Integration with existing layout:**\n- Add \"People\" link to sidebar in AuthenticatedLayout\n- Use existing split-pane pattern (list on left, detail on right)\n- Keyboard navigation (j/k) following existing patterns\n\n**Acceptance criteria:**\n- [ ] Page renders at /people\n- [ ] Search filters people by name/username\n- [ ] Shows loading state\n- [ ] Empty state prompts extraction\n- [ ] Sidebar link added\n- [ ] Keyboard navigation works\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:35.102127-05:00","updated_at":"2025-12-12T09:05:35.102127-05:00","dependencies":[{"issue_id":"gitlab-insights-9c3","depends_on_id":"gitlab-insights-b06","type":"blocks","created_at":"2025-12-15T12:13:11.486031-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9ed","title":"3.5 Update DashboardClient for grouped view","description":"Update DashboardClient to use new WorkItemList component.\n\n## Implementation\nModify src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n1. Import WorkItemList component\n2. Use getWorkItemsGrouped query instead of flat events query\n3. Conditionally render based on user's dashboardView preference:\n   - \"grouped\": render WorkItemList\n   - \"flat\": render EventTable (existing)\n4. Handle item selection and detail pane updates\n5. Handle activity item clicks (scroll detail pane)\n\n## State Management\n- selectedItemId: string | null\n- expandedCardIds: Set\u003cstring\u003e\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-9ed: Update DashboardClient for grouped view\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-9ed","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:46.622726-05:00","updated_at":"2025-12-11T15:09:54.819453-05:00","dependencies":[{"issue_id":"gitlab-insights-9ed","depends_on_id":"gitlab-insights-fww","type":"blocks","created_at":"2025-12-11T14:26:03.442647-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-9ed","depends_on_id":"gitlab-insights-9vb","type":"blocks","created_at":"2025-12-11T14:26:03.648523-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9jt","title":"5.1 Add view toggle to dashboard header","description":"Add toggle in dashboard header to switch views.\n\n## Implementation\nAdd toggle component in dashboard header:\n- Label: \"View\"\n- Options: \"Grouped\" | \"Flat\"\n- Default: \"Grouped\"\n\nOn change:\n- Update user's dashboardView preference via API\n- Re-render dashboard with selected view\n\n## Files\n- src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n- May need new API endpoint to update user preference\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-9jt: Add view toggle to dashboard header\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-9jt","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:07.079833-05:00","updated_at":"2025-12-11T15:10:35.690667-05:00","dependencies":[{"issue_id":"gitlab-insights-9jt","depends_on_id":"gitlab-insights-a6q","type":"blocks","created_at":"2025-12-11T14:26:54.023636-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9mx","title":"Phase 1: Data Model \u0026 Re-fetch","description":"Update schema and refetch all data with relationships. Clean slate approach.\n\n## Goal\nTransform flat event model into hierarchical structure where comments are grouped under parent issues/MRs.\n\n## Approach\n- Wipe Event table data (preserve User, UserQuery, MonitoredProject)\n- Add relationship fields to Event model\n- Create ReadEvent model for read tracking\n- Update transformers to map GitLab API directly\n- Refetch all data with new schema\n\n## Key Files\n- prisma/schema.prisma\n- src/server/services/gitlab/event-transformer.ts\n- src/server/services/gitlab/types.ts\n\n## Acceptance Criteria\nContributes to: AC-1, AC-2, AC-3\n\n## On Completion (Epic)\nWhen all Phase 1 tasks complete:\n1. Verify AC-1, AC-2, AC-3 are marked 'implemented' in plan file\n2. bd close gitlab-insights-9mx","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:23:56.805113-05:00","updated_at":"2025-12-11T15:07:30.104581-05:00"}
{"id":"gitlab-insights-9pu","title":"Story 8.6: Create PersonDetailView","description":"**Context:** When clicking a person, show their full activity timeline.\n\n**Implementation:**\n\nCreate `src/app/(auth)/people/[id]/page.tsx`:\n\n```tsx\nexport default async function PersonDetailPage({ params }: { params: { id: string } }) {\n  await requireAuth();\n  return \u003cPersonDetailClient personId={params.id} /\u003e;\n}\n```\n\nCreate `src/components/people/PersonDetailClient.tsx`:\n\n```tsx\nexport function PersonDetailClient({ personId }: { personId: string }) {\n  // Person header (avatar, name, overall stats)\n  // Activity timeline (their Events)\n  // Filter by type (issues/MRs/comments)\n  // Date range filter\n}\n```\n\n**Activity timeline should show:**\n- Issues they authored\n- MRs they authored or reviewed\n- Comments they made\n- Sorted by date, most recent first\n\n**Acceptance criteria:**\n- [ ] Page renders at /people/[id]\n- [ ] Shows person header with stats\n- [ ] Activity timeline loads\n- [ ] Can filter by event type\n- [ ] Handles person not found\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:50.015417-05:00","updated_at":"2025-12-15T14:03:22.419565-05:00","closed_at":"2025-12-15T14:03:22.419565-05:00","dependencies":[{"issue_id":"gitlab-insights-9pu","depends_on_id":"gitlab-insights-9c3","type":"blocks","created_at":"2025-12-15T12:13:11.559719-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9rb","title":"Story 12.8: Add SimilarItemsPanel component","description":"**Context:** Show similar items on Event detail view.\n\n**Implementation:**\n\nCreate `src/components/similarity/SimilarItemsPanel.tsx` that:\n- Queries similar items using trpc.similarity.getSimilar\n- Uses threshold 0.7 and limit 5\n- Shows SimilarItemCard for each result\n- Displays duplicate badge for items with score \u003e= 0.85\n- Hidden when no similar items found\n\nIntegrate into EventDetail page.\n\n**Acceptance criteria:**\n- [ ] Shows similar items on detail view\n- [ ] Displays similarity score\n- [ ] Links to related items\n- [ ] Hidden when none found\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:28.105577-05:00","updated_at":"2025-12-12T09:05:28.105577-05:00","dependencies":[{"issue_id":"gitlab-insights-9rb","depends_on_id":"gitlab-insights-cb4","type":"blocks","created_at":"2025-12-15T12:13:43.450758-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9sk","title":"Story 10.10: Add configurable decay parameters","description":"Context: Allow advanced users to tune scoring weights and decay rates.\n\nImplementation:\n\nAdd to settings page src/app/(auth)/settings/page.tsx:\n- Advanced section (collapsed by default)\n- Accordion with 'Expert Scoring Configuration'\n- Contains ExpertiseConfigForm component\n\nCreate src/components/settings/ExpertiseConfigForm.tsx:\n- Form fields for each signal:\n  * Weight (0.1 - 10.0)\n  * Decay tau in days (7 - 365)\n- Save to user preferences (new field in User model)\n- Reset to defaults button\n\nAdd to Prisma schema:\nmodel User {\n  // ... existing fields\n  expertiseConfig Json? // Store custom DecayConfig\n}\n\nAcceptance criteria:\n- Can adjust weights per signal\n- Can adjust decay rates\n- Changes saved to user prefs\n- Reset to defaults works\n- Expert queries use custom config\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:22.614895-05:00","updated_at":"2025-12-12T09:06:22.614895-05:00","dependencies":[{"issue_id":"gitlab-insights-9sk","depends_on_id":"gitlab-insights-5iz","type":"blocks","created_at":"2025-12-15T12:13:17.253478-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9ts","title":"8.3.1: Track open MRs with file paths","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:13:32.906885-05:00","updated_at":"2025-12-15T12:03:19.129632-05:00","closed_at":"2025-12-15T12:03:19.129632-05:00","dependencies":[{"issue_id":"gitlab-insights-9ts","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.253826-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9vb","title":"3.2 Create WorkItemList component","description":"Create list component grouping WorkItemCards by type.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n\nProps:\n- issues: WorkItemSummary[]\n- mergeRequests: WorkItemSummary[]\n- selectedId: string | null\n- onSelectItem: (id: string) =\u003e void\n- onActivityItemClick: (eventId: string, activityId: string) =\u003e void\n\n## Layout\n+--------------------------------------------------+\n| Issues (12) - 3 new        [Sort: Activity v]    |\n|--------------------------------------------------|\n| [WorkItemCard]                                   |\n| [WorkItemCard]                                   |\n| [WorkItemCard]                                   |\n|--------------------------------------------------|\n| Merge Requests (8)         [Sort: Activity v]    |\n|--------------------------------------------------|\n| [WorkItemCard]                                   |\n| [WorkItemCard]                                   |\n+--------------------------------------------------+\n\n## Features\n- Section headers are sticky when scrolling\n- Section headers are collapsible (click to collapse all cards)\n- Multiple cards can be expanded simultaneously\n- Sort dropdown in section header\n\n## File\nsrc/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-9vb: Create WorkItemList component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-9vb","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:38.706094-05:00","updated_at":"2025-12-11T15:09:21.522902-05:00","dependencies":[{"issue_id":"gitlab-insights-9vb","depends_on_id":"gitlab-insights-fww","type":"blocks","created_at":"2025-12-11T14:26:03.235006-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9wc","title":"Story 13.3: Create DecisionView page","description":"**Context:** Dedicated page for decision archaeology.\n\n**Implementation:**\n\nCreate `src/app/(auth)/decisions/page.tsx`:\n\n```tsx\nexport default async function DecisionsPage() {\n  await requireAuth();\n  return \u003cDecisionViewClient /\u003e;\n}\n```\n\nCreate `src/components/decisions/DecisionViewClient.tsx`:\n\n```tsx\nexport function DecisionViewClient() {\n  // Search input\n  // Date range filter\n  // Type filter (issues/MRs/comments)\n  // Results list\n  // Empty state with example queries\n}\n```\n\n**Example queries to suggest:**\n- \"OAuth implementation\"\n- \"database schema\"\n- \"API design\"\n\n**Acceptance criteria:**\n- [ ] Page renders at /decisions\n- [ ] Search with filters\n- [ ] Shows results with context\n- [ ] Sidebar link added\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.594274-05:00","updated_at":"2025-12-12T09:04:54.594274-05:00","dependencies":[{"issue_id":"gitlab-insights-9wc","depends_on_id":"gitlab-insights-d33","type":"blocks","created_at":"2025-12-15T12:13:45.694059-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9yln","title":"4.3: Integrate read tracking into WorkItemCard and SidePanel","description":"Wire up read tracking to UI components. WorkItemCard: (1) Hover NEW badge → show Mark Read button (2) Click Mark Read → call markAsRead + update visual state (3) Click expand → call markAsRead + expand animation (4) Click title → open side panel + call markAsRead. SidePanelDetail: useEffect on open → call markAsRead. Optimistic UI: immediate visual feedback (remove NEW badge, change border/opacity) before server confirms. Handle errors (revert optimistic update on failure). Files: src/components/work-items/WorkItemCard.tsx, SidePanelDetail.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":150,"created_at":"2025-12-15T12:21:58.93315-05:00","updated_at":"2025-12-15T14:25:07.829229-05:00","closed_at":"2025-12-15T14:25:07.829229-05:00","dependencies":[{"issue_id":"gitlab-insights-9yln","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:59.119942-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-9yln","depends_on_id":"gitlab-insights-vwas","type":"blocks","created_at":"2025-12-15T12:21:59.202049-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-9yln","depends_on_id":"gitlab-insights-5h1j","type":"blocks","created_at":"2025-12-15T12:21:59.29804-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-9yln","depends_on_id":"gitlab-insights-70iy","type":"blocks","created_at":"2025-12-15T12:21:59.396563-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a01g","title":"Chore: Prisma import path inconsistency - some files use @prisma/client vs generated","description":"","status":"closed","priority":4,"issue_type":"chore","estimated_minutes":15,"created_at":"2025-12-15T14:11:33.941713-05:00","updated_at":"2025-12-16T17:30:24.767162-05:00","closed_at":"2025-12-16T17:30:24.767162-05:00"}
{"id":"gitlab-insights-a0y","title":"8.1.1: Extend Prisma schema for expertise data","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:10:08.646587-05:00","updated_at":"2025-12-15T12:01:28.086355-05:00","closed_at":"2025-12-15T12:01:28.086355-05:00","dependencies":[{"issue_id":"gitlab-insights-a0y","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.691301-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-a0y","depends_on_id":"gitlab-insights-d140","type":"blocks","created_at":"2025-12-15T11:18:41.004622-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a3r","title":"Story 12.1: Select embedding approach","description":"**Context:** Need to decide between local embeddings (pgvector) or API-based (OpenAI, sentence-transformers API).\n\n**Implementation:**\n\nResearch and document decision in ADR format:\n\n**Options:**\n1. **pgvector + sentence-transformers** - Local, free, requires setup\n2. **OpenAI embeddings API** - Easy, costs per token\n3. **Hugging Face Inference API** - Free tier available\n\n**Recommendation:** Start with pgvector + all-MiniLM-L6-v2 (384 dimensions):\n- Free and local\n- Fast inference\n- Good quality for short text\n- Can upgrade later\n\nCreate `docs/adr/embedding-approach.md` documenting decision.\n\n**Acceptance criteria:**\n- [ ] Decision documented\n- [ ] Trade-offs analyzed\n- [ ] Implementation path clear\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:10.320266-05:00","updated_at":"2025-12-12T09:04:10.320266-05:00"}
{"id":"gitlab-insights-a6q","title":"4.1 Mark as read on expand/view","description":"Trigger markAsRead when user expands card or views in detail.\n\n## Implementation\nIn DashboardClient.tsx:\n\n1. When card is expanded:\n   - Call markAsRead mutation with eventId\n   - Update local state to remove NEW badge\n\n2. When item is selected for detail pane:\n   - Call markAsRead mutation with eventId\n   - Update local state\n\n3. Optimistic update:\n   - Remove NEW badge immediately\n   - Revert if mutation fails\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-4, AC-9\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-a6q: Mark as read on expand/view\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-a6q\n- Update plan: AC-4, AC-9 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:00.820574-05:00","updated_at":"2025-12-11T15:10:21.396416-05:00","dependencies":[{"issue_id":"gitlab-insights-a6q","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:48.686869-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a7f","title":"Story 15.8: Implement threshold and daily limit","description":"**Context:** Ensure digest quality by filtering low-relevance items.\n\n**Implementation:**\n\nAlready in generateDigest, but add UI controls:\n\n```tsx\n\u003cFormField label=\"Minimum Relevance\"\u003e\n  \u003cSlider\n    min={0.3}\n    max={0.9}\n    step={0.1}\n    value={minRelevance}\n    onChange={setMinRelevance}\n  /\u003e\n  \u003cHelpText\u003eLower = more items, Higher = only most relevant\u003c/HelpText\u003e\n\u003c/FormField\u003e\n\n\u003cFormField label=\"Maximum Items\"\u003e\n  \u003cNumberInput\n    min={5}\n    max={30}\n    value={maxItems}\n    onChange={setMaxItems}\n  /\u003e\n  \u003cHelpText\u003eMaximum items per digest (default: 15)\u003c/HelpText\u003e\n\u003c/FormField\u003e\n```\n\n**Acceptance criteria:**\n- [ ] Can adjust relevance threshold\n- [ ] Can set max items\n- [ ] Defaults match spec (0.5, 15)\n- [ ] Changes affect preview\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:07.058712-05:00","updated_at":"2025-12-12T09:06:07.058712-05:00","dependencies":[{"issue_id":"gitlab-insights-a7f","depends_on_id":"gitlab-insights-psm","type":"blocks","created_at":"2025-12-15T12:13:58.070589-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a86","title":"8.3.3: Calculate territory ownership metrics","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:13:59.163987-05:00","updated_at":"2025-12-15T12:03:19.287351-05:00","closed_at":"2025-12-15T12:03:19.287351-05:00","dependencies":[{"issue_id":"gitlab-insights-a86","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.398918-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-a86","depends_on_id":"gitlab-insights-pf0","type":"blocks","created_at":"2025-12-15T11:14:31.841584-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ab7z","title":"Bug: Error swallowing in people.ts loses original error type and stack trace","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T14:10:53.114908-05:00","updated_at":"2025-12-15T14:10:53.114908-05:00"}
{"id":"gitlab-insights-agez","title":"Chore: Duplicate Person type definition in PersonCard.tsx vs Prisma generated","description":"","status":"closed","priority":4,"issue_type":"chore","estimated_minutes":15,"created_at":"2025-12-15T14:11:00.719719-05:00","updated_at":"2025-12-16T17:31:09.708499-05:00","closed_at":"2025-12-16T17:31:09.708499-05:00"}
{"id":"gitlab-insights-agx","title":"Story 12.9: Add \"Likely Duplicate\" badge","description":"**Context:** Prominently flag items that are very similar (\u003e0.85).\n\n**Implementation:**\n\nCreate DuplicateBadge component that:\n- Only renders when similarity \u003e= 0.85\n- Shows as danger/flat Badge\n- Displays percentage (rounded)\n- Text: \"Likely Duplicate (XX%)\"\n\nShow badge in:\n- Event list items\n- Event detail header\n- Similar items panel\n\n**Acceptance criteria:**\n- [ ] Badge shown for \u003e0.85 similarity\n- [ ] Shows percentage\n- [ ] Appears in relevant places\n- [ ] Visually prominent\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:34.57375-05:00","updated_at":"2025-12-12T09:05:34.57375-05:00","dependencies":[{"issue_id":"gitlab-insights-agx","depends_on_id":"gitlab-insights-9rb","type":"blocks","created_at":"2025-12-15T12:13:43.542081-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-aifm","title":"8.4.6: Create nightly digest generation job","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:16:00.123935-05:00","updated_at":"2025-12-15T12:03:19.896618-05:00","closed_at":"2025-12-15T12:03:19.896618-05:00","dependencies":[{"issue_id":"gitlab-insights-aifm","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.70501-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-aifm","depends_on_id":"gitlab-insights-7x83","type":"blocks","created_at":"2025-12-15T11:16:08.309697-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-amga","title":"Bug: Inconsistent cursor schemas between work-items (lastActivityAt) and search (createdAt)","description":"","status":"open","priority":2,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:10:30.039943-05:00","updated_at":"2025-12-15T14:10:30.039943-05:00"}
{"id":"gitlab-insights-ar85","title":"1.4: Refetch all GitLab data with relationship parsing","description":"Run full GitLab API sync to repopulate Event table with relationships using updated transformer. Expect 10-20min for ~2 weeks data. VALIDATION: Check 40%+ events have parentEventId (comments), 10%+ MRs have closesIssueIds, most work items have 2+ participants. Spot check 3-5 known issues/MRs against GitLab UI. Command: npm run sync:gitlab:full","status":"closed","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:21:52.90327-05:00","updated_at":"2025-12-15T14:06:22.621493-05:00","closed_at":"2025-12-15T14:06:22.621493-05:00","dependencies":[{"issue_id":"gitlab-insights-ar85","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:53.075136-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ar85","depends_on_id":"gitlab-insights-ehx7","type":"blocks","created_at":"2025-12-15T12:21:53.149392-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-aydp","title":"3.8: Implement breadcrumb navigation in detail pane","description":"## POST-MVP: Breadcrumb Navigation in Detail Pane\n\n### Deferred to Post-MVP\n\nThis feature adds significant complexity for a use case that's relatively rare in typical triage workflows:\n- Navigation stack state management\n- Back/forward behavior  \n- URL synchronization questions\n- Edge cases (what if linked item doesn't exist?)\n\n### Typical User Flow (MVP)\n1. Scan list → click item → view in side panel → close panel\n2. Scan list → click different item → view in side panel → close panel\n\nUsers rarely navigate item → related item → related item in deep chains. When they do need to investigate relationships, they can:\n- Note the related item ID\n- Close panel\n- Search/scroll to find it\n- Open it fresh\n\n### When This Becomes Valuable\n- Power users doing deep investigation\n- Complex dependency chains (Issue → MR → Related Issue → Blocking MR)\n- Audit trails ('how did I get here?')\n\n### Implementation Notes (for future)\n- Maintain navigation stack: `Array\u003c{ id, title, type }\u003e`\n- Display as clickable breadcrumb trail\n- Click any crumb to navigate back (truncate stack)\n- Max 3-4 visible items with ellipsis\n\n### PRD References\nFR27-30 describe this feature but don't mark it as MVP-critical.\n\n### Original Estimate\n120 minutes - still valid for post-MVP implementation","status":"open","priority":3,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T13:35:39.104212-05:00","updated_at":"2025-12-15T13:39:19.552183-05:00","dependencies":[{"issue_id":"gitlab-insights-aydp","depends_on_id":"gitlab-insights-70iy","type":"blocks","created_at":"2025-12-15T13:36:41.444815-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-aydp","depends_on_id":"gitlab-insights-zup3","type":"blocks","created_at":"2025-12-15T13:36:47.739442-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ayt0","title":"Create useInfiniteEvents hook","description":"Create /src/hooks/useInfiniteEvents.ts wrapping TanStack Query useInfiniteQuery. Includes getNextPageParam logic, staleTime configuration (30s), and useFlattenedEvents helper to flatten pages into single array for components.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:03.140921-05:00","updated_at":"2025-12-15T12:09:03.140921-05:00","dependencies":[{"issue_id":"gitlab-insights-ayt0","depends_on_id":"gitlab-insights-mz1k","type":"blocks","created_at":"2025-12-15T12:09:38.216136-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b06","title":"Story 8.4: Create PersonCard component","description":"**Context:** Need a reusable card to display person information with their activity stats.\n\n**Implementation:**\n\nCreate `src/components/people/PersonCard.tsx`:\n\n```tsx\ninterface PersonCardProps {\n  person: {\n    id: string;\n    username: string;\n    name: string | null;\n    avatarUrl: string | null;\n  };\n  stats?: {\n    issuesAuthored: number;\n    mrsAuthored: number;\n    mrsReviewed: number;\n    commentsCount: number;\n  };\n  onClick?: () =\u003e void;\n}\n\nexport function PersonCard({ person, stats, onClick }: PersonCardProps) {\n  // Avatar (use HeroUI Avatar component)\n  // Name/username\n  // Stats badges if provided (issues, MRs, comments)\n  // Clickable for navigation\n}\n```\n\n**Design notes:**\n- Use HeroUI Avatar, Card components\n- Match existing app styling (olive/cream theme)\n- Compact variant for lists, expanded for detail views\n\n**Acceptance criteria:**\n- [ ] Displays avatar, name, username\n- [ ] Shows stats badges when provided\n- [ ] Handles missing avatar gracefully\n- [ ] Clickable with proper hover state\n- [ ] Responsive layout\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:19.849675-05:00","updated_at":"2025-12-15T13:56:14.781883-05:00","closed_at":"2025-12-15T13:56:14.781883-05:00","dependencies":[{"issue_id":"gitlab-insights-b06","depends_on_id":"gitlab-insights-d29","type":"blocks","created_at":"2025-12-15T12:12:52.755036-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b0x","title":"Story 9.3: Extend GitLabClient to fetch commits","description":"**Context:** Need to fetch commits from GitLab API with file diffs.\n\n**Implementation:**\n\nExtend `src/server/services/gitlab-client.ts`:\n\n```typescript\ninterface GitLabCommit {\n  id: string;           // SHA\n  short_id: string;\n  title: string;\n  message: string;\n  author_name: string;\n  author_email: string;\n  authored_date: string;\n  web_url: string;\n  stats?: {\n    additions: number;\n    deletions: number;\n  };\n}\n\ninterface GitLabCommitDiff {\n  old_path: string;\n  new_path: string;\n  new_file: boolean;\n  renamed_file: boolean;\n  deleted_file: boolean;\n}\n\n// Add to GitLabClient class:\n\nasync fetchCommits(\n  projectId: string,\n  options?: {\n    since?: string;      // ISO date\n    until?: string;      // ISO date\n    ref_name?: string;   // Branch\n    per_page?: number;\n    maxPages?: number;\n  }\n): Promise\u003cGitLabCommit[]\u003e\n\nasync fetchCommitDiff(\n  projectId: string,\n  sha: string\n): Promise\u003cGitLabCommitDiff[]\u003e\n```\n\n**API endpoints:**\n- `GET /projects/:id/repository/commits?with_stats=true\u0026per_page=100`\n- `GET /projects/:id/repository/commits/:sha/diff`\n\n**Rate limiting considerations:**\n- Commits endpoint: 2 pages max (200 commits)\n- Diff endpoint: Only fetch for recent commits or on-demand\n- Consider caching diffs since they don't change\n\n**Acceptance criteria:**\n- [ ] Can fetch commit list with pagination\n- [ ] Can fetch commit diff (files changed)\n- [ ] Handles rate limiting\n- [ ] Returns typed responses\n\n**Hours:** 4","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:44.756568-05:00","updated_at":"2025-12-15T14:13:21.083431-05:00","closed_at":"2025-12-15T14:13:21.083431-05:00","dependencies":[{"issue_id":"gitlab-insights-b0x","depends_on_id":"gitlab-insights-6j1","type":"blocks","created_at":"2025-12-15T12:13:13.851514-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b5y","title":"Epic 12: Similarity \u0026 Duplicate Detection","description":"Goal: Detect similar/duplicate issues and MRs using text similarity.\n\nTestable when closed:\n- Creating an issue shows 'similar existing issues' suggestions\n- Viewing an issue shows related issues ranked by similarity\n- Similarity threshold distinguishes 'related' (0.7) from 'likely duplicate' (0.85)\n- Works with title and description text\n\nDependencies: Epic 8 (Person entity for baseline)\n\nAlgorithm:\nsimilarity_score = title_embedding_cosine x 0.35 + description_embedding_cosine x 0.35 + label_jaccard x 0.15 + file_overlap x 0.15\nthreshold_similar = 0.7, threshold_duplicate = 0.85\n\nContains 10 stories (12.1-12.10), ~28 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:05.835223-05:00","updated_at":"2025-12-12T09:03:05.835223-05:00","dependencies":[{"issue_id":"gitlab-insights-b5y","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:21.832053-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b6v","title":"Story 16.7: Create reviewer suggestion explanation","description":"Add explanations for why each reviewer is suggested.\n\n**Context:** Make reviewer suggestions actionable by explaining the reasoning - e.g., 'Expert in auth.ts (15 commits)', 'Owns user authentication territory', 'Recently active in this area'.\n\n**Implementation:**\n- Generate explanation text based on expertise signals\n- Show expertise scores or commit counts\n- Display in reviewer suggestion UI\n- Make reasoning transparent and useful\n\n**Acceptance criteria:**\n- Each suggested reviewer has explanation\n- Explanations reference concrete signals (commits, expertise, territory)\n- Clear and concise language\n- Helps user decide who to actually assign\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.748437-05:00","updated_at":"2025-12-12T09:04:49.748437-05:00","dependencies":[{"issue_id":"gitlab-insights-b6v","depends_on_id":"gitlab-insights-e1i","type":"blocks","created_at":"2025-12-15T12:14:00.216508-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b6xn","title":"Bug: GitLab pagination limit (10k items) not documented or handled","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T14:11:32.397994-05:00","updated_at":"2025-12-15T14:11:32.397994-05:00"}
{"id":"gitlab-insights-bgm","title":"1.1 Update Prisma schema with relationship fields","description":"Add relationship and metadata fields to the Event model in prisma/schema.prisma.\n\n## Implementation\nAdd these fields to Event model:\n\n// Relationship fields\nparentType      String?   // \"issue\" | \"merge_request\"\nparentEventId   String?   // FK to parent Event\ngitlabParentId  Int?      // GitLab issue/MR IID\n\n// MR -\u003e Issue relationships\nclosesIssueIds  Int[]     // Array of GitLab issue IIDs this MR closes\n\n// Cross-references\nmentionedInIds  Int[]     // GitLab IIDs mentioned in this item\n\n// System note flag\nisSystemNote    Boolean   @default(false)\n\n// People involvement\nassignees       String[]  // Array of assignee usernames\nparticipants    String[]  // Everyone who commented/interacted\n\n// Activity metadata\ncommentCount    Int       @default(0)\nlastActivityAt  DateTime\nstatus          String    // \"open\" | \"closed\" | \"merged\"\n\nAdd self-relation:\nparent          Event?    @relation(\"EventHierarchy\", fields: [parentEventId], references: [id])\nchildren        Event[]   @relation(\"EventHierarchy\")\n\nAdd indexes:\n@@index([parentEventId, createdAt])\n@@index([gitlabParentId])\n@@index([status, lastActivityAt])\n@@index([userId, type, status])\n\n## File\nprisma/schema.prisma\n\n---\n## Acceptance Criteria\nContributes to: AC-1, AC-2, AC-3\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-bgm: Add relationship fields to Event model\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-bgm\n- Update plan: AC-1, AC-2, AC-3 -\u003e \"schema-ready\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:23:57.148543-05:00","updated_at":"2025-12-11T15:29:05.723483-05:00","closed_at":"2025-12-11T15:29:05.723483-05:00"}
{"id":"gitlab-insights-bjk","title":"Add component and keyword badges to collapsed work item cards","description":"Currently, collapsed work item cards only show the repository name as plain text context. This enhancement adds styled component badges and keyword badges to collapsed cards to improve scan-to-decision relevance assessment.\n\nContext signals (repo, component, keywords) are first-class information in our organizational intelligence model - they answer 'why might this matter to me?' at a glance.\n\nEXACT COLOR SPECIFICATIONS (match existing GitLab Insights theme):\n\nREPOSITORY BADGE:\n- Semantic Name: badge-repo-dark / badge-repo-light\n- Dark Mode Background: hsl(199, 50%, 30%) - #1F5C75 (Blue tint)\n- Dark Mode Text: hsl(199, 92%, 80%) - #99D8F5 (Light blue)\n- Light Mode Background: hsl(199, 60%, 35%) - #2476A0\n- Light Mode Text: hsl(199, 100%, 95%) - #E6F7FF (Very light blue)\n\nCOMPONENT BADGE:\n- Semantic Name: badge-component-dark / badge-component-light  \n- Dark Mode Background: hsl(280, 50%, 30%) - #672680 (Purple tint)\n- Dark Mode Text: hsl(280, 67%, 80%) - #D4A5E6 (Light purple)\n- Light Mode Background: hsl(280, 60%, 35%) - #7A2E9E\n- Light Mode Text: hsl(280, 100%, 95%) - #F5E6FF (Very light purple)\n\nKEYWORD BADGE:\n- Semantic Name: badge-keyword-dark / badge-keyword-light\n- Dark Mode Background: hsl(0, 0%, 25%) - #404040 (Gray - subtle)\n- Dark Mode Text: hsl(0, 0%, 75%) - #BFBFBF (Gray text)\n- Light Mode Background: hsl(0, 0%, 85%) - #D9D9D9 (Light gray)\n- Light Mode Text: hsl(0, 0%, 30%) - #4D4D4D (Dark gray text)\n\nTYPOGRAPHY \u0026 SPACING (from existing GitLab Insights system):\n- Font Size: 11px (text-xs from existing scale)\n- Font Weight: 500 (Medium from existing scale)\n- Padding: 2px vertical, 8px horizontal\n- Border Radius: 4px\n- Gap Between Badges: 8px (spacing-2 from existing 8px grid)\n- Margin Top: 8px (spacing-2)\n\nIMPLEMENTATION DETAILS:\n\nBadge Container:\n- Display: flex\n- Gap: 8px\n- Flex-wrap: wrap\n- Margin-top: 8px\n\nBadge Base Style:\n- Font-size: 11px\n- Font-weight: 500\n- Padding: 2px 8px\n- Border-radius: 4px\n- Display: inline-flex\n- Align-items: center\n- Gap: 4px (for optional icon)\n\nRendering Order: [Repo Badge] [Component Badge] [Keyword Badge 1] [Keyword Badge 2] ...\n\nWHY THESE COLORS:\n- Blue tint for repository matches existing Info semantic color family (hsl(199, ...))\n- Purple tint for component matches existing event type colors (purple for issues)\n- Gray for keywords is intentionally less prominent (contextual vs first-class)\n- All colors meet WCAG AA contrast requirements\n- Colors integrate seamlessly with existing olive accent (#9DAA5F) and charcoal background (#2d2e2e)\n\nACCEPTANCE CRITERIA:\n✅ Repository badge uses hsl(199, 50%, 30%) background in dark mode\n✅ Component badge uses hsl(280, 50%, 30%) background in dark mode  \n✅ Keyword badge uses hsl(0, 0%, 25%) background in dark mode\n✅ Light mode variants implemented with specified colors\n✅ Badges follow 8px spacing grid (8px gap, 8px margin-top)\n✅ Typography uses text-xs (11px) and medium weight (500)\n✅ Badges wrap properly on mobile\n✅ Contrast ratios meet WCAG AA (4.5:1 minimum for text)\n✅ Renders in order: repo → component → keywords\n\nREFERENCE:\n- UX Spec Section 3.2 Visual Foundation: Context Signal Badges (lines 1119-1157)\n- Design System Integration: GitLab Insights Color System (lines 736-756)\n- Design Direction Section 4.4: Enhancement 1 analysis","status":"open","priority":2,"issue_type":"feature","estimated_minutes":120,"created_at":"2025-12-15T10:28:23.783258-05:00","updated_at":"2025-12-15T10:31:03.44298-05:00"}
{"id":"gitlab-insights-bm19","title":"Security: No API response validation in gitlab-client - trusts external data","description":"","status":"closed","priority":1,"issue_type":"bug","estimated_minutes":60,"created_at":"2025-12-15T14:07:01.397974-05:00","updated_at":"2025-12-15T14:25:31.092934-05:00","closed_at":"2025-12-15T14:25:31.092934-05:00"}
{"id":"gitlab-insights-brab","title":"2.1: Create TypeScript types for WorkItem and ActivitySummary","description":"Define TypeScript interfaces for work items and activity summaries. WorkItem: id, type, status, title, number, repositoryName, labels, keywords, author, dates, relationships (closesIssueIds, closedByMRIds, mentionedInIds), activitySummary, activities (optional), read state. ActivitySummary: totalCount, newCount, latestActivity, participants. ActivityItem: event details + isSystemNote + isUnread. File: src/types/work-items.ts","status":"closed","priority":0,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T12:21:53.682828-05:00","updated_at":"2025-12-15T13:56:02.416722-05:00","closed_at":"2025-12-15T13:56:02.416722-05:00","dependencies":[{"issue_id":"gitlab-insights-brab","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:53.845636-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-brab","depends_on_id":"gitlab-insights-p1dz","type":"blocks","created_at":"2025-12-15T12:21:53.924047-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-bug","title":"4.2 Default sort: unread first","description":"Implement default sort order: unread items first, then by activity.\n\n## Implementation\nIn WorkItemList.tsx:\n\nDefault sort:\n1. Items with hasNewActivity = true (NEW badge)\n2. Then by lastActivityAt descending\n\nAdd sort dropdown with options:\n- \"Unread first\" (default)\n- \"Latest activity\"\n- \"Most comments\"\n- \"Assigned to me\"\n\n## File\nsrc/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-4\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-bug: Default sort - unread first\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-bug","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:01.044437-05:00","updated_at":"2025-12-11T15:10:21.723696-05:00","dependencies":[{"issue_id":"gitlab-insights-bug","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:48.923381-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-bv1d","title":"Bug: Hardcoded CSS variable in PeopleClient.tsx without fallback","description":"","status":"closed","priority":4,"issue_type":"bug","estimated_minutes":5,"created_at":"2025-12-15T14:11:02.433164-05:00","updated_at":"2025-12-16T17:32:38.853512-05:00","closed_at":"2025-12-16T17:32:38.853512-05:00"}
{"id":"gitlab-insights-bzgz","title":"Security: Potential XSS via ts_headline highlighted snippets in search","description":"","status":"closed","priority":1,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:10:33.125108-05:00","updated_at":"2025-12-15T14:20:51.66521-05:00","closed_at":"2025-12-15T14:20:51.66521-05:00"}
{"id":"gitlab-insights-c1vd","title":"Write E2E tests for scroll behavior","description":"Test scroll-to-load triggers next page, loading states appear, keyboard navigation across pages, scroll restoration after navigation, error states handled gracefully. Use realistic datasets (100+ items).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:05.943351-05:00","updated_at":"2025-12-15T12:09:05.943351-05:00","dependencies":[{"issue_id":"gitlab-insights-c1vd","depends_on_id":"gitlab-insights-hn5c","type":"blocks","created_at":"2025-12-15T12:09:40.515252-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-c1vd","depends_on_id":"gitlab-insights-m3gw","type":"blocks","created_at":"2025-12-15T12:09:40.590081-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-c1wq","title":"Add comprehensive ARIA live regions","description":"Enhance screen reader support beyond basic loading indicator. Add announcements: 'Loaded 50 more items, now showing 150 total', '5 new items available at top', 'All items loaded'. Use aria-live='polite' for non-intrusive updates. Test with NVDA/JAWS/VoiceOver.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:32.856498-05:00","updated_at":"2025-12-15T13:41:32.856498-05:00","dependencies":[{"issue_id":"gitlab-insights-c1wq","depends_on_id":"gitlab-insights-zdlk","type":"blocks","created_at":"2025-12-15T13:42:25.04666-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ca6","title":"Story 11.2: Extend GitLabClient for MR changes","description":"**Context:** Fetch file changes for merge requests.\n\n**Implementation:**\n\nAdd to `src/server/services/gitlab-client.ts`:\n\n```typescript\ninterface GitLabMRChange {\n  old_path: string;\n  new_path: string;\n  new_file: boolean;\n  renamed_file: boolean;\n  deleted_file: boolean;\n}\n\nasync fetchMRChanges(\n  projectId: string,\n  mrIid: number\n): Promise\u003cGitLabMRChange[]\u003e\n```\n\n**API endpoint:** `GET /projects/:id/merge_requests/:iid/changes`\n\n**Rate limiting:** This is expensive - only fetch for open MRs or on-demand.\n\nAdd to event-transformer to populate MRFileChange on MR fetch.\n\n**Acceptance criteria:**\n- [ ] Can fetch MR file changes\n- [ ] Transforms to MRFileChange records\n- [ ] Handles rate limits\n- [ ] Integrated into MR refresh\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:26.565761-05:00","updated_at":"2025-12-12T09:04:26.565761-05:00","dependencies":[{"issue_id":"gitlab-insights-ca6","depends_on_id":"gitlab-insights-xug","type":"blocks","created_at":"2025-12-15T12:13:40.344111-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cb4","title":"Story 12.7: Add getSimilarIssues endpoint","description":"**Context:** API to find similar items.\n\n**Implementation:**\n\nCreate `src/server/api/routers/similarity.ts` with similarityRouter containing two endpoints:\n\n1. **getSimilar** - Find similar items to an existing Event\n   - Input: eventId, limit (default 10), threshold (default 0.7), optional types\n   - Returns similar events with scores\n\n2. **searchSimilar** - Search for similar items by text (for new issue check)\n   - Input: title, optional body, limit, threshold\n   - Generates embedding for input text and searches\n\n**Acceptance criteria:**\n- [ ] Can find similar to existing Event\n- [ ] Can search by text (pre-creation check)\n- [ ] Respects threshold\n- [ ] Returns similarity scores\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:16.982726-05:00","updated_at":"2025-12-12T09:05:16.982726-05:00","dependencies":[{"issue_id":"gitlab-insights-cb4","depends_on_id":"gitlab-insights-2t2","type":"blocks","created_at":"2025-12-15T12:13:43.358052-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cb49","title":"Performance: Unbounded transaction size in person upsert - can lock DB","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:07:05.062863-05:00","updated_at":"2025-12-16T16:05:09.155241-05:00","closed_at":"2025-12-16T16:05:09.155241-05:00"}
{"id":"gitlab-insights-cbmt","title":"BUG: EventDetail non-null assertion on eventId could cause runtime error","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T12:10:24.463737-05:00","updated_at":"2025-12-16T16:01:01.659684-05:00","closed_at":"2025-12-16T16:01:01.659684-05:00"}
{"id":"gitlab-insights-cdw3","title":"Add skeleton screens for initial load states","description":"Replace loading spinners with skeleton screens for better perceived performance. Create EventTableSkeleton component with placeholder rows (shimmer effect). Use for initial page load. Keep inline spinner for next-page loads. Industry standard pattern that reduces perceived latency.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:32.204681-05:00","updated_at":"2025-12-15T13:41:32.204681-05:00","dependencies":[{"issue_id":"gitlab-insights-cdw3","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T13:42:24.644541-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cebh","title":"MEDIUM: Concurrent Mark All mutations lack atomic protection","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:12:52.826849-05:00","updated_at":"2025-12-16T15:59:15.481775-05:00","closed_at":"2025-12-16T15:59:15.481775-05:00"}
{"id":"gitlab-insights-cf4","title":"Story 13.4: Create DecisionResultCard","description":"**Context:** Display search results with context and participants.\n\n**Implementation:**\n\nCreate `src/components/decisions/DecisionResultCard.tsx`:\n\n```tsx\ninterface DecisionResultCardProps {\n  result: {\n    event: Event;\n    rank: number;\n    snippet: string; // Highlighted context\n    participants: Person[];\n    discussionCount: number;\n  };\n}\n\nexport function DecisionResultCard({ result }: DecisionResultCardProps) {\n  // Event type badge\n  // Title (highlighted matches)\n  // Context snippet\n  // Participants avatars\n  // Discussion count\n  // Date\n  // Click to view full discussion\n}\n```\n\n**Acceptance criteria:**\n- [ ] Shows highlighted context\n- [ ] Displays participants\n- [ ] Discussion count shown\n- [ ] Links to full view\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.795696-05:00","updated_at":"2025-12-12T09:04:54.795696-05:00","dependencies":[{"issue_id":"gitlab-insights-cf4","depends_on_id":"gitlab-insights-9wc","type":"blocks","created_at":"2025-12-15T12:13:45.778637-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ch8","title":"4.4 Search includes all items with Hide closed filter","description":"Make search return all items (open + closed) with filter toggle.\n\n## Implementation\nWhen search/query is active:\n- Default: show all items matching query (open + closed)\n- Add \"Hide closed\" toggle near search bar\n- When toggled: filter out closed/merged items\n\nThis allows users to find historical/archived items via search.\n\n## Files\n- src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n- Search-related components\n\n---\n## Acceptance Criteria\nContributes to: AC-8\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-ch8: Search includes all items with Hide closed filter\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-ch8\n- Update plan: AC-8 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:01.511918-05:00","updated_at":"2025-12-11T15:10:22.163708-05:00","dependencies":[{"issue_id":"gitlab-insights-ch8","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:49.34145-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cj3","title":"Story 16.5: Integrate collision alerts","description":"Integrate territory-based collision alerts prominently in MR context view.\n\n**Context:** Use Epic 11 (Territory) collision detection to warn about overlapping work. This helps prevent merge conflicts and duplicate effort by surfacing when multiple people are working in the same area.\n\n**Implementation:**\n- Use territory collision detection from Epic 11\n- Display collision alerts prominently in MRContextPanel\n- Show which other MRs/people are working in same area\n- Include severity indicators\n\n**Acceptance criteria:**\n- Collision alerts displayed prominently when detected\n- Shows details of conflicting work (who, what MR, which files)\n- Clear visual treatment for high-priority alerts\n- No false positives for unrelated changes\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.319578-05:00","updated_at":"2025-12-12T09:04:49.319578-05:00","dependencies":[{"issue_id":"gitlab-insights-cj3","depends_on_id":"gitlab-insights-udr","type":"blocks","created_at":"2025-12-15T12:14:00.065475-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cjmo","title":"Add keyboard shortcuts to CatchUpWorkItems","description":"Add keyboard navigation to the new CatchUpWorkItems component:\n- j/k to move selection up/down\n- Enter to expand/select item\n- Esc to close side panel\n- Scoped keyboard handlers (per section focus)\n\nThis was deferred from the initial work-item catch-up integration.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T09:25:53.245416-05:00","updated_at":"2025-12-17T09:25:53.245416-05:00"}
{"id":"gitlab-insights-cls","title":"Story 12.4: Backfill embeddings for existing Events","description":"**Context:** Generate embeddings for all existing issues and MRs.\n\n**Implementation:**\n\nCreate backfill script/endpoint with function signature and tRPC endpoint. Includes performance considerations like batch processing (50 at a time), rate limiting, progress reporting, and resume capability.\n\n**Acceptance criteria:**\n- [ ] Can backfill all Events\n- [ ] Progress tracking\n- [ ] Handles errors gracefully\n- [ ] Can be re-run safely\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.026135-05:00","updated_at":"2025-12-12T09:04:54.026135-05:00","dependencies":[{"issue_id":"gitlab-insights-cls","depends_on_id":"gitlab-insights-3gs","type":"blocks","created_at":"2025-12-15T12:13:43.067194-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d140","title":"8.1.0: GitLab API data validation spike","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:18:35.483788-05:00","updated_at":"2025-12-15T12:01:30.589629-05:00","closed_at":"2025-12-15T12:01:30.589629-05:00","dependencies":[{"issue_id":"gitlab-insights-d140","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:18:40.935863-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d1a","title":"Story 9.10: Add indexes for file path prefix queries","description":"**Context:** Need efficient queries for all files in directory X patterns.\n\n**Implementation:**\n\nAdd database indexes and query helpers:\n\nSQL migration:\n- CREATE INDEX idx_file_path_prefix ON File USING btree (userId, projectId, path text_pattern_ops)\n- CREATE INDEX idx_file_directory ON File (userId, directory)\n\nAdd query helper in src/lib/db/file-queries.ts:\n\nasync function findFilesByPathPrefix(db, userId, projectId, pathPrefix)\nasync function findFilesInDirectory(db, userId, projectId, directory)\n\n**Acceptance criteria:**\n- Prefix queries use index\n- Directory queries efficient\n- EXPLAIN shows index usage\n- Performance less than 100ms for typical queries\n\n**Hours:** 2","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:25.667926-05:00","updated_at":"2025-12-15T14:26:37.720045-05:00","closed_at":"2025-12-15T14:26:37.720045-05:00","dependencies":[{"issue_id":"gitlab-insights-d1a","depends_on_id":"gitlab-insights-9b9","type":"blocks","created_at":"2025-12-15T12:13:14.446544-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d29","title":"Story 8.3: Add Person tRPC router","description":"**Context:** Need API endpoints to query and display Person data.\n\n**Implementation:**\n\nCreate `src/server/api/routers/people.ts`:\n\n```typescript\nexport const peopleRouter = createTRPCRouter({\n  // List all people with optional search\n  list: protectedProcedure\n    .input(z.object({\n      search: z.string().optional(),\n      limit: z.number().default(50)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Person[] with basic stats\n    }),\n\n  // Get single person by ID\n  getById: protectedProcedure\n    .input(z.object({ id: z.string() }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Person with detailed stats\n    }),\n\n  // Get person's activity (Events they authored)\n  getActivity: protectedProcedure\n    .input(z.object({\n      personId: z.string(),\n      limit: z.number().default(50)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Events where author matches person's username\n    }),\n\n  // Trigger extraction from existing Events\n  extractFromEvents: protectedProcedure\n    .mutation(async ({ ctx }) =\u003e {\n      // Run person extraction, return count\n    })\n});\n```\n\nAdd to `src/server/api/root.ts`:\n```typescript\nimport { peopleRouter } from \"./routers/people\";\n\nexport const appRouter = createTRPCRouter({\n  // ... existing\n  people: peopleRouter,\n});\n```\n\n**Acceptance criteria:**\n- [ ] `people.list` returns paginated people with search\n- [ ] `people.getById` returns single person\n- [ ] `people.getActivity` returns person's Events\n- [ ] `people.extractFromEvents` runs extraction\n- [ ] All procedures enforce user isolation (userId filter)\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:02.705309-05:00","updated_at":"2025-12-15T13:21:10.274415-05:00","closed_at":"2025-12-15T13:21:10.274415-05:00","dependencies":[{"issue_id":"gitlab-insights-d29","depends_on_id":"gitlab-insights-uud","type":"blocks","created_at":"2025-12-15T12:12:52.676087-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d33","title":"Story 13.2: Create getDecisions endpoint","description":"**Context:** API for decision archaeology queries.\n\n**Implementation:**\n\nAdd to `src/server/api/routers/decisions.ts`:\n\n```typescript\nexport const decisionsRouter = createTRPCRouter({\n  // Search for decisions/discussions\n  search: protectedProcedure\n    .input(z.object({\n      query: z.string(),\n      types: z.array(z.enum(['issue', 'merge_request', 'comment'])).optional(),\n      dateRange: z.object({\n        from: z.date().optional(),\n        to: z.date().optional()\n      }).optional(),\n      limit: z.number().default(20)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Combine FTS with semantic search\n      // Return ranked results with context\n    })\n});\n```\n\n**Search strategy:**\n1. FTS for keyword matches\n2. Semantic search for meaning matches\n3. Combine and deduplicate\n4. Return with context snippets\n\n**Acceptance criteria:**\n- [ ] Searches all content types\n- [ ] Date range filtering\n- [ ] Returns context snippets\n- [ ] Combined keyword + semantic\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.38228-05:00","updated_at":"2025-12-12T09:04:54.38228-05:00","dependencies":[{"issue_id":"gitlab-insights-d33","depends_on_id":"gitlab-insights-2q6","type":"blocks","created_at":"2025-12-15T12:13:45.61112-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d3we","title":"Bug: extractPeopleFromEvents is dead code - returns zeros and logs warning","description":"","status":"open","priority":3,"issue_type":"chore","estimated_minutes":15,"created_at":"2025-12-15T14:07:03.734099-05:00","updated_at":"2025-12-15T14:07:03.734099-05:00"}
{"id":"gitlab-insights-dgci","title":"Update EventTable component for infinite scroll","description":"Update /src/components/dashboard/EventTable.tsx to accept optional infiniteScroll prop {fetchNextPage, hasNextPage, isFetchingNextPage}. Add sentinel div at bottom with loading indicator. Integrate with useInfiniteScroll hook. Preserve existing keyboard nav, scroll restoration, and selection behavior.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:03.582599-05:00","updated_at":"2025-12-15T12:09:03.582599-05:00","dependencies":[{"issue_id":"gitlab-insights-dgci","depends_on_id":"gitlab-insights-mdhx","type":"blocks","created_at":"2025-12-15T12:09:38.874892-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dgci","depends_on_id":"gitlab-insights-ayt0","type":"blocks","created_at":"2025-12-15T12:09:38.957087-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-di5","title":"Story 9.5: Link commits to Person records","description":"**Context:** Match commit authors to existing Person records for relationship queries.\n\n**Implementation:**\n\nAdd to `src/server/services/commit-transformer.ts`:\n\n```typescript\n// Find or create Person from commit author\nasync function resolveCommitAuthor(\n  db: PrismaClient,\n  userId: string,\n  authorName: string,\n  authorEmail: string\n): Promise\u003cstring | null\u003e // Returns personId or null\n```\n\n**Matching logic (in priority order):**\n1. Match by email (exact)\n2. Match by name (exact, case-insensitive)\n3. Match by name (fuzzy - first/last name parts)\n4. Return null if no match (orphan commit)\n\n**Future enhancement:** Store unmatched authors for manual linking.\n\n**Acceptance criteria:**\n- [ ] Matches commits to Person by email\n- [ ] Falls back to name matching\n- [ ] Handles unmatched authors gracefully\n- [ ] Links personId in Commit record\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:11.205027-05:00","updated_at":"2025-12-15T14:15:33.505169-05:00","closed_at":"2025-12-15T14:15:33.505169-05:00","dependencies":[{"issue_id":"gitlab-insights-di5","depends_on_id":"gitlab-insights-3oq","type":"blocks","created_at":"2025-12-15T12:13:14.010101-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dik","title":"Story 11.6: Create getTerritoryForPerson endpoint","description":"**Context:** Show what files/directories a person is currently working on.\n\n**Implementation:**\n\nAdd to `src/server/api/routers/territory.ts`:\n\n```typescript\nexport const territoryRouter = createTRPCRouter({\n  // Get person's active territory\n  getForPerson: protectedProcedure\n    .input(z.object({\n      personId: z.string(),\n      timeWindow: z.number().default(30) // Days\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Find files they've touched recently (commits, MRs)\n      // Group by directory\n      // Return with activity counts\n    }),\n\n  // Get territory heatmap (all people's activity)\n  getHeatmap: protectedProcedure\n    .input(z.object({\n      projectId: z.string().optional(),\n      timeWindow: z.number().default(30)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Aggregate all activity by directory\n      // Return directories with person counts\n    })\n});\n```\n\n**Acceptance criteria:**\n- [ ] Returns person's active files/directories\n- [ ] Respects time window\n- [ ] Groups by directory\n- [ ] Heatmap shows activity density\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:09.436245-05:00","updated_at":"2025-12-12T09:05:09.436245-05:00","dependencies":[{"issue_id":"gitlab-insights-dik","depends_on_id":"gitlab-insights-85l","type":"blocks","created_at":"2025-12-15T12:13:40.651253-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dj8","title":"Story 17.3: Show instant expert list with contact info","description":"Display instant expert list with contact information for the selected path/area.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Leverages expertise scoring from Epic 10\n- Critical for quick incident response\n\nAcceptance Criteria:\n- Query and display experts for selected path\n- Show expert names and contact information\n- Display expertise metrics/scores\n- Provide quick contact options (email, Slack, etc.)\n- Sort experts by relevance/expertise level\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.99984-05:00","updated_at":"2025-12-12T09:04:38.99984-05:00","dependencies":[{"issue_id":"gitlab-insights-dj8","depends_on_id":"gitlab-insights-8pw","type":"blocks","created_at":"2025-12-15T12:14:02.08329-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dnfs","title":"Update Queries router with cursor support (getNewItems)","description":"Update /src/server/api/routers/queries.ts getNewItems endpoint. Add cursor pagination while preserving lastVisitedAt filter. Return {items, nextCursor, hasMore} format.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:02.054362-05:00","updated_at":"2025-12-15T12:09:02.054362-05:00","dependencies":[{"issue_id":"gitlab-insights-dnfs","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:37.476731-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-do0","title":"Story 11.9: Add CollisionAlert component","description":"**Context:** Show collision warning on MR detail view.\n\n**Implementation:**\n\nCreate `src/components/territory/CollisionAlert.tsx`:\n\n```tsx\ninterface CollisionAlertProps {\n  mrEventId: string;\n}\n\nexport function CollisionAlert({ mrEventId }: CollisionAlertProps) {\n  const { data: collisions } = trpc.territory.getCollisions.useQuery({\n    mrEventId,\n    threshold: 0.3\n  });\n\n  if (!collisions?.length) return null;\n\n  return (\n    \u003cAlert color=\"warning\"\u003e\n      \u003cAlertTitle\u003e\n        {collisions.length} potential collision(s) detected\n      \u003c/AlertTitle\u003e\n      {collisions.map(c =\u003e (\n        \u003cCollisionItem key={c.otherMR.id} collision={c} /\u003e\n      ))}\n    \u003c/Alert\u003e\n  );\n}\n```\n\nIntegrate into EventDetail for MR type events.\n\n**Acceptance criteria:**\n- [ ] Shows alert for collisions above threshold\n- [ ] Lists conflicting MRs\n- [ ] Shows severity indicator\n- [ ] Hidden when no collisions\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:37.812446-05:00","updated_at":"2025-12-12T09:05:37.812446-05:00","dependencies":[{"issue_id":"gitlab-insights-do0","depends_on_id":"gitlab-insights-4zq","type":"blocks","created_at":"2025-12-15T12:13:40.877053-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dqcf","title":"5.5: Optimize rendering performance (virtualization, memoization)","description":"Performance optimizations for smooth 60fps interactions. MEMOIZATION: React.memo on WorkItemCard (re-render only when props change), useMemo for expensive computations (activity summaries, sorting). DEBOUNCING: Search input 300ms, scroll events 100ms. CODE SPLITTING: Lazy load SidePanelDetail (React.lazy + Suspense). Consider virtual scrolling for 100+ items (react-window or @tanstack/react-virtual) but defer if \u003c50 items typical. Measure with React DevTools Profiler. TARGET: \u003c200ms expand/collapse, \u003c500ms side panel open.","status":"in_progress","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T12:22:02.261444-05:00","updated_at":"2025-12-15T14:47:41.485171-05:00","dependencies":[{"issue_id":"gitlab-insights-dqcf","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:02.44286-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dqcf","depends_on_id":"gitlab-insights-jiyx","type":"blocks","created_at":"2025-12-15T12:22:02.522944-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dr4u","title":"P1.4: Update activity metadata fields during sync","description":"Modify sync process to compute and store: lastActivityAt (max timestamp of child events), commentCount (count of comment-type child events), unresolvedCommentCount (count where resolved=false). Implementation: After inserting parent work item, query child events and update counts. Optimization: Batch update for performance. Edge case: Handle work items with zero activity. Why stored not computed: Avoids N+1 queries when rendering list of 50+ work items.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T13:26:24.886768-05:00","updated_at":"2025-12-16T11:00:35.542952-05:00","closed_at":"2025-12-16T11:00:35.542952-05:00"}
{"id":"gitlab-insights-dw9","title":"1.1a Fix Event self-relation onDelete behavior","description":"Fix missing onDelete behavior on Event self-relation for parent-child hierarchy.\n\n## Problem\nThe `parent` relation in Event model does not specify onDelete behavior:\n```prisma\nparent   Event?  @relation(\"EventHierarchy\", fields: [parentEventId], references: [id])\n```\n\nWithout explicit onDelete, Prisma defaults to restricting deletion, which could prevent deleting parent events (issues/MRs) that have children (comments). This would cause runtime errors.\n\n## Solution\nAdd `onDelete: SetNull` to preserve child events with nullified parent reference:\n```prisma\nparent   Event?  @relation(\"EventHierarchy\", fields: [parentEventId], references: [id], onDelete: SetNull)\n```\n\nAlternative: Use `onDelete: Cascade` if child comments should be deleted with their parent issue/MR.\n\n## Location\nprisma/schema.prisma:113 (approximately)\n\n## Discovered\nFound during code review of gitlab-insights-82a (ReadEvent model)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T15:29:05.234309-05:00","updated_at":"2025-12-15T13:54:52.22117-05:00","closed_at":"2025-12-15T13:54:52.22117-05:00","dependencies":[{"issue_id":"gitlab-insights-dw9","depends_on_id":"gitlab-insights-bgm","type":"discovered-from","created_at":"2025-12-11T15:29:19.680931-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dwy","title":"Story 12.2: Add embedding column to Event model","description":"**Context:** Store vector embeddings for similarity search.\n\n**Implementation:**\n\nAdd pgvector extension and column:\n\n```sql\n-- Migration\nCREATE EXTENSION IF NOT EXISTS vector;\n\nALTER TABLE \"Event\" ADD COLUMN embedding vector(384);\n\nCREATE INDEX idx_event_embedding ON \"Event\"\nUSING ivfflat (embedding vector_cosine_ops)\nWITH (lists = 100);\n```\n\nUpdate Prisma schema:\n```prisma\nmodel Event {\n  // ... existing\n  embedding     Unsupported(\"vector(384)\")?\n}\n```\n\n**Note:** Prisma doesn't natively support vector type. Use raw SQL for embedding operations.\n\n**Acceptance criteria:**\n- [ ] pgvector extension enabled\n- [ ] Embedding column added\n- [ ] IVFFlat index created\n- [ ] Migration runs\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:19.771477-05:00","updated_at":"2025-12-12T09:04:19.771477-05:00","dependencies":[{"issue_id":"gitlab-insights-dwy","depends_on_id":"gitlab-insights-a3r","type":"blocks","created_at":"2025-12-15T12:13:42.924292-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dxn","title":"8.1.4: Create expertise query service","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:10:46.667463-05:00","updated_at":"2025-12-15T12:03:17.73077-05:00","closed_at":"2025-12-15T12:03:17.73077-05:00","dependencies":[{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.923403-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-a0y","type":"blocks","created_at":"2025-12-15T11:11:40.888497-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-pf0","type":"blocks","created_at":"2025-12-15T11:11:40.957802-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-07y","type":"blocks","created_at":"2025-12-15T11:11:41.032579-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e0h","title":"1.5 Update event transformer for notes/comments","description":"Update event-transformer.ts to capture parent relationships for comments.\n\n## Implementation\nIn src/server/services/gitlab/event-transformer.ts, when transforming notes:\n\nMap GitLab Notes API fields directly:\n- note.noteable_id -\u003e gitlabParentId\n- note.noteable_type -\u003e parentType (convert \"Issue\" | \"MergeRequest\")\n- note.system -\u003e isSystemNote\n\nAfter creating the Event, look up parent:\n- Query Event where gitlabEventId = gitlabParentId AND type matches parentType\n- Set parentEventId to found Event's id\n\n## File\nsrc/server/services/gitlab/event-transformer.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-1\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-e0h: Update event transformer for notes/comments\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-e0h\n- Update plan: AC-1 -\u003e \"implemented\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:06.215644-05:00","updated_at":"2025-12-15T13:47:43.246121-05:00","closed_at":"2025-12-15T13:47:43.246121-05:00","dependencies":[{"issue_id":"gitlab-insights-e0h","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:47.417303-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e0p","title":"8.1.7: Build expertise heatmap visualization","description":"","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:11:20.174083-05:00","updated_at":"2025-12-15T12:03:18.166013-05:00","closed_at":"2025-12-15T12:03:18.166013-05:00","dependencies":[{"issue_id":"gitlab-insights-e0p","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.203273-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-e0p","depends_on_id":"gitlab-insights-ylc","type":"blocks","created_at":"2025-12-15T11:11:41.244141-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e1i","title":"Story 16.6: Add similar MRs section","description":"Add a section showing similar MRs using similarity scoring from Epic 12.\n\n**Context:** Help reviewers and authors find related work by surfacing MRs with similar descriptions, touched files, or goals. This provides useful context and can reveal related implementations.\n\n**Implementation:**\n- Use similarity scoring from Epic 12\n- Query for MRs with high similarity scores\n- Display with similarity explanation\n- Link to similar MRs\n\n**Acceptance criteria:**\n- Shows MRs with similar descriptions/changes\n- Similarity score or explanation included\n- Links directly to similar MRs\n- Handles case where no similar MRs found\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.541453-05:00","updated_at":"2025-12-12T09:04:49.541453-05:00","dependencies":[{"issue_id":"gitlab-insights-e1i","depends_on_id":"gitlab-insights-cj3","type":"blocks","created_at":"2025-12-15T12:14:00.139522-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e5z","title":"Story 15.4: Create DigestEmail template","description":"**Context:** Email template for daily digest.\n\n**Implementation:**\n\nCreate `src/emails/digest-email.tsx`:\n\n```tsx\nimport { Html, Head, Body, Container, Section, Text, Link } from '@react-email/components';\n\ninterface DigestEmailProps {\n  userName: string;\n  dateRange: string;\n  activities: DigestActivity[];\n  stats: {\n    total: number;\n    byType: Record\u003cstring, number\u003e;\n  };\n}\n\nexport function DigestEmail({ userName, activities, stats }: DigestEmailProps) {\n  return (\n    \u003cHtml\u003e\n      \u003cHead /\u003e\n      \u003cBody\u003e\n        \u003cContainer\u003e\n          {/* Header */}\n          \u003cSection\u003e\n            \u003cText\u003eHi {userName}, here's your GitLab activity digest\u003c/Text\u003e\n          \u003c/Section\u003e\n\n          {/* Summary stats */}\n          \u003cSection\u003e\n            \u003cText\u003e{stats.total} items in your areas of interest\u003c/Text\u003e\n          \u003c/Section\u003e\n\n          {/* Activity list by relevance */}\n          \u003cSection\u003e\n            {activities.map(activity =\u003e (\n              \u003cDigestActivityRow key={activity.id} activity={activity} /\u003e\n            ))}\n          \u003c/Section\u003e\n\n          {/* Footer with unsubscribe */}\n          \u003cSection\u003e\n            \u003cLink href={unsubscribeUrl}\u003eUnsubscribe\u003c/Link\u003e\n          \u003c/Section\u003e\n        \u003c/Container\u003e\n      \u003c/Body\u003e\n    \u003c/Html\u003e\n  );\n}\n```\n\n**Acceptance criteria:**\n- [ ] Clean email layout\n- [ ] Shows relevant activities\n- [ ] Links to GitLab Insights\n- [ ] Unsubscribe link\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:04.460154-05:00","updated_at":"2025-12-12T09:05:04.460154-05:00","dependencies":[{"issue_id":"gitlab-insights-e5z","depends_on_id":"gitlab-insights-nmx","type":"blocks","created_at":"2025-12-15T12:13:57.756227-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e9fo","title":"Security: Error objects may contain tokens when logged","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:07:13.718204-05:00","updated_at":"2025-12-15T14:31:49.428228-05:00","closed_at":"2025-12-15T14:31:49.428228-05:00"}
{"id":"gitlab-insights-e9on","title":"8.4.2: Implement stalled work detection","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:15:06.401215-05:00","updated_at":"2025-12-15T12:03:19.6114-05:00","closed_at":"2025-12-15T12:03:19.6114-05:00","dependencies":[{"issue_id":"gitlab-insights-e9on","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.423189-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-e9on","depends_on_id":"gitlab-insights-mas3","type":"blocks","created_at":"2025-12-15T11:16:07.890533-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-edm","title":"Story 9.6: Create File extraction from commit diffs","description":"**Context:** Populate the File table with unique file paths from commit diffs.\n\n**Implementation:**\n\nAdd to `src/server/services/commit-transformer.ts`:\n\n```typescript\n// Ensure file exists in File table, create if not\nasync function ensureFile(\n  db: PrismaClient,\n  userId: string,\n  projectId: string,\n  filePath: string\n): Promise\u003cstring\u003e // Returns fileId\n\n// Parse file path into components\nfunction parseFilePath(path: string): {\n  filename: string;\n  directory: string;\n  extension: string | null;\n}\n\n// Batch create/update files from commit diffs\nasync function ensureFilesFromDiffs(\n  db: PrismaClient,\n  userId: string,\n  projectId: string,\n  diffs: GitLabCommitDiff[]\n): Promise\u003cMap\u003cstring, string\u003e\u003e // path -\u003e fileId\n```\n\n**Implementation notes:**\n- Use upsert to handle existing files\n- Track both old_path and new_path for renames\n- Skip deleted files from future queries but keep history\n\n**Acceptance criteria:**\n- [ ] Creates File records for new paths\n- [ ] Parses directory/extension correctly\n- [ ] Handles renames (both paths stored)\n- [ ] Deduplicates across commits\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:23.10914-05:00","updated_at":"2025-12-15T14:15:42.151865-05:00","closed_at":"2025-12-15T14:15:42.151865-05:00","dependencies":[{"issue_id":"gitlab-insights-edm","depends_on_id":"gitlab-insights-di5","type":"blocks","created_at":"2025-12-15T12:13:14.089737-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-eeng","title":"Clean up deprecated catch-up components","description":"Delete deprecated files after new catch-up UI is stable:\n- src/app/(auth)/catch-up/ - entire directory (orphaned route)\n- src/components/catchup/CatchUpView.tsx - replaced by CatchUpWorkItems\n- src/components/catchup/MarkAsReviewedButton.tsx - no longer needed  \n- src/components/catchup/MarkAllAsReviewedButton.tsx - replaced by new implementation\n\nKeep: src/components/catchup/CatchUpModeToggle.tsx - still used in dashboard header","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-17T09:25:35.64856-05:00","updated_at":"2025-12-17T09:25:35.64856-05:00"}
{"id":"gitlab-insights-ehx7","title":"1.3: Update GitLab API transformer to parse and store relationships","description":"Enhance server/services/gitlab-sync.ts transformer to extract relationships during import: (1) Parent/Child: Link notes to parent issue/MR via noteable_id lookup (2) Closes: Parse 'Closes #123' regex from MR descriptions, populate closesIssueIds + denormalize closedByMRIds (3) Cross-refs: Extract #123 !45 mentions (4) Participants: Aggregate author + commenters + assignees. CRITICAL: Write unit tests for each extraction type. File: server/services/gitlab-sync.ts","status":"closed","priority":0,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T12:21:52.498166-05:00","updated_at":"2025-12-15T14:01:19.688356-05:00","closed_at":"2025-12-15T14:01:19.688356-05:00","dependencies":[{"issue_id":"gitlab-insights-ehx7","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:52.714618-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ehx7","depends_on_id":"gitlab-insights-0ran","type":"blocks","created_at":"2025-12-15T12:21:52.79319-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ej4o","title":"Frontend Core Hooks","description":"Create reusable React hooks for infinite scroll functionality. These hooks encapsulate Intersection Observer logic and TanStack Query infinite query patterns for consistent behavior across all views.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:04.743832-05:00","updated_at":"2025-12-15T12:08:04.743832-05:00"}
{"id":"gitlab-insights-eku9","title":"Bug: Empty migration file 20251215185445 - unclear schema history","description":"","status":"closed","priority":4,"issue_type":"chore","estimated_minutes":10,"created_at":"2025-12-15T14:11:37.549956-05:00","updated_at":"2025-12-16T17:30:07.896094-05:00","closed_at":"2025-12-16T17:30:07.896094-05:00"}
{"id":"gitlab-insights-eqz","title":"Epic 10: Intelligence Platform - Phase 1 MVP","description":"","status":"closed","priority":1,"issue_type":"epic","estimated_minutes":2400,"created_at":"2025-12-15T11:08:44.979683-05:00","updated_at":"2025-12-15T12:02:58.477528-05:00","closed_at":"2025-12-15T12:02:58.477528-05:00","dependencies":[{"issue_id":"gitlab-insights-eqz","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-15T11:19:57.334629-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-eqz","depends_on_id":"gitlab-insights-mo8","type":"blocks","created_at":"2025-12-15T12:01:06.121089-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-esyi","title":"5.4: Optimize for mobile (touch targets, full-screen panel, scroll-to-read)","description":"Mobile (\u003c768px) optimizations. TOUCH TARGETS: Mark Read button min 44px height, 12px dead zone between badge and card body (prevent accidental taps). SIDE PANEL: Full-screen overlay (100vw), slide-up animation from bottom (translateY 100% → 0). SCROLL-INTO-VIEW: Intersection Observer marks cards as read when scrolled into view (50% visible for 2 seconds). Tighter padding (12px vs 16px). Test on iOS Safari and Android Chrome. Files: WorkItemCard.tsx, SidePanelDetail.tsx, useScrollIntoViewRead.ts","status":"open","priority":0,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T12:22:01.590186-05:00","updated_at":"2025-12-15T12:22:01.590186-05:00","dependencies":[{"issue_id":"gitlab-insights-esyi","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:01.754672-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-esyi","depends_on_id":"gitlab-insights-5h1j","type":"blocks","created_at":"2025-12-15T12:22:01.907118-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-esyi","depends_on_id":"gitlab-insights-70iy","type":"blocks","created_at":"2025-12-15T12:22:01.97729-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-eton","title":"4.6: Implement scroll-into-view read marking for mobile","description":"## CANCELLED - Bad UX Pattern\n\n### Why This Was Cancelled\n\n**Violates Core Design Philosophy**: The PRD explicitly states 'user has agency, no surprise auto-marking'. Scroll-into-view marking removes user agency - items get marked read without explicit intent.\n\n**Accidental Marking Problem**: Users scrolling to find a specific item will accidentally mark things as read during the 2-second dwell time. This creates anxiety ('did I miss something?') rather than the calm awareness the app aims for.\n\n**Email Apps Abandoned This**: Gmail, Outlook, and other productivity tools moved away from 'mark as read on scroll' because users consistently reported losing track of unprocessed items.\n\n**Mobile Users Have Explicit Options**:\n1. Tap Mark Read button (quick dismiss)\n2. Tap to expand card (investigation - marks as read)\n3. Tap to open detail panel (deep dive - marks as read)\n\nAll three are explicit user actions. No need for passive scroll-based marking.\n\n### Alternative Considered\nA 'Mark all above as read' button at scroll position was considered but adds UI complexity for marginal benefit.\n\n### Original Description (for reference)\nImplement Intersection Observer-based read marking for mobile devices, where cards are marked as read when scrolled into view (50% visible for 2 seconds).","status":"open","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T13:36:16.441432-05:00","updated_at":"2025-12-15T13:38:48.266519-05:00","dependencies":[{"issue_id":"gitlab-insights-eton","depends_on_id":"gitlab-insights-5h1j","type":"blocks","created_at":"2025-12-15T13:36:48.762346-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-eton","depends_on_id":"gitlab-insights-yha4","type":"blocks","created_at":"2025-12-15T13:36:49.655625-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-etpy","title":"Add Catch-up Mode infinite scroll support","description":"REVERSAL: Add infinite scroll to Catch-up mode for consistency. Use larger page size (100 items) since users are batch-reviewing. Edge case: power user with 10 queries × 150 new items = 1500 total exceeds proposed 1000 limit. Infinite scroll handles this gracefully. Update CatchUpModeClient to use useInfiniteCatchUpItems hook.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:31.513896-05:00","updated_at":"2025-12-15T13:41:31.513896-05:00","dependencies":[{"issue_id":"gitlab-insights-etpy","depends_on_id":"gitlab-insights-dnfs","type":"blocks","created_at":"2025-12-15T13:42:24.094497-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-etpy","depends_on_id":"gitlab-insights-ayt0","type":"blocks","created_at":"2025-12-15T13:42:24.181333-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-f2b","title":"Story 16.3: Create MRContextPanel component","description":"Create a React component that displays all MR context suggestions in a unified panel.\n\n**Context:** This is the main UI component for the MR Context View. It should display suggested reviewers, collision alerts, similar MRs, and related decisions in an organized, scannable layout.\n\n**Implementation:**\n- Create new React component MRContextPanel\n- Consume getMRContext tRPC endpoint\n- Design clear sections for different suggestion types\n- Handle loading and error states\n\n**Acceptance criteria:**\n- Component displays all context sections (reviewers, collisions, similar MRs, decisions)\n- Clear visual hierarchy and scannable layout\n- Proper loading and error handling\n- Responsive design\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:48.850796-05:00","updated_at":"2025-12-12T09:04:48.850796-05:00","dependencies":[{"issue_id":"gitlab-insights-f2b","depends_on_id":"gitlab-insights-0yt","type":"blocks","created_at":"2025-12-15T12:13:59.915572-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-f5te","title":"Bug: GitLab author interface missing name field - display name not captured","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":15,"created_at":"2025-12-15T14:11:18.062524-05:00","updated_at":"2025-12-15T14:29:07.374277-05:00","closed_at":"2025-12-15T14:29:07.374277-05:00"}
{"id":"gitlab-insights-f87","title":"Story 13.7: Add timeline visualization","description":"**Context:** Show when discussion happened over time.\n\n**Implementation:**\n\nCreate `src/components/decisions/ThreadTimeline.tsx`:\n\n```tsx\ninterface ThreadTimelineProps {\n  thread: DiscussionThread;\n}\n\nexport function ThreadTimeline({ thread }: ThreadTimelineProps) {\n  // Horizontal timeline\n  // Dots for each comment\n  // Hover for details\n  // Shows activity intensity\n}\n```\n\n**Visualization:**\n- Timeline axis from first to last comment\n- Dots/markers for each comment\n- Density shows activity bursts\n- Click to jump to comment\n\n**Acceptance criteria:**\n- [ ] Shows timeline of activity\n- [ ] Interactive (click to jump)\n- [ ] Shows relative timing\n- [ ] Handles long discussions\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:55.453163-05:00","updated_at":"2025-12-12T09:04:55.453163-05:00","dependencies":[{"issue_id":"gitlab-insights-f87","depends_on_id":"gitlab-insights-sq5","type":"blocks","created_at":"2025-12-15T12:13:46.015283-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-faz3","title":"Add tabs for Issues/MRs","description":"## Problem\nBoth Issues and MRs render in the same scrollable view with section headers. Users don't realize MRs are available.\n\n## Acceptance Criteria\n- AC 5.1: Replace scrollable sections with tabs for Issues and Merge Requests\n- AC 5.2: Tabs show unread counts: 'Issues (5)' and 'Merge Requests (3)'\n- AC 5.3: Switching tabs resets scroll position to top\n- AC 5.4: Default tab is Issues\n- AC 5.5: Tab selection persists in URL state (`?tab=issues` or `?tab=merge-requests`)\n- AC 5.6: Empty tabs show with (0) count - always show both tabs\n\n## Implementation Notes\n- **Component**: Use HeroUI Tabs component for consistency with rest of UI\n- **URL state**: Use Next.js `useSearchParams` and `useRouter` to read/write tab param\n- **Tab keys**: `issues` and `merge-requests` (URL-friendly)\n- **Section headers**: Remove the collapsible section headers (WorkItemSection) inside tabs - tabs replace that hierarchy\n- **Scroll reset**: Call `window.scrollTo(0, 0)` or container ref scroll on tab change\n- **Unread counts**: Already available in `workItemsData.items` - filter by type to get per-tab counts\n\n## Testing Requirements\n\n### Manual Testing (dev-browser)\nRun the dev server and use dev-browser to verify:\n1. Navigate to catch-up view\n2. **Test tabs are visible**:\n   - VERIFY: Two tabs visible: 'Issues' and 'Merge Requests'\n   - VERIFY: Each tab shows count in parentheses (e.g., 'Issues (5)')\n   - VERIFY: Unread count badge visible if any unread (e.g., 'Issues (5) [3 new]')\n3. **Test default tab**:\n   - VERIFY: Issues tab is selected by default\n   - VERIFY: URL does NOT have ?tab param (default doesn't need param)\n4. **Test tab switching**:\n   - Click 'Merge Requests' tab\n   - VERIFY: MR content is shown\n   - VERIFY: URL updates to ?tab=merge-requests\n   - VERIFY: Scroll position resets to top\n5. **Test URL state persistence**:\n   - With ?tab=merge-requests in URL, refresh page\n   - VERIFY: Merge Requests tab is still selected\n6. **Test direct URL navigation**:\n   - Navigate directly to /catch-up?tab=merge-requests\n   - VERIFY: Merge Requests tab is selected\n7. **Test empty tab**:\n   - If one type has 0 items, verify tab still shows with '(0)'\n   - Click the empty tab\n   - VERIFY: Shows appropriate empty state message\n8. **Test unread counts update**:\n   - Mark an issue as read\n   - VERIFY: Issues tab count decrements\n   - Mark all issues as read\n   - VERIFY: Issues tab shows 'Issues (X)' with no unread indicator\n9. **Test keyboard navigation**:\n   - Tab focus to tabs\n   - Use arrow keys to switch tabs\n   - VERIFY: Tab selection changes\n\n### URL State Tests (dev-browser)\n1. Start at /catch-up (no param) -\u003e Issues selected\n2. Click MRs -\u003e URL becomes /catch-up?tab=merge-requests\n3. Click Issues -\u003e URL becomes /catch-up?tab=issues OR /catch-up (no param for default)\n4. Manually enter /catch-up?tab=invalid -\u003e Falls back to Issues\n\n### Unit Tests (src/components/work-items/__tests__/WorkItemList.test.tsx)\n- Tabs render with correct counts\n- Tab click calls URL update function\n- Content switches when tab changes\n- Empty tab renders with (0) count\n- Default selection is Issues when no URL param\n\n### Integration Tests\n- URL param updates trigger tab change\n- Tab change triggers scroll reset\n- Mark as read updates correct tab's count\n\n### Accessibility Tests\n- Tabs have proper ARIA roles (tablist, tab, tabpanel)\n- Arrow key navigation works\n- Focus management is correct\n\n## Files\n- src/components/work-items/WorkItemList.tsx (main change - add Tabs, remove WorkItemSection)\n- src/components/dashboard/CatchUpWorkItems.tsx (may need to pass URL state handlers)\n- src/components/work-items/__tests__/WorkItemList.test.tsx (new or update)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-17T09:54:38.518487-05:00","updated_at":"2025-12-17T12:25:44.774971-05:00","dependencies":[{"issue_id":"gitlab-insights-faz3","depends_on_id":"gitlab-insights-hu57","type":"blocks","created_at":"2025-12-17T11:10:55.100217-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-faz3","depends_on_id":"gitlab-insights-j277","type":"blocks","created_at":"2025-12-17T11:10:55.415555-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fjp","title":"Story 10.7: Create ExpertView page","description":"Context: Dedicated page for expert discovery.\n\nImplementation:\n\nCreate src/app/(auth)/experts/page.tsx:\n- Async function requiring auth\n- Returns ExpertViewClient component\n\nCreate src/components/expertise/ExpertViewClient.tsx:\n- Search input (file path, directory, or keyword)\n- Search type selector (file | directory | keyword)\n- Results list (ExpertResultCards)\n- Empty state with example queries\n\nSearch modes:\n- File path: 'src/auth/login.ts'\n- Directory: 'src/auth/' (auto-adds trailing slash)\n- Keyword: 'authentication' (searches event content)\n\nAcceptance criteria:\n- Page renders at /experts\n- Search input with type selector\n- Shows results with scores\n- Empty state guides usage\n- Sidebar link added\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:45.711718-05:00","updated_at":"2025-12-12T09:05:45.711718-05:00","dependencies":[{"issue_id":"gitlab-insights-fjp","depends_on_id":"gitlab-insights-wk1","type":"blocks","created_at":"2025-12-15T12:13:17.006934-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fkn7","title":"PHASE 4: Read Tracking - Zero-friction read state management","description":"Phase 4 implements ReadEvent model and three-way read marking system. Users mark items read via: 1) Mark Read button (quick dismiss), 2) Expand in-place (scan activity), 3) Open side panel (deep dive). Includes state machine for unread-to-read-to-unread transitions, unread count indicator, optimistic updates for instant feedback, and mobile scroll-into-view marking. Philosophy: user has agency, no surprise auto-marking on desktop, predictable behavior.","status":"open","priority":0,"issue_type":"task","estimated_minutes":240,"created_at":"2025-12-15T13:25:42.609911-05:00","updated_at":"2025-12-15T13:25:42.609911-05:00","dependencies":[{"issue_id":"gitlab-insights-fkn7","depends_on_id":"gitlab-insights-lhyu","type":"parent-child","created_at":"2025-12-15T13:25:52.312334-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-fkn7","depends_on_id":"gitlab-insights-2ql9","type":"blocks","created_at":"2025-12-15T13:25:54.381189-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fno","title":"Story 15.9: Add \"alert me about this\" from search","description":"**Context:** Search results offer option to add topic to digest.\n\n**Implementation:**\n\nAdd to search results:\n\n```tsx\n\u003cSearchResultCard\u003e\n  {/* ... existing content */}\n  \u003cDropdownMenu\u003e\n    \u003cDropdownItem onClick={() =\u003e addToDigest(searchTerm)}\u003e\n      Add \"{searchTerm}\" to daily digest\n    \u003c/DropdownItem\u003e\n  \u003c/DropdownMenu\u003e\n\u003c/SearchResultCard\u003e\n```\n\nAdd topic to DigestPreference.topics array.\n\n**Acceptance criteria:**\n- [ ] Option available on search results\n- [ ] Adds topic to digest prefs\n- [ ] Shows confirmation toast\n- [ ] Visible in digest settings\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:17.856192-05:00","updated_at":"2025-12-12T09:06:17.856192-05:00","dependencies":[{"issue_id":"gitlab-insights-fno","depends_on_id":"gitlab-insights-a7f","type":"blocks","created_at":"2025-12-15T12:13:58.156575-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fr0p","title":"Bug: Empty string cursor not handled in people.ts pagination","description":"","status":"closed","priority":4,"issue_type":"bug","estimated_minutes":10,"created_at":"2025-12-15T14:11:15.9637-05:00","updated_at":"2025-12-16T17:31:57.58635-05:00","closed_at":"2025-12-16T17:31:57.58635-05:00"}
{"id":"gitlab-insights-fww","title":"3.1 Create WorkItemCard component","description":"Create collapsible card component for issues/MRs.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/WorkItemCard.tsx\n\nProps:\n- workItem: WorkItemSummary\n- isSelected: boolean\n- isExpanded: boolean\n- onToggleExpand: () =\u003e void\n- onSelect: () =\u003e void\n- onActivityItemClick: (activityId: string) =\u003e void\n\n## Card Layout\n\nCollapsed (default):\n+--------------------------------------------------+\n| [Badge] #123 Title here...            [NEW] [v] |\n| Open - Alice - 2 days ago                        |\n| 3 new comments - [avatars] 5 participants        |\n| Latest: \"Bob commented: I think the...\"          |\n| Related: MR !456 (merged) - Labels: bug, auth    |\n+--------------------------------------------------+\n\nExpanded:\n+--------------------------------------------------+\n| [Badge] #123 Title here...            [NEW] [^] |\n| Open - Alice - 2 days ago                        |\n|--------------------------------------------------|\n| Activity Log:                                    |\n| - Bob commented: \"I think the root cause...\"     |\n| - Alice changed status: Open -\u003e In Progress      |\n| - Dave commented: \"I can reproduce this...\"      |\n| [scrollable, max-height ~1000px]                 |\n+--------------------------------------------------+\n\n## Styling (from UX spec)\n- Card background: bg-gray-50 (light) / bg-gray-800 (dark)\n- Border: border-gray-200 (light) / border-gray-600 (dark)\n- NEW badge: olive accent color\n- Selected state: ring/outline\n- Query match: olive left border\n\n## Interactions\n- Header click: toggle expand\n- Activity item click: call onActivityItemClick\n- Related item click: emit event to scroll to that card\n\n## File\nsrc/app/(authenticated)/dashboard/_components/WorkItemCard.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-6, AC-7\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-fww: Create WorkItemCard component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-fww\n- Update plan: AC-6, AC-7 -\u003e \"ui-ready\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:38.463687-05:00","updated_at":"2025-12-11T15:09:21.304084-05:00","dependencies":[{"issue_id":"gitlab-insights-fww","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:40.143605-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fx13","title":"PHASE 1: Data Model \u0026 Re-fetch - Capture relationships at ingest time","description":"## Purpose\nThis phase updates the data model to capture work item relationships during GitLab API sync, enabling the grouped view to display parent/child links, 'closes' patterns, and cross-references without runtime computation.\n\n## Background \u0026 Rationale\nCurrently, the Event model stores GitLab data as flat chronological entries. Comments are stored as independent events with no link to their parent issue/MR. This works for a timeline view but prevents answering questions like 'show me all comments on Issue #123' or 'which MR closed this issue?'\n\nCapturing relationships at ingest time (vs computing on display) provides:\n- **Performance**: Queries use indexed relationships, not runtime pattern matching\n- **Accuracy**: Parse GitLab API responses once during sync, not repeatedly on display\n- **Simplicity**: UI components query pre-structured data, no complex aggregation logic\n\n## What Gets Captured\n- **Parent/Child Links**: Comments → parent issue/MR (from GitLab API 'noteable' field)\n- **Closes Relationships**: MRs → issues they close (parse MR description for 'closes #123' patterns)\n- **Cross-References**: Issues/MRs mentioning other work items (parse body for #123 patterns)\n- **Participants**: Array of usernames who commented/updated the work item\n- **Activity Metadata**: Last activity timestamp, comment count, unresolved comment count\n\n## Migration Strategy: Clean Slate\nWe're doing a clean slate migration (wipe Event data, refetch from GitLab) because:\n- **Safer than backfill**: Parsing existing data risks inconsistencies if transformer logic changed\n- **Guaranteed accuracy**: Fresh sync ensures 100% match with GitLab API\n- **Simpler implementation**: No complex migration logic, just new schema + refetch\n- **Acceptable downtime**: This is an internal tool, brief downtime during migration is fine\n\n## Schema Changes Required\nSee Prisma schema updates in subtasks. Key additions:\n- parentEventId (self-referential foreign key)\n- closesIssueIds (array of issue IDs this MR closes)\n- mentionsWorkItemIds (array of work item IDs mentioned in body)\n- participants (array of usernames)\n- lastActivityAt (timestamp for sorting)\n- commentCount, unresolvedCommentCount (for activity summaries)\n\n## Dependencies\n- None - this is the foundation phase\n\n## Deliverables\n1. Updated Prisma schema with relationship fields\n2. Migration script that wipes Event data\n3. Enhanced transformer capturing relationships during sync\n4. Re-sync script that fetches all GitLab data with new transformer\n5. Validation that 100% of relationships match GitLab API responses\n\n## Testing Strategy\n- Unit tests for transformer parsing logic (closes patterns, cross-references)\n- Integration test comparing captured relationships to GitLab API responses\n- Manual verification of sample issues/MRs to confirm accuracy","status":"closed","priority":0,"issue_type":"task","estimated_minutes":480,"created_at":"2025-12-15T13:24:20.311524-05:00","updated_at":"2025-12-16T11:52:41.444531-05:00","closed_at":"2025-12-16T11:52:41.444531-05:00","dependencies":[{"issue_id":"gitlab-insights-fx13","depends_on_id":"gitlab-insights-lhyu","type":"parent-child","created_at":"2025-12-15T13:25:50.46506-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-g776","title":"Chore: MonitoredProject missing updatedAt field for audit trail","description":"","status":"closed","priority":4,"issue_type":"chore","estimated_minutes":10,"created_at":"2025-12-15T14:11:41.463691-05:00","updated_at":"2025-12-16T17:29:59.495614-05:00","closed_at":"2025-12-16T17:29:59.495614-05:00"}
{"id":"gitlab-insights-gcv","title":"1.3 Add dashboardView preference to User model","description":"Add user preference field for switching between grouped and flat views.\n\n## Implementation\nAdd to User model in prisma/schema.prisma:\n\ndashboardView   String   @default(\"grouped\")  // \"grouped\" | \"flat\"\n\n## File\nprisma/schema.prisma\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-gcv: Add dashboardView preference to User model\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-gcv","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:23:57.67338-05:00","updated_at":"2025-12-12T08:34:37.987031-05:00","closed_at":"2025-12-12T08:34:37.987031-05:00"}
{"id":"gitlab-insights-ggqk","title":"[EPIC] Infinite Scroll Implementation","description":"","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-15T12:07:42.089986-05:00","updated_at":"2025-12-15T12:07:42.089986-05:00","dependencies":[{"issue_id":"gitlab-insights-ggqk","depends_on_id":"gitlab-insights-uj2a","type":"blocks","created_at":"2025-12-15T12:09:41.953856-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-gj9","title":"2.3 Create markAsRead endpoint","description":"Create tRPC mutation to mark events as read.\n\n## Implementation\nAdd to src/server/api/routers/events.ts:\n\nmarkAsRead: protectedProcedure\n  .input(z.object({ eventId: z.string() }))\n  .mutation(async ({ ctx, input }) =\u003e {\n    await ctx.db.readEvent.upsert({\n      where: {\n        userId_eventId: {\n          userId: ctx.session.user.id,\n          eventId: input.eventId\n        }\n      },\n      create: {\n        userId: ctx.session.user.id,\n        eventId: input.eventId\n      },\n      update: {\n        readAt: new Date()\n      }\n    });\n  })\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-9\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-gj9: Create markAsRead endpoint\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-gj9\n- Update plan: AC-9 -\u003e \"implemented\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.521544-05:00","updated_at":"2025-12-11T15:08:38.49905-05:00","dependencies":[{"issue_id":"gitlab-insights-gj9","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:28.823924-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-gmt2","title":"Query Detail Infinite Scroll Integration","description":"Integrate infinite scroll into Saved Query detail view. Updates query detail components to support cursor pagination for query results.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:05.982749-05:00","updated_at":"2025-12-15T12:08:05.982749-05:00","dependencies":[{"issue_id":"gitlab-insights-gmt2","depends_on_id":"gitlab-insights-ej4o","type":"blocks","created_at":"2025-12-15T12:09:38.621286-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-gr0w","title":"4.1: Create tRPC mutations for marking work items as read","description":"Create tRPC mutations for three-way read marking. markWorkItemRead(workItemId): Creates/updates ReadEvent record with current timestamp. markMultipleAsRead(workItemIds[]): Batch operation for section 'Mark all as read'. clearReadStatus(workItemId): Delete ReadEvent (for testing/undo). STATE MACHINE: No existing ReadEvent + markAsRead = create record. Existing ReadEvent + new activity (check max childEvent.createdAt \u003e readAt) = isUnread true. File: src/server/api/routers/work-items.ts","status":"closed","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:21:58.057236-05:00","updated_at":"2025-12-15T14:09:55.29485-05:00","closed_at":"2025-12-15T14:09:55.29485-05:00","dependencies":[{"issue_id":"gitlab-insights-gr0w","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:58.260012-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-gr0w","depends_on_id":"gitlab-insights-i3u9","type":"blocks","created_at":"2025-12-15T12:21:58.343255-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-gtw5","title":"Implement robust scroll restoration with item index","description":"IMPROVEMENT: Store both item index AND pixel offset (not just pixels). On restore, if cache expired and position unreachable, trigger fetchNextPage calls until target index is loaded, THEN restore scroll position. Handles edge case: user at item 150 (5000px) returns after cache expires (only 50 items = 2000px available). Current pixel-only approach fails.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:31.782197-05:00","updated_at":"2025-12-15T13:41:31.782197-05:00","dependencies":[{"issue_id":"gitlab-insights-gtw5","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T13:42:24.41903-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-h3pe","title":"Bug: Unsafe type assertions in work-items.ts without runtime validation","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:07:00.301013-05:00","updated_at":"2025-12-16T16:06:00.372041-05:00","closed_at":"2025-12-16T16:06:00.372041-05:00"}
{"id":"gitlab-insights-h9cj","title":"Bug: Array columns (labels, assignees) lack validation for duplicates/empty strings","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:11:40.124585-05:00","updated_at":"2025-12-15T14:11:40.124585-05:00"}
{"id":"gitlab-insights-hh8z","title":"Show new activity context in collapsed cards","description":"## Problem\nCollapsed cards don't show what's new (new comments, activity). This is the entire point of the collapsed view.\n\n## Acceptance Criteria (from PRD wireframe)\n- AC 6.1: Collapsed card shows type badge (Issue/MR), number, and title\n- AC 6.2: Collapsed card shows status (open/closed/merged), author, and relative timestamp\n- AC 6.3: Collapsed card shows activity summary: 'X new comments' with count\n- AC 6.4: Collapsed card shows participant avatars (max 5, then '+N more')\n- AC 6.5: Collapsed card shows latest activity preview using CSS text-overflow ellipsis\n- AC 6.6: Collapsed card shows related items: 'Closes: #X, #Y' for MRs, or 'Closed by: MR \\!X' for issues\n- AC 6.7: Collapsed card shows labels (max 3, then '+N more')\n\n## PRD Reference Wireframe\n```\n+--------------------------------------------------+\n| Issue #123 Fix login timeout bug            [v]  |\n| Open - Alice - 2 days ago                        |\n| ------------------------------------------------ |\n| 3 new comments - 5 participants                  |\n| Latest: Bob - 'I think I found the root cause'  |\n|                                                  |\n| Related: MR \\!456 (merged) - bug, auth            |\n+--------------------------------------------------+\n```\n\n## Implementation Notes\n- **Data availability**: WorkItem type already has all needed fields:\n  - `item.author` for author name (currently showing repo instead)\n  - `item.activitySummary.latestActivity.preview` for quote content\n  - `item.closesIssueIds` and `item.closedByMRIds` for related items\n- **Related items display**: Need to resolve IDs to display numbers. Either:\n  1. Fetch related item details (expensive)\n  2. Store the numbers directly in closesIssueIds/closedByMRIds (requires schema change)\n  3. Extract number from gitlabEventId pattern if available\n- **Truncation**: Use CSS `truncate` class (text-overflow: ellipsis) for preview text - let available space determine truncation\n- **Avatar count**: Show max 5 avatars (current behavior), not 3 as wireframe shows\n- **Layout changes needed**:\n  1. Add author to metadata row: 'Open - Alice - 2 days ago'\n  2. Add preview content to activity summary (currently only shows 'Latest by {author}')\n  3. Add related items section\n\n## Testing Requirements\n\n### Manual Testing (dev-browser)\nRun the dev server and use dev-browser to verify each collapsed card element:\n\n1. **Test header row (AC 6.1)**:\n   - VERIFY: Type badge shows 'I' for Issue or 'MR' for Merge Request\n   - VERIFY: Issue/MR number shown (e.g., '#123' or '\\!456')\n   - VERIFY: Title is displayed and truncates with ellipsis if too long\n   - VERIFY: Expand icon (chevron) is visible on right side\n\n2. **Test metadata row (AC 6.2)**:\n   - VERIFY: Status shown (Open/Closed/Merged) with appropriate color\n   - VERIFY: Author name shown (e.g., 'Alice')\n   - VERIFY: Relative timestamp shown (e.g., '2 days ago')\n   - VERIFY: Format is 'Status - Author - Timestamp'\n\n3. **Test activity summary (AC 6.3)**:\n   - Find card with comments\n   - VERIFY: Shows 'X new comments' with correct count\n   - Find card with 0 new comments\n   - VERIFY: Shows '0 new comments' or hides the count\n\n4. **Test participants (AC 6.4)**:\n   - Find card with multiple participants\n   - VERIFY: Shows up to 5 avatar images\n   - Find card with \u003e5 participants\n   - VERIFY: Shows 5 avatars + '+N more' text\n\n5. **Test latest activity preview (AC 6.5)**:\n   - Find card with recent comment\n   - VERIFY: Shows 'Author: \"Preview text...\"' format\n   - VERIFY: Long previews truncate with ellipsis (CSS)\n   - Find card with no comments\n   - VERIFY: Latest activity section hidden or shows appropriate fallback\n\n6. **Test related items (AC 6.6)**:\n   - Find an MR that closes issues\n   - VERIFY: Shows 'Closes: #X, #Y' with clickable issue numbers\n   - Find an Issue closed by MR\n   - VERIFY: Shows 'Closed by: MR \\!X' with clickable MR number\n   - Find item with no relations\n   - VERIFY: Related items section hidden\n\n7. **Test labels (AC 6.7)**:\n   - Find card with labels\n   - VERIFY: Shows up to 3 label chips\n   - Find card with \u003e3 labels\n   - VERIFY: Shows 3 labels + '+N more' chip\n   - Find card with no labels\n   - VERIFY: Labels section hidden\n\n### Visual Verification (dev-browser screenshot)\n- Screenshot an Issue card with all elements populated\n- Screenshot an MR card with all elements populated\n- Screenshot card with minimal data (no comments, no labels, no relations)\n- VERIFY: All layouts look correct and match wireframe hierarchy\n\n### Unit Tests (src/components/work-items/__tests__/WorkItemCard.test.tsx)\n- Renders type badge with correct text (I/MR)\n- Renders author in metadata row (not repo name)\n- Renders latestActivity.preview content\n- Truncates preview with CSS class\n- Renders max 5 participant avatars\n- Renders '+N more' for \u003e5 participants\n- Renders related items for MRs with closesIssueIds\n- Renders 'Closed by' for issues with closedByMRIds\n- Renders max 3 labels\n- Renders '+N more' for \u003e3 labels\n- Hides sections when data is empty\n\n### Snapshot Tests\n- Snapshot of card with full data\n- Snapshot of card with minimal data\n- Snapshot of Issue vs MR card differences\n\n## Files\n- src/components/work-items/WorkItemCard.tsx\n- src/components/work-items/__tests__/WorkItemCard.test.tsx (new or update)","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-17T09:54:38.877723-05:00","updated_at":"2025-12-17T12:26:16.285151-05:00","dependencies":[{"issue_id":"gitlab-insights-hh8z","depends_on_id":"gitlab-insights-hu57","type":"blocks","created_at":"2025-12-17T11:10:54.75881-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-hn5c","title":"Update DashboardClient to use infinite queries","description":"Update DashboardClient to use infinite queries. CONSISTENCY FIX: Use instant scroll (behavior: 'auto') on filter change (not smooth) since it's a new context. Match keyword change behavior for consistency.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:03.953698-05:00","updated_at":"2025-12-15T13:41:35.774515-05:00","dependencies":[{"issue_id":"gitlab-insights-hn5c","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T12:09:39.225921-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-hu57","title":"Fix card expansion behavior","description":"## Problem\nClicking anywhere on the card opens the side panel. There's no in-place expansion.\n\n## Acceptance Criteria\n- AC 1.1: Clicking the expand/accordion icon toggles in-place expansion (does NOT open side panel)\n- AC 1.2: When expanded, card shows only NEW activity (activity since last read)\n- AC 1.3: Clicking the card body (anywhere except expand icon) opens the side panel, whether expanded or collapsed\n- AC 1.4: Expanding a card marks it as read\n\n## Implementation Notes\n- **Filtering new activity**: Use `activity.isUnread === true` - this flag is already computed server-side by comparing `activity.createdAt \u003e lastReadAt`\n- **Empty state**: If no new activities when expanded, show message: 'No new activity since you last viewed this item'\n- **Data loading**: `activities` array may not be loaded in collapsed state. If `item.activities` is undefined/empty when expanding, either lazy-load via `getWithActivity` endpoint or show loading state\n- **Animation**: Use CSS grid-based animation (already in WorkItemCard.module.css) for smooth expand/collapse\n\n## Testing Requirements\n\n### Manual Testing (dev-browser)\nRun the dev server and use dev-browser to verify:\n1. Navigate to the catch-up view with work items\n2. **Test expand icon click**:\n   - Click the expand icon (chevron) on an unread card\n   - VERIFY: Card expands in-place showing activity\n   - VERIFY: Side panel does NOT open\n   - VERIFY: Card is now marked as read (no green border, no NEW badge)\n3. **Test card body click**:\n   - Click anywhere on the card body (not the expand icon)\n   - VERIFY: Side panel opens\n   - VERIFY: Card expansion state unchanged\n4. **Test expanded card body click**:\n   - With card expanded, click the card body\n   - VERIFY: Side panel opens (card stays expanded)\n5. **Test activity filtering**:\n   - Find an item with mixed read/unread activities\n   - Expand it\n   - VERIFY: Only activities with isUnread=true are shown\n6. **Test empty state**:\n   - Find an item where all activities are read\n   - Expand it\n   - VERIFY: Shows 'No new activity since you last viewed this item'\n7. **Test collapse**:\n   - Click expand icon again on expanded card\n   - VERIFY: Card collapses smoothly\n\n### Unit Tests (src/components/work-items/__tests__/WorkItemCard.test.tsx)\n- `handleToggleExpand` stops propagation and toggles `isExpanded`\n- `handleClick` opens side panel (calls `onSelect`)\n- Expand icon click does NOT call `onSelect`\n- Card body click does NOT toggle `isExpanded`\n- Expanding unread item calls `onMarkAsRead`\n- Activity list filters to only `isUnread === true` items\n- Empty activities array shows empty state message\n\n### Integration Tests\n- Expanding card triggers `markAsRead` mutation\n- Side panel receives correct work item data on card click\n\n## Files\n- src/components/work-items/WorkItemCard.tsx\n- src/components/work-items/__tests__/WorkItemCard.test.tsx (new or update)","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-17T09:54:37.061321-05:00","updated_at":"2025-12-17T12:24:22.3642-05:00"}
{"id":"gitlab-insights-hxmx","title":"Epic: Work Item Grouping - Transform flat feed into hierarchical work-item-centric view","description":"","status":"open","priority":0,"issue_type":"epic","estimated_minutes":0,"created_at":"2025-12-15T12:15:59.194414-05:00","updated_at":"2025-12-15T12:15:59.194414-05:00"}
{"id":"gitlab-insights-i03h","title":"Error Handling \u0026 Recovery","description":"Implement graceful error handling for pagination failures. Includes toast notifications, automatic retry on scroll, and manual retry actions.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:08.353134-05:00","updated_at":"2025-12-15T12:08:08.353134-05:00","dependencies":[{"issue_id":"gitlab-insights-i03h","depends_on_id":"gitlab-insights-mdhx","type":"blocks","created_at":"2025-12-15T12:09:41.07741-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-i2wq","title":"Bug: Regex extraction returns 0 for invalid gitlabEventId instead of null","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":15,"created_at":"2025-12-15T14:10:32.041465-05:00","updated_at":"2025-12-15T14:10:32.041465-05:00"}
{"id":"gitlab-insights-i3u9","title":"2.2: Create tRPC endpoint getWorkItemsGrouped","description":"Create tRPC endpoint returning work items (top-level issues/MRs) with activity summaries and unread counts. Query WHERE parentEventId IS NULL (no comments), include childEvents + readBy, compute activity summary (newCount = events after lastReadAt, participants, latestActivity), sort unread first then by updatedAt. Support filters: status (default open), type, repository, search, showReadItems. Cursor pagination. TARGET: \u003c750ms for 20 items. File: src/server/api/routers/work-items.ts","status":"closed","priority":0,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T12:21:54.043516-05:00","updated_at":"2025-12-15T13:58:16.909286-05:00","closed_at":"2025-12-15T13:58:16.909286-05:00","dependencies":[{"issue_id":"gitlab-insights-i3u9","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:54.195843-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-i3u9","depends_on_id":"gitlab-insights-brab","type":"blocks","created_at":"2025-12-15T12:21:54.275938-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-igun","title":"Backend Cursor Infrastructure","description":"Implement cursor-based pagination in backend routers and utilities. This provides the foundation for infinite scroll by replacing offset/limit pagination with cursor-based pagination using createdAt + ID for deterministic ordering.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:04.212921-05:00","updated_at":"2025-12-15T12:08:04.212921-05:00"}
{"id":"gitlab-insights-ilxi","title":"Bug: Memory issue with large arrays in extractPeopleFromGitLabResponses - no streaming","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":45,"created_at":"2025-12-15T14:10:58.016542-05:00","updated_at":"2025-12-15T14:10:58.016542-05:00"}
{"id":"gitlab-insights-ipd","title":"4.3 Dashboard shows open items only","description":"Filter main dashboard to show only open items.\n\n## Implementation\nIn DashboardClient.tsx:\n\nPass status: \"open\" to getWorkItemsGrouped query by default.\nThis excludes status = \"closed\" and status = \"merged\".\n\nClosed/merged items are accessible via search (see 4.4).\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-6\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-ipd: Dashboard shows open items only\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-ipd\n- Update plan: AC-6 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:01.274962-05:00","updated_at":"2025-12-11T15:10:21.954231-05:00","dependencies":[{"issue_id":"gitlab-insights-ipd","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:49.130337-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-iw2","title":"BUG: postgres-fts.ts uses plainto_tsquery which ignores AND operators, breaking multi-keyword search","description":"## Root Cause\nIn src/lib/search/postgres-fts.ts, the buildTsQueryString() function (line 77-89) builds a query string with '\u0026' operators to implement AND logic for multi-keyword searches:\n```typescript\nreturn sanitized.join(\" \u0026 \");\n```\n\nHowever, this query string is then passed to PostgreSQL's plainto_tsquery() function (lines 137, 142, 148, 154, 206) which IGNORES operators and treats the entire input as plain text.\n\nThe comment on line 113 even says 'use to_tsquery with \u0026 for AND logic' but the actual implementation uses plainto_tsquery.\n\n## Impact\nMulti-keyword searches like 'authentication login' do NOT use AND logic. Instead of finding items containing BOTH words, it searches for the literal string 'authentication \u0026 login'.\n\n## Suggested Fix\nOption 1: Use to_tsquery() with properly sanitized input\nOption 2: Build separate plainto_tsquery() calls for each keyword and AND them together in SQL using the \u0026\u0026 operator:\n```sql\nplainto_tsquery('keyword1') \u0026\u0026 plainto_tsquery('keyword2')\n```\n\n## Files Affected\n- src/lib/search/postgres-fts.ts","status":"closed","priority":1,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T09:38:41.840202-05:00","updated_at":"2025-12-15T09:52:37.460748-05:00","closed_at":"2025-12-15T09:52:37.460748-05:00"}
{"id":"gitlab-insights-ix5t","title":"Chore: Missing exports in components/people/index.ts (PeopleClient, PersonDetail)","description":"","status":"closed","priority":4,"issue_type":"chore","estimated_minutes":5,"created_at":"2025-12-15T14:10:58.568699-05:00","updated_at":"2025-12-16T17:31:10.03284-05:00","closed_at":"2025-12-16T17:31:10.03284-05:00"}
{"id":"gitlab-insights-j277","title":"Read items should persist until navigation","description":"## Problem\nWhen a card is marked as read, it immediately vanishes from the list.\n\n## Acceptance Criteria\n- AC 2.1: Marking a card as read does NOT remove it from the list\n- AC 2.2: Read cards appear with opacity-70 (0.7)\n- AC 2.3: Read cards have no green left border\n- AC 2.4: Read cards have no NEW badge\n- AC 2.5: Read items are only removed when user navigates away and returns to catch-up view\n\n## Implementation Notes\n- **Root cause to investigate**: Items should NOT disappear - the query filters by `status: ['open']`, not by read state. Likely culprits:\n  1. `onSettled` in useMarkAsRead calls `invalidate()` which refetches - check if server returns different data\n  2. Optimistic update in `updateWorkItemInCache` may be incorrect\n  3. React Query cache behavior during invalidation\n- **Fix approach**: Don't track read items separately. Fix the query/cache so read items stay in the list naturally.\n- **Opacity**: Use Tailwind `opacity-70` class for read cards (currently using `opacity-80`)\n- **'Navigate away' definition**: Route change (URL path change). Page refresh or tab close = new session = show fresh unread-only data\n\n## Testing Requirements\n\n### Manual Testing (dev-browser)\nRun the dev server and use dev-browser to verify:\n1. Navigate to catch-up view with multiple unread items\n2. **Test item persistence after mark as read**:\n   - Note the number of items in the list\n   - Click the 'Mark Read' button on a card's NEW badge\n   - VERIFY: Card stays in the list (count unchanged)\n   - VERIFY: Card now has opacity-70 (visually dimmer)\n   - VERIFY: Card has no green left border\n   - VERIFY: Card has no NEW badge\n3. **Test expand marks as read**:\n   - Expand an unread card\n   - VERIFY: Card stays in list with read styling\n4. **Test side panel marks as read**:\n   - Click an unread card body to open side panel\n   - VERIFY: Card stays in list with read styling\n5. **Test Mark All as Read**:\n   - Click 'Mark All as Read' button\n   - VERIFY: All cards stay in list with read styling\n   - VERIFY: Unread count shows 0\n6. **Test navigation removes read items**:\n   - Mark some items as read\n   - Navigate to a different page (e.g., People, Search)\n   - Navigate back to catch-up view\n   - VERIFY: Previously read items are no longer in the list\n7. **Test page refresh**:\n   - Mark some items as read\n   - Refresh the page (F5)\n   - VERIFY: Read items are gone (fresh session)\n\n### Unit Tests (src/hooks/__tests__/useMarkAsRead.test.ts)\n- Optimistic update sets `isUnread: false` without removing item from cache\n- Cache invalidation does not filter out read items\n- Multiple items can be marked as read without disappearing\n\n### Unit Tests (src/components/work-items/__tests__/WorkItemCard.test.tsx)\n- Read items render with `opacity-70` class\n- Read items render without green border class\n- Read items render without NEW badge\n\n### Integration Tests\n- Mark as read mutation preserves item in list\n- Query refetch after mutation includes read items\n- Read items persist across re-renders within same session\n\n## Files\n- src/components/work-items/WorkItemCard.tsx (opacity styling)\n- src/hooks/useMarkAsRead.ts (investigate cache invalidation)\n- src/server/api/routers/work-items.ts (verify query doesn't filter by read state)\n- src/hooks/__tests__/useMarkAsRead.test.ts (new or update)\n- src/components/work-items/__tests__/WorkItemCard.test.tsx (new or update)","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-17T09:54:37.434121-05:00","updated_at":"2025-12-17T12:24:42.771949-05:00","dependencies":[{"issue_id":"gitlab-insights-j277","depends_on_id":"gitlab-insights-hu57","type":"blocks","created_at":"2025-12-17T11:10:54.439013-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-j6z","title":"Story 11.4: Implement collision detection","description":"**Context:** Find other MRs that overlap with a given MR's files.\n\n**Implementation:**\n\nAdd to `src/server/services/territory-scorer.ts`:\n\n```typescript\ninterface Collision {\n  otherMR: Event;\n  overlapScore: TerritoryScore;\n  severity: number;\n}\n\nasync function findCollisions(\n  db: PrismaClient,\n  userId: string,\n  mrEventId: string,\n  options?: {\n    threshold?: number;      // Default 0.3\n    includeExpertise?: boolean;\n  }\n): Promise\u003cCollision[]\u003e\n```\n\n**Implementation flow:**\n1. Get files for the input MR\n2. Find other open MRs with overlapping files\n3. Calculate overlap score for each\n4. Filter by threshold\n5. Sort by severity DESC\n\n**Query approach:**\n```sql\n-- Find MRs with overlapping files\nSELECT DISTINCT e.id, e.title, e.\"gitlabUrl\"\nFROM \"Event\" e\nJOIN \"MRFileChange\" mfc ON mfc.\"eventId\" = e.id\nWHERE e.\"userId\" = $1\n  AND e.type = 'merge_request'\n  AND e.id != $2\n  AND mfc.\"filePath\" IN (\n    SELECT \"filePath\" FROM \"MRFileChange\" WHERE \"eventId\" = $2\n  )\n```\n\n**Acceptance criteria:**\n- [ ] Finds overlapping MRs\n- [ ] Calculates overlap scores\n- [ ] Filters by threshold\n- [ ] Returns sorted results\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:50.618868-05:00","updated_at":"2025-12-12T09:04:50.618868-05:00","dependencies":[{"issue_id":"gitlab-insights-j6z","depends_on_id":"gitlab-insights-t2r","type":"blocks","created_at":"2025-12-15T12:13:40.502239-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-jdqj","title":"2.4: Add database indexes for work item queries","description":"Add indexes to optimize grouped queries: idx_event_parent_id (WHERE parentEventId IS NOT NULL), idx_event_work_item_listing (eventType, status, updatedAt DESC WHERE parentEventId IS NULL), GIN indexes on closesIssueIds/mentionedInIds arrays, idx_event_repository_name, full-text search on title+description. Verify with EXPLAIN ANALYZE - should show Index Scan not Seq Scan.","status":"closed","priority":0,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-15T12:21:54.70017-05:00","updated_at":"2025-12-15T14:08:33.788465-05:00","closed_at":"2025-12-15T14:08:33.788465-05:00","dependencies":[{"issue_id":"gitlab-insights-jdqj","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:54.854482-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-jdqj","depends_on_id":"gitlab-insights-0ran","type":"blocks","created_at":"2025-12-15T12:21:54.927312-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-jfx","title":"Story 15.2: Create digest settings page","description":"**Context:** UI to configure email digest.\n\n**Implementation:**\n\nCreate `src/app/(auth)/settings/digest/page.tsx`:\n\n```tsx\nexport default async function DigestSettingsPage() {\n  await requireAuth();\n  return \u003cDigestSettingsClient /\u003e;\n}\n```\n\nCreate `src/components/settings/DigestSettingsClient.tsx`:\n\n```tsx\nexport function DigestSettingsClient() {\n  // Enable/disable toggle\n  // Frequency selector\n  // Send time picker\n  // Territory filter (reuse from Activity)\n  // Topic filter\n  // Threshold sliders\n  // Test send button\n}\n```\n\n**Acceptance criteria:**\n- [ ] Can enable/disable\n- [ ] Can set frequency\n- [ ] Can configure filters\n- [ ] Saves to DigestPreference\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.498656-05:00","updated_at":"2025-12-12T09:04:38.498656-05:00","dependencies":[{"issue_id":"gitlab-insights-jfx","depends_on_id":"gitlab-insights-q4a","type":"blocks","created_at":"2025-12-15T12:13:57.601094-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-jiyx","title":"5.1: Create /catch-up page with WorkItemList integration","description":"Create new /catch-up route as primary dashboard. Page layout: Header (GitLab Insights branding, navigation to Catch Up/Events/Filters/Settings), UnreadCountIndicator, WorkItemList with sections (Issues, MRs). Default filters: status=['open'], showReadItems=true. Connect to getWorkItemsGrouped tRPC endpoint. Loading states, error handling. Responsive layout (max-width 1200px desktop, full-width mobile). File: src/app/catch-up/page.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T12:22:00.262898-05:00","updated_at":"2025-12-15T14:27:39.69265-05:00","closed_at":"2025-12-15T14:27:39.69265-05:00","dependencies":[{"issue_id":"gitlab-insights-jiyx","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:00.45035-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-jiyx","depends_on_id":"gitlab-insights-qvex","type":"blocks","created_at":"2025-12-15T12:22:00.527116-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-jiyx","depends_on_id":"gitlab-insights-qofn","type":"blocks","created_at":"2025-12-15T12:22:00.602275-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-jnl5","title":"MEDIUM: SyncIndicator interval-query desynchronization causes stale timestamps","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:12:53.194322-05:00","updated_at":"2025-12-16T16:08:40.678644-05:00","closed_at":"2025-12-16T16:08:40.678644-05:00"}
{"id":"gitlab-insights-ju80","title":"Dashboard Infinite Scroll Integration","description":"Integrate infinite scroll into Dashboard view components. Updates EventTable and DashboardClient to use cursor-based pagination with auto-load on scroll.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:05.066642-05:00","updated_at":"2025-12-15T12:08:05.066642-05:00","dependencies":[{"issue_id":"gitlab-insights-ju80","depends_on_id":"gitlab-insights-ej4o","type":"blocks","created_at":"2025-12-15T12:09:38.455627-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-jwqk","title":"Bug: Note firstLine extraction returns empty string for notes starting with newline","description":"","status":"closed","priority":4,"issue_type":"bug","estimated_minutes":10,"created_at":"2025-12-15T14:11:23.458526-05:00","updated_at":"2025-12-16T17:31:37.336548-05:00","closed_at":"2025-12-16T17:31:37.336548-05:00"}
{"id":"gitlab-insights-k53m","title":"Implement automatic retry logic","description":"Configure Intersection Observer to auto-retry failed page loads when sentinel comes back into view. Use isFetchingNextPage flag to prevent duplicate requests. Disconnect observer during fetch to prevent race conditions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:07.975038-05:00","updated_at":"2025-12-15T12:09:07.975038-05:00"}
{"id":"gitlab-insights-klol","title":"Bug: PersonDetail uses non-null assertion on personId instead of safe default","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":10,"created_at":"2025-12-15T14:10:51.280459-05:00","updated_at":"2025-12-15T14:10:51.280459-05:00"}
{"id":"gitlab-insights-kqw","title":"5.2 Conditionally render views","description":"Render appropriate view based on user preference.\n\n## Implementation\nIn DashboardClient.tsx:\n\nconst { data: user } = api.user.getCurrent.useQuery();\n\n{user?.dashboardView === \"grouped\" ? (\n  \u003cWorkItemList ... /\u003e\n) : (\n  \u003cEventTable ... /\u003e // existing flat view\n)}\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-kqw: Conditionally render views\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-kqw","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:07.304011-05:00","updated_at":"2025-12-11T15:10:35.894364-05:00","dependencies":[{"issue_id":"gitlab-insights-kqw","depends_on_id":"gitlab-insights-9jt","type":"blocks","created_at":"2025-12-11T14:26:04.099267-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ksg","title":"1.4 Create database migration","description":"Create and run Prisma migration for all schema changes.\n\n## Implementation\n1. Run: npx prisma migrate dev --name add-event-relationships\n2. Migration should:\n   - Preserve User, UserQuery, MonitoredProject tables\n   - Add new columns to Event table\n   - Create ReadEvent table\n   - Add all indexes\n\nNote: This is a clean slate approach. The migration may drop Event data.\nIf data preservation is needed, consider a multi-step migration.\n\n## Verification\n- Run: npx prisma studio\n- Confirm Event table has all new fields\n- Confirm ReadEvent table exists\n- Confirm indexes are created\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-ksg: Create database migration for event relationships\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-ksg","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:05.973113-05:00","updated_at":"2025-12-15T12:42:24.422546-05:00","closed_at":"2025-12-15T12:42:24.422546-05:00","dependencies":[{"issue_id":"gitlab-insights-ksg","depends_on_id":"gitlab-insights-bgm","type":"blocks","created_at":"2025-12-11T14:25:46.417562-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ksg","depends_on_id":"gitlab-insights-82a","type":"blocks","created_at":"2025-12-11T14:25:46.722584-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ksg","depends_on_id":"gitlab-insights-gcv","type":"blocks","created_at":"2025-12-11T14:25:47.048451-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-las","title":"8.2.3: Implement related discussion discovery","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:12:39.673431-05:00","updated_at":"2025-12-15T12:03:18.802032-05:00","closed_at":"2025-12-15T12:03:18.802032-05:00","dependencies":[{"issue_id":"gitlab-insights-las","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.492094-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-lec","title":"Story 15.5: Implement digest-generator service","description":"**Context:** Generate digest content for a user.\n\n**Implementation:**\n\nCreate `src/server/services/digest-generator.ts`:\n\n```typescript\ninterface DigestContent {\n  activities: DigestActivity[];\n  stats: DigestStats;\n  generatedAt: Date;\n}\n\nasync function generateDigest(\n  db: PrismaClient,\n  userId: string,\n  preferences: DigestPreference\n): Promise\u003cDigestContent | null\u003e {\n  // 1. Get date range (last 24h for daily)\n  const from = new Date(Date.now() - 24 * 60 * 60 * 1000);\n  const to = new Date();\n\n  // 2. Fetch events in range\n  const events = await getEventsInRange(db, userId, from, to);\n\n  // 3. Score relevance\n  const scored = await scoreEvents(events, preferences);\n\n  // 4. Filter by threshold\n  const relevant = scored.filter(e =\u003e e.score \u003e= preferences.minRelevance);\n\n  // 5. Sort and limit\n  const activities = relevant\n    .sort((a, b) =\u003e b.score - a.score)\n    .slice(0, preferences.maxItems);\n\n  // 6. Return null if nothing to send\n  if (activities.length === 0) return null;\n\n  return { activities, stats: calculateStats(activities), generatedAt: to };\n}\n```\n\n**Acceptance criteria:**\n- [ ] Generates relevant activities\n- [ ] Respects thresholds\n- [ ] Returns null if empty\n- [ ] Calculates stats\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:18.610613-05:00","updated_at":"2025-12-12T09:05:18.610613-05:00","dependencies":[{"issue_id":"gitlab-insights-lec","depends_on_id":"gitlab-insights-e5z","type":"blocks","created_at":"2025-12-15T12:13:57.832016-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-lhyu","title":"EPIC: Work Item Grouping - Transform flat feed into hierarchical work-item-centric view","description":"EPIC: Work Item Grouping - Transform Flat Feed into Hierarchical Work-Item-Centric View\n\n## Executive Summary\nGitLab Insights currently provides a flat event feed where issues, MRs, and comments are displayed as independent chronological items. This creates a mental model mismatch - engineers think in terms of work items and their activity, not timelines.\n\nThis epic transforms the flat feed into a hierarchical, work-item-centric view that enables organizational intelligence - discovering conversations you weren't tagged in but should know about based on expertise, domain ownership, or downstream dependencies.\n\n## Core Value Proposition\n**Organizational Intelligence, Not Task Management**\n- Discover discussions about components you own (not assigned, not tagged)\n- Identify decisions affecting your work before they're finalized\n- Provide context others don't have by joining conversations early\n- Maintain organizational awareness without manual monitoring overhead\n\n## Success Criteria\n### User Success\n- Users can answer 'what's happening with this work item?' in \u003c10 seconds without expanding\n- Complete triage without visiting GitLab directly - all context surfaced in app\n- Always know what's seen vs new - no uncertainty about 'did I already look at this?'\n- Instant visual distinction: work items vs activity, unread vs read, user vs system\n\n### Technical Success\n- 100% of parent/child relationships captured during sync match GitLab API\n- ReadEvent state machine works - viewing creates record, new activity clears it\n- Grouped query response time \u003c50% regression from flat query baseline\n\n## Implementation Phases\n1. **Phase 1: Data Model \u0026 Re-fetch** - Capture relationships at ingest time\n2. **Phase 2: Enhanced Data Layer** - New tRPC endpoints for grouped queries\n3. **Phase 3: New UI Components** - WorkItemCard, WorkItemList, ActivityTimeline\n4. **Phase 4: Read Tracking** - Zero-friction read state management\n\n## Design Philosophy\n- **Scan-first design**: List view optimized for rapid scanning (3-5 sec/item)\n- **Three-way read marking**: Button (quick dismiss), expand (scan), side panel (deep dive)\n- **Context signals first-class**: Repo, component, keywords visible in collapsed state\n- **Calm awareness**: Low visual fatigue for all-day monitoring, silent updates\n- **Trust through transparency**: No hidden algorithms, predictable behavior\n\n## Post-MVP Vision\n- Keyboard navigation (j/k)\n- User preference toggle (grouped vs flat views)\n- Virtual scrolling for 500+ items\n- Real-time updates via webhooks\n- Cross-project relationship tracking","status":"open","priority":0,"issue_type":"epic","estimated_minutes":0,"created_at":"2025-12-15T13:23:32.426814-05:00","updated_at":"2025-12-15T13:23:55.272272-05:00"}
{"id":"gitlab-insights-loqk","title":"Perform performance testing","description":"Measure DB query times (target: \u003c10ms p95 for 50 items), browser memory usage (target: \u003c50MB for 500 items), initial page load time (no regression), network payload sizes. Test with 1000+ event datasets. Use Performance API for measurements.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:06.325807-05:00","updated_at":"2025-12-15T12:09:06.325807-05:00"}
{"id":"gitlab-insights-m3gw","title":"Update Search components for infinite scroll","description":"Update search components to use infinite scroll. CONSISTENCY FIX: Use instant scroll (behavior: 'auto') on keyword change to match other context changes (filters). Remove arbitrary smooth/instant distinction.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:04.310473-05:00","updated_at":"2025-12-15T13:41:34.712767-05:00","dependencies":[{"issue_id":"gitlab-insights-m3gw","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T12:09:39.295562-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-m3gw","depends_on_id":"gitlab-insights-wdwx","type":"blocks","created_at":"2025-12-15T12:09:39.610145-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mas3","title":"8.4.1: Build daily activity aggregation service","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:14:50.604249-05:00","updated_at":"2025-12-15T12:03:19.542332-05:00","closed_at":"2025-12-15T12:03:19.542332-05:00","dependencies":[{"issue_id":"gitlab-insights-mas3","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.346507-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mdhx","title":"Create useInfiniteScroll hook","description":"Create /src/hooks/useInfiniteScroll.ts using Intersection Observer API. Hook manages sentinel ref, auto-triggers fetchNextPage on scroll, shows loading states, handles errors with toast. Configurable threshold (default 0.8). Returns sentinelRef for component integration.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:02.768233-05:00","updated_at":"2025-12-15T12:09:02.768233-05:00"}
{"id":"gitlab-insights-mfn","title":"Story 14.2: Add getActivityFeed endpoint","description":"Context: API for filtered activity feed.\n\nImplementation:\n\nCreate src/server/api/routers/activity.ts:\n\n```typescript\nexport const activityRouter = createTRPCRouter({\n  getFeed: protectedProcedure\n    .input(z.object({\n      dateRange: z.object({\n        from: z.date(),\n        to: z.date()\n      }),\n      filters: z.object({\n        territories: z.array(z.string()).optional(),\n        people: z.array(z.string()).optional(),\n        topics: z.array(z.string()).optional(),\n        types: z.array(z.enum(['issue', 'merge_request', 'comment'])).optional()\n      }).optional(),\n      limit: z.number().default(50),\n      cursor: z.string().optional() // Pagination\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Fetch events in date range\n      // Apply filters\n      // Score relevance\n      // Sort by relevance × recency\n      // Return with cursor for pagination\n    })\n});\n```\n\nAcceptance criteria:\n- [ ] Date range filtering\n- [ ] Territory/person/topic filters\n- [ ] Relevance scoring\n- [ ] Pagination support\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:33.086469-05:00","updated_at":"2025-12-12T09:04:33.086469-05:00","dependencies":[{"issue_id":"gitlab-insights-mfn","depends_on_id":"gitlab-insights-12d","type":"blocks","created_at":"2025-12-15T12:13:54.625769-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mji","title":"Epic 16: MR Context View (Bonus)","description":"Goal: Enhanced MR view with intelligent suggestions.\n\nTestable when closed:\n- Creating/viewing MR shows suggested reviewers based on expertise\n- MR detail shows related decisions about touched files\n- Territory conflicts automatically highlighted\n- 'Related work' section shows similar MRs and related issues\n\nDependencies: Epic 10 (Expertise), Epic 11 (Territory), Epic 12 (Similarity)\n\nContains 7 stories (16.1-16.7), ~21 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.971437-05:00","updated_at":"2025-12-12T09:03:06.971437-05:00","dependencies":[{"issue_id":"gitlab-insights-mji","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:22.913488-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mji","depends_on_id":"gitlab-insights-mnh","type":"blocks","created_at":"2025-12-12T09:03:22.976646-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mji","depends_on_id":"gitlab-insights-b5y","type":"blocks","created_at":"2025-12-12T09:03:23.039387-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mkn","title":"Move author to header","description":"in EventTable rows, move author from right-hand section to the header section for easier visibility","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T09:44:09.823631-05:00","updated_at":"2025-12-11T09:47:25.638292-05:00","closed_at":"2025-12-11T09:47:25.638292-05:00"}
{"id":"gitlab-insights-mm7s","title":"Bug: Person extraction never called in api-polling - Person table never populated","description":"","status":"closed","priority":0,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:06:47.685157-05:00","updated_at":"2025-12-15T14:19:58.101117-05:00","closed_at":"2025-12-15T14:19:58.101117-05:00"}
{"id":"gitlab-insights-mnf8","title":"Bug: Race condition - read status can change during pagination causing duplicates","description":"","status":"open","priority":2,"issue_type":"bug","estimated_minutes":45,"created_at":"2025-12-15T14:10:31.271278-05:00","updated_at":"2025-12-15T14:10:31.271278-05:00"}
{"id":"gitlab-insights-mnh","title":"Epic 11: Territory \u0026 Collision Detection","description":"Goal: Implement Territory View showing who's working where, with collision alerts.\n\nTestable when closed:\n- Can see 'territory map' of active work areas\n- When viewing an MR, see potential collisions with other MRs touching same files\n- Collision severity scored based on file overlap and expertise\n- Alert threshold surfacing real conflicts without noise\n\nDependencies: Epic 10 (Expertise scoring)\n\nAlgorithm:\nterritory_collision = file_overlap x 0.7 + directory_overlap x 0.3\ncollision_severity = territory_collision x (your_expertise + their_expertise) / 2\nalert_threshold = 0.3\n\nContains 11 stories (11.1-11.11), ~34 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:05.5304-05:00","updated_at":"2025-12-12T09:03:05.5304-05:00","dependencies":[{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:21.60576-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-xug","type":"blocks","created_at":"2025-12-12T09:06:47.521246-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-ca6","type":"blocks","created_at":"2025-12-12T09:06:47.625368-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-t2r","type":"blocks","created_at":"2025-12-12T09:06:47.691183-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-j6z","type":"blocks","created_at":"2025-12-12T09:06:47.756475-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-85l","type":"blocks","created_at":"2025-12-12T09:06:47.825482-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-dik","type":"blocks","created_at":"2025-12-12T09:06:47.899312-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-3kr","type":"blocks","created_at":"2025-12-12T09:06:47.970542-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-4zq","type":"blocks","created_at":"2025-12-12T09:06:48.043771-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-do0","type":"blocks","created_at":"2025-12-12T09:06:48.107362-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-w9l","type":"blocks","created_at":"2025-12-12T09:06:48.173632-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-3zi","type":"blocks","created_at":"2025-12-12T09:06:48.252864-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mo8","title":"Epic 9: Commit \u0026 File Data Foundation","description":"Goal: Fetch commit and file-level data from GitLab, establishing the foundation for expertise scoring and territory detection.\n\nTestable when closed:\n- Commits are fetched and stored with file lists\n- File entity populated with paths, directories, extensions\n- Can browse files touched in a project and see who committed to them\n- Person-to-File relationships visible through commits\n\nDependencies: Epic 8 (Person entity)\n\nContains 10 stories (9.1-9.10), ~29 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:04.914007-05:00","updated_at":"2025-12-12T09:03:04.914007-05:00","dependencies":[{"issue_id":"gitlab-insights-mo8","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:21.124059-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-msee","title":"CRITICAL: Cache invalidation race in useMarkAsRead - hardcoded filters cause inconsistent state","description":"","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-16T12:12:52.092245-05:00","updated_at":"2025-12-16T15:53:32.531084-05:00","closed_at":"2025-12-16T15:53:32.531084-05:00"}
{"id":"gitlab-insights-myl","title":"1.9 Trigger full data refetch and verify","description":"Refetch all data from GitLab and verify relationships are captured.\n\n## Implementation\n1. Use existing manualRefresh endpoint or create admin endpoint\n2. Trigger full refetch for all monitored projects\n\n## Verification Checklist\n- [ ] Comments have parentEventId set (link to parent issue/MR)\n- [ ] Comments have gitlabParentId set (GitLab IID)\n- [ ] MRs have closesIssueIds populated from API\n- [ ] Issues have status, commentCount, lastActivityAt\n- [ ] MRs have status, commentCount, lastActivityAt\n- [ ] System notes have isSystemNote = true\n- [ ] Assignees arrays are populated\n- [ ] Cross-references (mentionedInIds) are extracted\n\n## Performance Check\n- Run sample queries to verify indexes work\n- Check query times for grouped queries\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-myl: Trigger full data refetch and verify\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-myl\n- Update plan: AC-1, AC-2, AC-3 -\u003e \"complete\" (if verified)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:12.480671-05:00","updated_at":"2025-12-11T15:08:07.306923-05:00","dependencies":[{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-e0h","type":"blocks","created_at":"2025-12-11T14:25:54.636046-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-5oj","type":"blocks","created_at":"2025-12-11T14:25:54.881508-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-7e5","type":"blocks","created_at":"2025-12-11T14:25:55.083724-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-u9b","type":"blocks","created_at":"2025-12-11T14:25:55.280003-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mz1k","title":"Update Events router with cursor support (getRecent, getForDashboard)","description":"Update /src/server/api/routers/events.ts endpoints. Replace hard-coded limits with cursor-based pagination. getRecent: add cursor param, return {items, nextCursor, hasMore}. getForDashboard: eliminate inefficient separate fetch+merge, use single DB query with cursor pagination.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:01.164495-05:00","updated_at":"2025-12-15T12:09:01.164495-05:00","dependencies":[{"issue_id":"gitlab-insights-mz1k","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:37.293223-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n04","title":"Story 14.8: Add My Activity quick filter","description":"Context: One-click filter for activity in user's territory.\n\nImplementation:\n\n```tsx\n\u003cQuickFilters\u003e\n  \u003cQuickFilterButton\n    label=\"My Activity\"\n    active={isMyActivityFilter}\n    onClick={() =\u003e {\n      setFilters({\n        territories: userTerritories,\n        people: [],\n        topics: []\n      });\n    }}\n  /\u003e\n  \u003cQuickFilterButton\n    label=\"Everything\"\n    active={!hasFilters}\n    onClick={() =\u003e clearFilters()}\n  /\u003e\n\u003c/QuickFilters\u003e\n```\n\nMy Activity includes:\n- Events in user's territory\n- Events mentioning user\n- Responses to user's work\n\nAcceptance criteria:\n- [ ] Quick filter button\n- [ ] Uses user's territory\n- [ ] One-click activation\n- [ ] Clear indicator when active\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:46.846211-05:00","updated_at":"2025-12-12T09:05:46.846211-05:00","dependencies":[{"issue_id":"gitlab-insights-n04","depends_on_id":"gitlab-insights-nv6","type":"blocks","created_at":"2025-12-15T12:13:55.102936-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n4ee","title":"Update Query Detail components for infinite scroll","description":"Update query detail view to use api.queries.getNewItems.useInfiniteQuery. Flatten pages, pass to EventTable. Instant scroll to top on filter changes if applicable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:04.684815-05:00","updated_at":"2025-12-15T12:09:04.684815-05:00","dependencies":[{"issue_id":"gitlab-insights-n4ee","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T12:09:39.370543-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-n4ee","depends_on_id":"gitlab-insights-dnfs","type":"blocks","created_at":"2025-12-15T12:09:39.688691-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n5x","title":"Story 15.6: Create Inngest scheduled function","description":"**Context:** Cron job to send daily digests.\n\n**Implementation:**\n\nCreate `src/inngest/functions/daily-digest.ts`:\n\n```typescript\nimport { inngest } from '../client';\n\nexport const sendDailyDigests = inngest.createFunction(\n  { id: 'send-daily-digests' },\n  { cron: '0 * * * *' }, // Every hour, check who needs digest\n  async ({ step }) =\u003e {\n    // 1. Find users with digests due\n    const users = await step.run('find-users', async () =\u003e {\n      return db.digestPreference.findMany({\n        where: {\n          enabled: true,\n          // sendTime matches current hour\n        },\n        include: { user: true }\n      });\n    });\n\n    // 2. Generate and send for each\n    for (const pref of users) {\n      await step.run('send-digest-' + pref.userId, async () =\u003e {\n        const content = await generateDigest(db, pref.userId, pref);\n        if (content) {\n          await sendDigestEmail(pref.user.email, content);\n        }\n      });\n    }\n  }\n);\n```\n\n**Acceptance criteria:**\n- [ ] Runs hourly\n- [ ] Sends to users at their preferred time\n- [ ] Handles failures gracefully\n- [ ] Logs results\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:43.064297-05:00","updated_at":"2025-12-12T09:05:43.064297-05:00","dependencies":[{"issue_id":"gitlab-insights-n5x","depends_on_id":"gitlab-insights-lec","type":"blocks","created_at":"2025-12-15T12:13:57.914972-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n7f","title":"3.4 Create participant avatars component","description":"Create overlapping avatar stack component.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/ParticipantAvatars.tsx\n\nProps:\n- participants: { username: string, avatar?: string }[]\n- maxVisible: number (default 3)\n\n## Layout\nDefault: [A][B][C] +2 more\nHover: [A] [B] [C] [D] [E] (spread animation)\n\n## Styling\n- Avatar size: 24px diameter\n- Overlap: -8px margin\n- Hover animation: framer-motion spread\n- Tooltip: full participant list on hover\n\n## File\nsrc/app/(authenticated)/dashboard/_components/ParticipantAvatars.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-7\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-n7f: Create participant avatars component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-n7f","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:46.37586-05:00","updated_at":"2025-12-11T15:09:54.558045-05:00","dependencies":[{"issue_id":"gitlab-insights-n7f","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:40.622553-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-nkuh","title":"5.2: Build filter controls (status, type, repository, search)","description":"Create filter controls for work item list. Filters: (1) Status multi-select (open/closed/merged, default open) (2) Type toggle (issues/MRs/both) (3) Repository multi-select from user's projects (4) Search input (debounced 300ms, queries title+description) (5) Show read items toggle. Use HeroUI Autocomplete/Checkbox components. Filter state in URL query params for bookmarkable URLs. Clear filters button. File: src/components/work-items/WorkItemFilters.tsx","status":"in_progress","priority":0,"issue_type":"task","estimated_minutes":150,"created_at":"2025-12-15T12:22:00.710818-05:00","updated_at":"2025-12-15T14:34:53.598843-05:00","dependencies":[{"issue_id":"gitlab-insights-nkuh","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:00.943595-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-nkuh","depends_on_id":"gitlab-insights-jiyx","type":"blocks","created_at":"2025-12-15T12:22:01.114183-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-nmx","title":"Story 15.3: Set up email integration","description":"**Context:** Configure email sending service.\n\n**Implementation:**\n\nInstall Resend:\n```bash\nnpm install resend @react-email/components\n```\n\nCreate `src/server/services/email-service.ts`:\n\n```typescript\nimport { Resend } from 'resend';\n\nconst resend = new Resend(process.env.RESEND_API_KEY);\n\nasync function sendEmail(options: {\n  to: string;\n  subject: string;\n  react: React.ReactElement;\n}): Promise\u003c{ success: boolean; id?: string }\u003e\n```\n\nAdd to `.env`:\n```\nRESEND_API_KEY=re_xxxxx\n```\n\n**Acceptance criteria:**\n- [ ] Resend configured\n- [ ] Can send test email\n- [ ] Environment variable set\n- [ ] Error handling\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:52.421558-05:00","updated_at":"2025-12-12T09:04:52.421558-05:00","dependencies":[{"issue_id":"gitlab-insights-nmx","depends_on_id":"gitlab-insights-jfx","type":"blocks","created_at":"2025-12-15T12:13:57.681101-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-npev","title":"Bug: No error handling wrapper in searchEvents function","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T14:10:36.039751-05:00","updated_at":"2025-12-15T14:10:36.039751-05:00"}
{"id":"gitlab-insights-ntz","title":"Phase 4: Read Tracking \u0026 Filtering","description":"Implement read tracking integration, smart defaults, and filtering.\n\n## Goal\nWire up read tracking to UI and implement smart sorting/filtering.\n\n## Acceptance Criteria\nContributes to: AC-4, AC-8, AC-9\n\n## On Completion (Epic)\nWhen all Phase 4 tasks complete:\n1. Verify AC-4, AC-8, AC-9 are marked 'complete' in plan file\n2. bd close gitlab-insights-ntz","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:25:00.569438-05:00","updated_at":"2025-12-11T15:10:21.160892-05:00","dependencies":[{"issue_id":"gitlab-insights-ntz","depends_on_id":"gitlab-insights-pyd","type":"blocks","created_at":"2025-12-11T14:25:36.090897-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-nu38","title":"Security: Add HMAC signature to cursor tokens to prevent tampering","description":"","status":"closed","priority":1,"issue_type":"bug","estimated_minutes":60,"created_at":"2025-12-15T14:06:46.512398-05:00","updated_at":"2025-12-15T14:28:28.871738-05:00","closed_at":"2025-12-15T14:28:28.871738-05:00"}
{"id":"gitlab-insights-nv6","title":"Story 14.7: Create ActivityCard component","description":"Context: Display activity items with relevance indicator.\n\nImplementation:\n\nCreate src/components/activity/ActivityCard.tsx:\n\n```tsx\ninterface ActivityCardProps {\n  event: Event;\n  relevance: RelevanceScore;\n}\n\nexport function ActivityCard({ event, relevance }: ActivityCardProps) {\n  // Type icon (issue/MR/comment)\n  // Title\n  // Author with avatar\n  // Relevance bar/indicator\n  // Time ago\n  // Click to view details\n}\n```\n\nRelevance indicator:\n- Color gradient (red = very relevant, gray = less)\n- Tooltip showing why relevant\n\nAcceptance criteria:\n- [ ] Shows all event types\n- [ ] Relevance indicator visible\n- [ ] Explains relevance on hover\n- [ ] Links to detail view\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:29.590266-05:00","updated_at":"2025-12-12T09:05:29.590266-05:00","dependencies":[{"issue_id":"gitlab-insights-nv6","depends_on_id":"gitlab-insights-0rb","type":"blocks","created_at":"2025-12-15T12:13:55.030772-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-nvo1","title":"Bug: LastSync missing FK to User - causes orphaned records on user deletion","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T14:07:02.575458-05:00","updated_at":"2025-12-15T14:33:12.207823-05:00","closed_at":"2025-12-15T14:33:12.207823-05:00"}
{"id":"gitlab-insights-o1uv","title":"8.0.2: Week 8 validation checkpoint","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":30,"created_at":"2025-12-15T11:16:35.034026-05:00","updated_at":"2025-12-15T12:03:20.052558-05:00","closed_at":"2025-12-15T12:03:20.052558-05:00","dependencies":[{"issue_id":"gitlab-insights-o1uv","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:16:44.128614-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-o58","title":"Story 9.1: Add Commit model and CommitFile junction","description":"**Context:** Need to store commits with their metadata and link them to the files they touch.\n\n**Implementation:**\n\nAdd to `prisma/schema.prisma`:\n\n```prisma\nmodel Commit {\n  id            String   @id @default(cuid())\n  userId        String\n  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  sha           String   // Full commit SHA\n  shortSha      String   // First 8 chars for display\n  message       String   // Commit message\n  title         String   // First line of message\n  authoredAt    DateTime // When authored\n\n  // Author link - may be null if person not found\n  personId      String?\n  person        Person?  @relation(fields: [personId], references: [id])\n\n  // GitLab metadata\n  projectId     String   // GitLab project ID\n  webUrl        String   // Link to GitLab\n\n  // Stats\n  additions     Int      @default(0)\n  deletions     Int      @default(0)\n\n  // Relationships\n  files         CommitFile[]\n\n  createdAt     DateTime @default(now())\n\n  @@unique([userId, sha])\n  @@index([userId, authoredAt])\n  @@index([userId, projectId])\n  @@index([personId])\n}\n\nmodel CommitFile {\n  id        String @id @default(cuid())\n  commitId  String\n  commit    Commit @relation(fields: [commitId], references: [id], onDelete: Cascade)\n  fileId    String\n  file      File   @relation(fields: [fileId], references: [id], onDelete: Cascade)\n\n  // Change type\n  changeType String // 'added' | 'modified' | 'deleted' | 'renamed'\n\n  @@unique([commitId, fileId])\n  @@index([fileId])\n}\n```\n\n**Acceptance criteria:**\n- [ ] Commit model with all fields\n- [ ] CommitFile junction table\n- [ ] Proper indexes for queries\n- [ ] Migration runs successfully\n\n**Hours:** 2","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:14.205963-05:00","updated_at":"2025-12-15T14:09:38.854202-05:00","closed_at":"2025-12-15T14:09:38.854202-05:00","dependencies":[{"issue_id":"gitlab-insights-o58","depends_on_id":"gitlab-insights-784","type":"blocks","created_at":"2025-12-15T12:14:18.983895-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ochd","title":"Reliability: No proactive rate limit tracking in gitlab-client","description":"","status":"open","priority":3,"issue_type":"feature","estimated_minutes":45,"created_at":"2025-12-15T14:07:06.183389-05:00","updated_at":"2025-12-15T14:07:06.183389-05:00"}
{"id":"gitlab-insights-oozz","title":"Bug: unreadOnly filter defined but never implemented in work-items.ts","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:07:15.981317-05:00","updated_at":"2025-12-15T14:07:15.981317-05:00"}
{"id":"gitlab-insights-p16","title":"Story 17.6: Add recent incidents section","description":"Add section showing recent historical incidents if data is available.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Optional feature dependent on historical incident data availability\n\nAcceptance Criteria:\n- Query for historical incidents related to selected path (if data exists)\n- Display recent incident list with dates, severity, resolution\n- Link to incident details/postmortems\n- Show patterns or recurring issues\n- Gracefully handle missing data\n\nEstimated Hours: 2h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.670227-05:00","updated_at":"2025-12-12T09:04:39.670227-05:00","dependencies":[{"issue_id":"gitlab-insights-p16","depends_on_id":"gitlab-insights-86d","type":"blocks","created_at":"2025-12-15T12:14:02.322-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-p1dz","title":"1.5: Write tests to validate 100% relationship accuracy vs GitLab API","description":"Create automated tests comparing our stored relationships against GitLab API responses (100% accuracy target). Sample-based: select 20-30 random work items, re-fetch from GitLab, assert relationships match. Test parent/child (note.noteable_id), closes (parse MR description), participants (author+commenters+assignees). File: tests/integration/relationship-accuracy.test.ts. Run in CI on every sync.","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T12:21:53.341819-05:00","updated_at":"2025-12-15T14:12:57.272927-05:00","closed_at":"2025-12-15T14:12:57.272927-05:00","dependencies":[{"issue_id":"gitlab-insights-p1dz","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:53.503303-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-p1dz","depends_on_id":"gitlab-insights-ar85","type":"blocks","created_at":"2025-12-15T12:21:53.57682-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-pf0","title":"8.1.2: Implement GitLab commit fetching with file diffs","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:10:19.519695-05:00","updated_at":"2025-12-15T12:01:28.858249-05:00","closed_at":"2025-12-15T12:01:28.858249-05:00","dependencies":[{"issue_id":"gitlab-insights-pf0","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.762393-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-pf0","depends_on_id":"gitlab-insights-a0y","type":"blocks","created_at":"2025-12-15T11:11:40.724427-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-pnea","title":"Reliability: No database operation timeouts in event-transformer and person-extractor","description":"","status":"in_progress","priority":2,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:11:19.991519-05:00","updated_at":"2025-12-15T14:33:37.05023-05:00"}
{"id":"gitlab-insights-pocl","title":"BUG: Console.log statements left in production code - should use logger","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T12:15:54.569132-05:00","updated_at":"2025-12-16T16:00:30.431154-05:00","closed_at":"2025-12-16T16:00:30.431154-05:00"}
{"id":"gitlab-insights-pp86","title":"5.3: Implement empty states (no items, all read, search no results)","description":"Create empty state components for edge cases. NO ITEMS: 'No work items found. Try adjusting your filters or check back later.' (neutral gray). ALL READ: 'All caught up! You've reviewed all work items.' (green success, celebratory but professional). SEARCH NO RESULTS: 'No work items match your search. Try different keywords.' (with search term highlighted). NO ACTIVITIES: 'No activity yet on this work item.' (within expanded card). Clean, minimal design (icon + text + optional CTA). File: src/components/work-items/EmptyStates.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:22:01.239273-05:00","updated_at":"2025-12-15T14:23:45.505889-05:00","closed_at":"2025-12-15T14:23:45.505889-05:00","dependencies":[{"issue_id":"gitlab-insights-pp86","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:01.404062-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-pp86","depends_on_id":"gitlab-insights-qvex","type":"blocks","created_at":"2025-12-15T12:22:01.478578-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-psm","title":"Story 15.7: Add digest preview feature","description":"**Context:** Let user preview what digest would look like.\n\n**Implementation:**\n\nAdd to digest settings:\n\n```tsx\n\u003cButton onClick={handlePreview}\u003e\n  Preview Digest\n\u003c/Button\u003e\n\n\u003cDigestPreviewModal\n  isOpen={previewOpen}\n  content={previewContent}\n  onClose={() =\u003e setPreviewOpen(false)}\n/\u003e\n```\n\nAdd tRPC endpoint:\n```typescript\npreviewDigest: protectedProcedure\n  .query(async ({ ctx }) =\u003e {\n    const prefs = await getDigestPrefs(ctx.db, ctx.session.userId);\n    return generateDigest(ctx.db, ctx.session.userId, prefs);\n  })\n```\n\n**Acceptance criteria:**\n- [ ] Preview button on settings\n- [ ] Shows what digest would contain\n- [ ] Uses current preferences\n- [ ] Renders email content\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:54.771138-05:00","updated_at":"2025-12-12T09:05:54.771138-05:00","dependencies":[{"issue_id":"gitlab-insights-psm","depends_on_id":"gitlab-insights-n5x","type":"blocks","created_at":"2025-12-15T12:13:57.986811-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-pyd","title":"Phase 3: New UI Components","description":"Build work item card components to replace flat event list.\n\n## Goal\nCreate collapsible card UI showing activity logs, with full content in detail pane.\n\n## Key Files (new)\n- src/app/(authenticated)/dashboard/_components/WorkItemCard.tsx\n- src/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n- src/app/(authenticated)/dashboard/_components/ActivityTimeline.tsx\n\n## Key Files (update)\n- src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n- src/app/(authenticated)/dashboard/_components/EventDetail.tsx\n\n## Design Reference\n/docs/ux-design-specification.md\n\n## Acceptance Criteria\nContributes to: AC-5, AC-6, AC-7\n\n## On Completion (Epic)\nWhen all Phase 3 tasks complete:\n1. Verify AC-5, AC-6, AC-7 are marked 'ui-ready' or 'complete' in plan file\n2. bd close gitlab-insights-pyd","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:24:38.190022-05:00","updated_at":"2025-12-11T15:09:21.071515-05:00","dependencies":[{"issue_id":"gitlab-insights-pyd","depends_on_id":"gitlab-insights-0rj","type":"blocks","created_at":"2025-12-11T14:25:35.893617-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-pzqq","title":"MEDIUM: Batch update loop missing error handling - inconsistent parent-child relationships","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:15:54.203849-05:00","updated_at":"2025-12-16T15:57:26.848035-05:00","closed_at":"2025-12-16T15:57:26.848035-05:00"}
{"id":"gitlab-insights-q34","title":"Epic 8: Person Entity \u0026 Basic Expertise Foundation","description":"Goal: Establish Person entity and basic expertise signals - the minimum needed for any 'who knows about X?' query.\n\nTestable when closed:\n- Can see a list of people extracted from GitLab activity\n- Can click on a person and see their basic activity summary\n- Basic 'Who touched file X?' query works\n\nDependencies: None (builds on existing Event data)\n\nContains 8 stories (8.1-8.8), ~23 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:04.591315-05:00","updated_at":"2025-12-12T09:03:04.591315-05:00"}
{"id":"gitlab-insights-q4a","title":"Story 15.1: Add DigestPreference model","description":"**Context:** Store user's digest configuration.\n\n**Implementation:**\n\nAdd to schema:\n```prisma\nmodel DigestPreference {\n  id            String   @id @default(cuid())\n  userId        String   @unique\n  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  enabled       Boolean  @default(false)\n  frequency     String   @default(\"daily\") // daily, weekly\n  sendTime      String   @default(\"08:00\") // HH:mm UTC\n\n  // Filters (what to include)\n  territories   String[] // Directories to watch\n  topics        String[] // Keywords to watch\n\n  // Thresholds\n  minRelevance  Float    @default(0.5)\n  maxItems      Int      @default(15)\n\n  createdAt     DateTime @default(now())\n  updatedAt     DateTime @updatedAt\n}\n```\n\n**Acceptance criteria:**\n- [ ] Model created\n- [ ] Linked to User\n- [ ] Default values set\n- [ ] Migration runs\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:27.577911-05:00","updated_at":"2025-12-12T09:04:27.577911-05:00"}
{"id":"gitlab-insights-qa2i","title":"Add keyboard shortcuts (jump to top/bottom)","description":"Add vim-style keyboard shortcuts for power users: 'g' or Home = jump to top, 'G' or End = jump to bottom (trigger load all remaining), Ctrl+Home/End as alternatives. Integrate with existing j/k navigation. Add to EventTable keyboard handler.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:32.530682-05:00","updated_at":"2025-12-15T13:41:32.530682-05:00","dependencies":[{"issue_id":"gitlab-insights-qa2i","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T13:42:24.96585-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-qh6x","title":"P1.1: Update Prisma schema with relationship fields","description":"Add fields to Event model: parentEventId (nullable String for self-referential FK), closesIssueIds (String array), mentionsWorkItemIds (String array), participants (String array of usernames), lastActivityAt (DateTime), commentCount (Int default 0), unresolvedCommentCount (Int default 0). Add ReadEvent model with userId, eventId, readAt, and unique constraint on userId+eventId. Justification: Capturing relationships at ingest time enables indexed queries instead of runtime pattern matching, improving performance 10-50x for grouped views.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T13:26:09.476588-05:00","updated_at":"2025-12-16T10:55:34.915673-05:00","closed_at":"2025-12-16T10:55:34.915673-05:00"}
{"id":"gitlab-insights-qofn","title":"4.4: Build UnreadCountIndicator component with live updates","description":"Create unread count indicator at top of work item list. Shows 'X NEW ITEMS' in olive badge when count \u003e0, 'All caught up!' in green success badge (#22C55E) when count=0. Real-time updates: subscribe to tRPC query invalidation, decrement on each markAsRead action. Prominent display (13px semibold, pill shape 12px border-radius). Sticky positioning (remains visible during scroll). File: src/components/work-items/UnreadCountIndicator.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:21:59.541798-05:00","updated_at":"2025-12-15T14:23:08.468471-05:00","closed_at":"2025-12-15T14:23:08.468471-05:00","dependencies":[{"issue_id":"gitlab-insights-qofn","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:59.737646-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-qofn","depends_on_id":"gitlab-insights-gr0w","type":"blocks","created_at":"2025-12-15T12:21:59.820229-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-qvex","title":"3.2: Build WorkItemList component with grouped sections","description":"Create work item list container with grouped sections (Issues, MRs). Unread count indicator at top (olive badge when \u003e0, green success #22C55E when zero/'All caught up!'). Sort: unread items float to top regardless of timestamp, then by updatedAt desc. Section headers with collapse/expand + 'Mark all as read' button. Empty states (no items, all read, search no results). Max-width 1200px container, 16px spacing between cards. File: src/components/work-items/WorkItemList.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T12:21:55.779279-05:00","updated_at":"2025-12-15T14:15:23.63295-05:00","closed_at":"2025-12-15T14:15:23.63295-05:00","dependencies":[{"issue_id":"gitlab-insights-qvex","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:55.933555-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-qvex","depends_on_id":"gitlab-insights-5h1j","type":"blocks","created_at":"2025-12-15T12:21:56.003966-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-r13","title":"Story 17.1: Create IncidentResponseView page at /incident","description":"Create the main Incident Response Mode page at /incident route. This page provides quick expert finding for production issues.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Goal: Quick expert finding for production issues\n- Dependencies: Epic 10 (Expertise), Epic 13 (Decisions)\n\nAcceptance Criteria:\n- Create IncidentResponseView component\n- Set up route at /incident\n- Create basic page layout and structure for incident response features\n- Prepare UI sections for expert list, commits, discussions, and incidents\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.591257-05:00","updated_at":"2025-12-12T09:04:38.591257-05:00"}
{"id":"gitlab-insights-r9i","title":"Story 10.8: Create ExpertResultCard with score visualization","description":"Context: Display expert results with score breakdown.\n\nImplementation:\n\nCreate src/components/expertise/ExpertResultCard.tsx:\n\nProps interface:\n- result: ExpertiseResult\n- rank: number\n\nComponent displays:\n- Rank badge (#1, #2, etc.)\n- PersonCard (avatar, name)\n- Total score (prominent)\n- Score breakdown visualization:\n  * Bar chart or progress bars showing contribution of each signal\n  * Commits: 45% | MRs: 30% | Issues: 15% | Comments: 10%\n- Last activity date\n- Click to expand/navigate to person\n\nVisualization approach:\n- Stacked horizontal bar showing relative contribution\n- Color-coded: commits (blue), MRs (green), issues (yellow), comments (gray)\n- Percentage labels on hover\n\nAcceptance criteria:\n- Shows rank and total score\n- Displays person info\n- Visualizes score breakdown\n- Shows last activity\n- Clickable for navigation\n\nHours: 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:00.148184-05:00","updated_at":"2025-12-12T09:06:00.148184-05:00","dependencies":[{"issue_id":"gitlab-insights-r9i","depends_on_id":"gitlab-insights-fjp","type":"blocks","created_at":"2025-12-15T12:13:17.085257-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-r9wk","title":"Add concurrency and race condition tests","description":"Test concurrent scenarios: multiple users paginating simultaneously, user modifying data (deleting, marking read) while paginating, sync happening during active pagination. Verify no duplicates, no data loss, proper cache invalidation. Use testing library helpers to simulate concurrent operations.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:42:00.502212-05:00","updated_at":"2025-12-15T13:42:00.502212-05:00","dependencies":[{"issue_id":"gitlab-insights-r9wk","depends_on_id":"gitlab-insights-5xmm","type":"blocks","created_at":"2025-12-15T13:42:25.530521-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rb68","title":"Search Infinite Scroll Integration","description":"Integrate infinite scroll into Search results view. Updates search components to support cursor pagination while maintaining FTS rank-based ordering.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:05.394458-05:00","updated_at":"2025-12-15T12:08:05.394458-05:00","dependencies":[{"issue_id":"gitlab-insights-rb68","depends_on_id":"gitlab-insights-ej4o","type":"blocks","created_at":"2025-12-15T12:09:38.541385-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rli8","title":"Testing \u0026 Quality Assurance","description":"Comprehensive testing suite for infinite scroll implementation. Includes unit tests, integration tests, E2E tests, performance testing, and accessibility validation.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:06.667561-05:00","updated_at":"2025-12-15T12:08:06.667561-05:00","dependencies":[{"issue_id":"gitlab-insights-rli8","depends_on_id":"gitlab-insights-ju80","type":"blocks","created_at":"2025-12-15T12:09:39.979831-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-rli8","depends_on_id":"gitlab-insights-rb68","type":"blocks","created_at":"2025-12-15T12:09:40.05706-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-rli8","depends_on_id":"gitlab-insights-gmt2","type":"blocks","created_at":"2025-12-15T12:09:40.124678-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rpy","title":"3.6 Update EventDetail for full content view","description":"Update EventDetail to show full work item content with activity timeline.\n\n## Implementation\nModify src/app/(authenticated)/dashboard/_components/EventDetail.tsx\n\n## Layout\n+--------------------------------------------------+\n| [Breadcrumb: Issue #123 \u003e MR !456]         [x]   |\n|==================================================|\n| [Badge] Issue #123: Fix login timeout bug        |\n|--------------------------------------------------|\n| Status: Open                                     |\n| Author: Alice - 2 days ago                       |\n| Assigned: Bob, Charlie                           |\n| Labels: bug, auth, high-priority                 |\n| Project: gitlab-insights                         |\n|--------------------------------------------------|\n| Description                                      |\n|--------------------------------------------------|\n| [Full markdown rendered description]             |\n|--------------------------------------------------|\n| Related Work                                     |\n|--------------------------------------------------|\n| MR !456 - Implement new auth flow (merged)       |\n|   -\u003e Closes this issue                           |\n|--------------------------------------------------|\n| Activity (5 items)                               |\n|--------------------------------------------------|\n| [ActivityTimeline component]                     |\n|--------------------------------------------------|\n| [Open in GitLab]                                 |\n+--------------------------------------------------+\n\n## Features\n- Use getWorkItemWithActivity query\n- Render full description with markdown\n- Show related items section\n- Embed ActivityTimeline component\n- Breadcrumb navigation for history\n- Scroll to specific activity when clicked from card\n- Mark as read when viewed\n\n## File\nsrc/app/(authenticated)/dashboard/_components/EventDetail.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-rpy: Update EventDetail for full content view\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-rpy\n- Update plan: AC-5 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:46.848755-05:00","updated_at":"2025-12-11T15:09:55.047995-05:00","dependencies":[{"issue_id":"gitlab-insights-rpy","depends_on_id":"gitlab-insights-s06","type":"blocks","created_at":"2025-12-11T14:26:03.846516-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rsqv","title":"Implementation Note: Decision Keyword List for Epic 13","description":"","status":"open","priority":3,"issue_type":"chore","estimated_minutes":0,"created_at":"2025-12-15T12:05:32.297743-05:00","updated_at":"2025-12-15T12:05:32.297743-05:00","dependencies":[{"issue_id":"gitlab-insights-rsqv","depends_on_id":"gitlab-insights-6q0","type":"related","created_at":"2025-12-15T12:05:59.415513-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-s06","title":"3.3 Create ActivityTimeline component","description":"Create full content timeline for detail pane.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/ActivityTimeline.tsx\n\nProps:\n- activities: ActivityItem[]\n- highlightId?: string (scroll to this item)\n- onMarkAsRead: (activityId: string) =\u003e void\n\n## ActivityItem Type\n{\n  id: string,\n  type: \"comment\" | \"system\",\n  author: string,\n  authorAvatar?: string,\n  content: string,\n  createdAt: DateTime,\n  isUnread: boolean\n}\n\n## Layout\n\nUser Comment:\n+--------------------------------------------------+\n| [Avatar] Bob - 4 hours ago              [NEW]    |\n|--------------------------------------------------|\n| I think I found the root cause. The session      |\n| timeout is set to 5 minutes but the frontend...  |\n| [full markdown rendered content]                 |\n+--------------------------------------------------+\n\nSystem Activity (compressed):\n+--------------------------------------------------+\n| [gear] Alice changed status: Open -\u003e In Progress |\n|        1 day ago                                 |\n+--------------------------------------------------+\n\n## Styling\n- User comments: primary text, full contrast\n- System activity: gray-500, single line, reduced opacity\n- NEW badge: olive pill\n- Unread items: subtle highlight\n\n## File\nsrc/app/(authenticated)/dashboard/_components/ActivityTimeline.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-s06: Create ActivityTimeline component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-s06\n- Update plan: AC-5 -\u003e \"ui-ready\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:38.934403-05:00","updated_at":"2025-12-11T15:09:21.727959-05:00","dependencies":[{"issue_id":"gitlab-insights-s06","depends_on_id":"gitlab-insights-tng","type":"blocks","created_at":"2025-12-11T14:26:40.408154-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-s56h","title":"Create troubleshooting and debugging guide","description":"Document common issues and solutions: slow queries (check EXPLAIN ANALYZE), duplicates (verify cursor logic), missed items (check ordering), memory leaks (Chrome DevTools profiling). Include performance debugging guide, monitoring dashboard interpretation, how to diagnose pagination problems. Add to /docs/troubleshooting/infinite-scroll.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:42:01.062649-05:00","updated_at":"2025-12-15T13:42:01.062649-05:00","dependencies":[{"issue_id":"gitlab-insights-s56h","depends_on_id":"gitlab-insights-6ob3","type":"blocks","created_at":"2025-12-15T13:42:25.807464-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-sk2t","title":"Add pagination logging to all endpoints","description":"Add structured logging to getRecent, getForDashboard, search, getNewItems endpoints. Log: userId, endpoint, cursorProvided, itemsReturned, hasMore, durationMs. Place before return statement. Follow existing codebase logging patterns for userId.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:02.4147-05:00","updated_at":"2025-12-15T12:45:35.785892-05:00","closed_at":"2025-12-15T12:45:35.785892-05:00"}
{"id":"gitlab-insights-sq5","title":"Story 13.6: Create ThreadView component","description":"**Context:** Display full discussion thread.\n\n**Implementation:**\n\nCreate `src/components/decisions/ThreadView.tsx`:\n\n```tsx\ninterface ThreadViewProps {\n  eventId: string;\n}\n\nexport function ThreadView({ eventId }: ThreadViewProps) {\n  // Root event (issue/MR) at top\n  // Comments in chronological order\n  // Participant sidebar\n  // Highlight search terms if from search\n}\n```\n\n**Layout:**\n- Header: Event title, type, dates\n- Sidebar: Participants with avatars\n- Main: Chronological comments\n- Footer: Link to GitLab\n\n**Acceptance criteria:**\n- [ ] Shows full discussion\n- [ ] Comments in order\n- [ ] Participants visible\n- [ ] Search terms highlighted\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:55.245143-05:00","updated_at":"2025-12-12T09:04:55.245143-05:00","dependencies":[{"issue_id":"gitlab-insights-sq5","depends_on_id":"gitlab-insights-27c","type":"blocks","created_at":"2025-12-15T12:13:45.944099-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-t2r","title":"Story 11.3: Create territory-scorer service","description":"**Context:** Calculate territory overlap between MRs or between person and files.\n\n**Implementation:**\n\nCreate `src/server/services/territory-scorer.ts`:\n\n```typescript\ninterface FileOverlap {\n  file: string;\n  inBoth: boolean;\n}\n\ninterface TerritoryScore {\n  fileOverlapScore: number;      // 0-1\n  directoryOverlapScore: number; // 0-1\n  totalScore: number;            // Weighted combination\n  overlappingFiles: string[];\n  overlappingDirectories: string[];\n}\n\n// Calculate overlap between two sets of files\nfunction calculateOverlap(\n  files1: string[],\n  files2: string[]\n): TerritoryScore {\n  // File overlap: |intersection| / |union|\n  const fileSet1 = new Set(files1);\n  const fileSet2 = new Set(files2);\n  const intersection = files1.filter(f =\u003e fileSet2.has(f));\n  const union = new Set([...files1, ...files2]);\n  const fileOverlapScore = intersection.length / union.size;\n\n  // Directory overlap: same logic on parent directories\n  const dirs1 = new Set(files1.map(f =\u003e getParentDirectory(f)));\n  const dirs2 = new Set(files2.map(f =\u003e getParentDirectory(f)));\n  // ...\n\n  return {\n    fileOverlapScore,\n    directoryOverlapScore,\n    totalScore: fileOverlapScore * 0.7 + directoryOverlapScore * 0.3,\n    overlappingFiles: intersection,\n    overlappingDirectories: [...]\n  };\n}\n```\n\n**Acceptance criteria:**\n- [ ] Calculates file overlap correctly\n- [ ] Calculates directory overlap\n- [ ] Returns weighted total\n- [ ] Lists overlapping items\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.217704-05:00","updated_at":"2025-12-12T09:04:38.217704-05:00","dependencies":[{"issue_id":"gitlab-insights-t2r","depends_on_id":"gitlab-insights-ca6","type":"blocks","created_at":"2025-12-15T12:13:40.424211-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-t33b","title":"Accessibility: PersonCard uses div with onClick instead of button","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":15,"created_at":"2025-12-15T14:07:17.190545-05:00","updated_at":"2025-12-15T14:07:17.190545-05:00"}
{"id":"gitlab-insights-t9u5","title":"1.3a: Parse 'closes #N' patterns from MR descriptions","description":"## Purpose\nExtract 'closes #N' relationships from MR descriptions during GitLab API sync, populating the closesIssueIds field.\n\n## Background \u0026 Rationale\nPRD FR2: 'System can store \"closes\" relationships between MRs and issues'\nPRD FR10: 'Users can see \"Closes: #X, #Y\" relationship links on MR cards'\n\n## IMPORTANT: Check GitLab API First\n\nBefore implementing regex parsing, verify what GitLab API already provides:\n\n**GitLab MR API may include:**\n- `closes_issues` - Array of issue objects this MR closes (if available)\n- `related_issues` - Linked issues\n\n**If API provides this data:** Use it directly instead of regex parsing. More reliable, handles edge cases GitLab handles.\n\n**If API doesn't provide this data:** Fall back to regex parsing of description.\n\n## Regex Parsing (Fallback)\n\nGitLab supports multiple closing patterns:\n- 'Closes #123', 'Closes #123, #456'\n- 'Fixes #123', 'Resolves #123'\n- Case-insensitive\n\n```typescript\nconst CLOSES_PATTERN = /(?:close[sd]?|fix(?:e[sd])?|resolve[sd]?)\\s+#(\\d+)/gi;\n\nfunction parseClosesIssueIds(description: string): number[] {\n  const matches = description.matchAll(CLOSES_PATTERN);\n  return [...new Set([...matches].map(m =\u003e parseInt(m[1], 10)))];\n}\n```\n\n### Edge Cases\n- Multiple patterns: 'Fixes #123 and resolves #456'\n- Case variations: 'CLOSES #123'\n- Code blocks: Ideally skip ``` blocks (low priority)\n- Empty descriptions: Return empty array\n\n## Integration\nCalled during MR event transformation:\n```typescript\nif (event.eventType === 'merge_request') {\n  // Prefer API data if available\n  event.closesIssueIds = mrData.closes_issues?.map(i =\u003e i.iid) \n    ?? parseClosesIssueIds(event.description || '');\n}\n```\n\n## Dependencies\n- Prisma schema has closesIssueIds field (1.1)\n\n## Deliverables\n1. Check GitLab API response for closes_issues field\n2. Implement parsing function (if API doesn't provide)\n3. Unit tests for pattern matching\n4. Integration into transformer","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T13:35:50.313656-05:00","updated_at":"2025-12-15T13:54:06.373392-05:00","closed_at":"2025-12-15T13:54:06.373392-05:00","dependencies":[{"issue_id":"gitlab-insights-t9u5","depends_on_id":"gitlab-insights-tt9f","type":"blocks","created_at":"2025-12-15T13:36:38.535592-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-tlpj","title":"5.7: Write user documentation and developer guide","description":"Create documentation for users and developers. USER GUIDE: How to use work item grouping, three-way read marking explanation, filter usage, mobile tips. DEVELOPER GUIDE: Architecture overview (data model, tRPC endpoints, component hierarchy), relationship extraction logic, read tracking state machine, performance considerations, testing strategy. Add inline code comments for complex logic. Files: docs/user-guide-work-item-grouping.md, docs/dev-guide-work-item-grouping.md","status":"open","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:22:03.251263-05:00","updated_at":"2025-12-15T12:22:03.251263-05:00","dependencies":[{"issue_id":"gitlab-insights-tlpj","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:22:03.425457-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-tmn","title":"Feature 10.3: Code Territory Radar","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":480,"created_at":"2025-12-15T11:09:34.557824-05:00","updated_at":"2025-12-15T12:03:00.630885-05:00","closed_at":"2025-12-15T12:03:00.630885-05:00","dependencies":[{"issue_id":"gitlab-insights-tmn","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.322189-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-tng","title":"2.2 Create getWorkItemWithActivity endpoint","description":"Create tRPC endpoint returning full context for a single work item.\n\n## Implementation\nAdd to src/server/api/routers/events.ts:\n\ngetWorkItemWithActivity: protectedProcedure\n  .input(z.object({ eventId: z.string() }))\n  .query(async ({ ctx, input }) =\u003e {\n    // Load the work item\n    // Load all children (comments) ordered by createdAt\n    // Load related MRs (where closesIssueIds includes this issue)\n    // Load related issues (if MR, lookup closesIssueIds)\n    // Load cross-references (mentionedInIds)\n    // Build unified activity timeline\n    return {\n      workItem: Event,\n      comments: Event[],\n      relatedMRs: Event[],\n      relatedIssues: Event[],\n      crossReferences: Event[],\n      participants: string[],\n      activityTimeline: ActivityItem[]\n    }\n  })\n\nEager load with Prisma includes.\nPaginate if \u003e50 activity items.\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-tng: Create getWorkItemWithActivity endpoint\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-tng\n- Update plan: AC-5 -\u003e \"implemented\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.283554-05:00","updated_at":"2025-12-11T15:08:38.29715-05:00","dependencies":[{"issue_id":"gitlab-insights-tng","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:28.608868-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-tt9f","title":"1.1: Update Prisma schema with relationship fields","description":"Add relationship tracking fields to Event model: parentEventId (self-referencing FK for comments), closesIssueIds/closedByMRIds (MR-issue links), mentionedInIds/mentionsIds (cross-references), participantIds (activity aggregation). Also add ReadEvent model for Phase 4 to avoid second migration. WHY: Foundational layer - all downstream views depend on relationships being captured correctly at data ingest time. File: prisma/schema.prisma","status":"closed","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:21:51.826958-05:00","updated_at":"2025-12-15T14:00:29.488372-05:00","closed_at":"2025-12-15T14:00:29.488372-05:00","dependencies":[{"issue_id":"gitlab-insights-tt9f","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:52.012938-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-tthb","title":"Cards should fill container width","description":"## Problem\nCards wrap to fit their content instead of filling available width.\n\n## Acceptance Criteria\n- AC 3.1: Cards stretch to fill 100% of their container width\n- AC 3.2: Cards have no maximum width constraint (parent container handles width constraints)\n\n## Implementation Notes\n- **Root cause to investigate**: HeroUI Card component may have default max-width or width styling. Check:\n  1. Card component's default CSS\n  2. Any `w-fit` or `w-auto` classes\n  3. Flexbox/grid parent behavior\n- **Fix approach**: Add `w-full` class to Card component. Remove any max-width constraints on the card itself.\n- **Container context**: WorkItemList has `max-w-[1200px]` which is intentional - cards should fill that container, not exceed it.\n- **Parent responsibility**: Width constraints should be handled by parent containers, not the card component itself.\n\n## Testing Requirements\n\n### Manual Testing (dev-browser)\nRun the dev server and use dev-browser to verify:\n1. Navigate to catch-up view with work items\n2. **Test full-width on desktop (1920px viewport)**:\n   - VERIFY: Cards stretch to fill the container width\n   - VERIFY: No horizontal gap on left/right of cards\n   - VERIFY: Cards align with container edges (within padding)\n3. **Test container constraint**:\n   - VERIFY: Cards respect the parent's max-w-[1200px] constraint\n   - VERIFY: Cards don't overflow the container\n4. **Test different content lengths**:\n   - Find cards with short titles\n   - Find cards with long titles\n   - VERIFY: Both fill the same width (content doesn't affect card width)\n5. **Test responsive behavior**:\n   - Resize viewport to tablet (768px)\n   - VERIFY: Cards still fill container width\n   - Resize viewport to mobile (375px)\n   - VERIFY: Cards still fill container width\n6. **Test with expanded card**:\n   - Expand a card\n   - VERIFY: Expanded content also fills width\n   - VERIFY: No width jump when expanding/collapsing\n\n### Visual Verification (dev-browser screenshot)\n- Take screenshot at 1920px width\n- Take screenshot at 768px width\n- Take screenshot at 375px width\n- VERIFY: Cards fill available space at all breakpoints\n\n### Unit Tests (src/components/work-items/__tests__/WorkItemCard.test.tsx)\n- Card component has `w-full` class or equivalent\n- Card component does NOT have `max-width` inline style\n- Card component does NOT have `w-fit` or `w-auto` class\n\n### CSS Regression Tests\n- Snapshot test for card container styling\n- Assert computed width equals container width\n\n## Files\n- src/components/work-items/WorkItemCard.tsx (add w-full to Card)\n- src/components/work-items/WorkItemList.tsx (verify container doesn't restrict card width)\n- src/components/work-items/__tests__/WorkItemCard.test.tsx (new or update)","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-17T09:54:37.790414-05:00","updated_at":"2025-12-17T12:25:20.580447-05:00"}
{"id":"gitlab-insights-tv9s","title":"2.5: Establish performance baseline and validate \u003c50% regression","description":"Measure query performance and validate grouped queries don't regress \u003e50% from flat query baseline. Benchmark: flat query baseline (SELECT * LIMIT 20 ORDER BY updatedAt), grouped query (getWorkItemsGrouped 20 items), detail query (getWorkItemWithActivity). TARGETS: flat ~500ms, grouped \u003c750ms, detail \u003c300ms, regression \u003c50%. Document results. File: tests/performance/work-item-queries.bench.ts","status":"closed","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:21:55.025119-05:00","updated_at":"2025-12-15T14:16:27.257211-05:00","closed_at":"2025-12-15T14:16:27.257211-05:00","dependencies":[{"issue_id":"gitlab-insights-tv9s","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:55.174765-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-tv9s","depends_on_id":"gitlab-insights-jdqj","type":"blocks","created_at":"2025-12-15T12:21:55.246722-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-tv9s","depends_on_id":"gitlab-insights-i3u9","type":"blocks","created_at":"2025-12-15T12:21:55.331289-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-u1iu","title":"Add stale cursor error handling","description":"Gracefully handle stale cursors (pointing to deleted events, race conditions). If cursor event not found, return empty page with hasMore=false (not 400 error). Log for monitoring but don't break UX. User sees 'no more items' and can refresh to reset.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:33.203912-05:00","updated_at":"2025-12-15T13:41:33.203912-05:00","dependencies":[{"issue_id":"gitlab-insights-u1iu","depends_on_id":"gitlab-insights-mz1k","type":"blocks","created_at":"2025-12-15T13:42:25.258755-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-u1na","title":"PHASE 2: Enhanced Data Layer - New tRPC endpoints for grouped queries","description":"## Purpose\nThis phase creates new tRPC endpoints that query the relationship-enriched data model from Phase 1, returning work items with activity summaries and unread counts ready for UI consumption.\n\n## Background \u0026 Rationale\nThe existing getEvents endpoint returns a flat list of chronological events. For the grouped view, we need:\n- **Work items as top-level entities** (issues/MRs) with nested activity\n- **Activity summaries** showing 'N new comments, latest by @user'\n- **Unread counts** integrated at query time (join with ReadEvent table)\n- **Grouped by type** (Issues section, MRs section)\n\nCreating new endpoints (vs modifying existing) because:\n- **Preserves existing functionality**: Flat chronological view still works (may be user preference)\n- **Different data shape**: Grouped view needs hierarchical structure, not flat list\n- **Performance optimization**: Can add indexes/caching specific to grouped queries\n- **Easier rollback**: New endpoints can be feature-flagged without breaking existing UI\n\n## Key Endpoints\n\n### getWorkItemsGrouped\nReturns work items (parent issues/MRs) with:\n- Activity summary (comment count, participants, latest comment preview)\n- Unread status (has new activity since last ReadEvent)\n- Relationship metadata (closes, mentions)\n- Grouped by type (Issues, MRs)\n- Sorted by: unread items first, then most recent activity\n\n### getWorkItemWithActivity\nReturns single work item with full activity timeline:\n- All child events (comments, status changes, labels, etc)\n- Chronological activity log with event type distinction (user comment vs system note)\n- Related work items (issues this MR closes, MRs that close this issue)\n- Participant list with GitLab avatars\n\n### markWorkItemAsRead\nCreates/updates ReadEvent for given work item:\n- Records userId, workItemId, readAt timestamp\n- Used by all three read marking paths (button, expand, side panel)\n\n## Query Performance Strategy\n- **Indexed relationships**: parentEventId, closesIssueIds indexed\n- **Denormalized counts**: commentCount stored on parent, not computed\n- **Limit result sets**: Default to 50 work items, paginate beyond\n- **Performance baseline**: Measure existing flat query, ensure \u003c50% regression\n\n## Dependencies\n- Phase 1 complete (relationship data exists)\n- ReadEvent model created (for unread status)\n\n## Deliverables\n1. getWorkItemsGrouped tRPC endpoint with tests\n2. getWorkItemWithActivity tRPC endpoint with tests\n3. markWorkItemAsRead mutation with tests\n4. Database indexes on parentEventId, closesIssueIds, lastActivityAt\n5. Performance comparison showing \u003c50% regression from flat query\n\n## Testing Strategy\n- Unit tests for query logic and activity summary generation\n- Integration tests with realistic data volumes (100+ work items)\n- Performance benchmarks comparing to existing getEvents endpoint\n- Edge case testing (work items with 0 comments, 50+ comments, no participants)","status":"open","priority":0,"issue_type":"task","estimated_minutes":360,"created_at":"2025-12-15T13:24:37.528307-05:00","updated_at":"2025-12-15T13:24:37.528307-05:00","dependencies":[{"issue_id":"gitlab-insights-u1na","depends_on_id":"gitlab-insights-lhyu","type":"parent-child","created_at":"2025-12-15T13:25:51.373661-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-u1na","depends_on_id":"gitlab-insights-fx13","type":"blocks","created_at":"2025-12-15T13:25:53.222796-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-u6sf","title":"Write unit tests for cursor logic","description":"Test cursor encode/decode utilities. Edge cases: empty results, single page, timestamp collisions, invalid cursor format. Verify base64 encoding/decoding, JSON parsing errors, malformed input handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:05.08344-05:00","updated_at":"2025-12-15T12:41:14.428915-05:00","closed_at":"2025-12-15T12:41:14.428915-05:00"}
{"id":"gitlab-insights-u8w","title":"Story 10.3: Implement MR-based expertise","description":"Context: Calculate expertise from MRs authored and reviewed.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface MRExpertise with personId, mrsAuthored, mrsReviewed, lastMRDate, authoredScore, reviewedScore\n\nFunction getMRExpertise(db, userId, filePaths, config)\n\nNOTE: This requires MR → File relationships from Epic 11. For now, use Event-based matching.\n\nFallback implementation (until Epic 11):\n- Search Events of type 'merge_request' containing file paths in title/body\n- Group by author\n- Apply decay based on createdAt\n- MR authored: 4.0 weight, 120d tau\n- MR reviewed: 2.0 weight, 60d tau (placeholder)\n\nCode approach:\nconst events = await db.event.findMany({\n  where: {\n    userId,\n    type: 'merge_request',\n    OR: filePaths.map(p =\u003e ({\n      OR: [\n        { title: { contains: p } },\n        { body: { contains: p } }\n      ]\n    }))\n  }\n});\n// Group by author, apply decay\n\nAcceptance criteria:\n- Calculates MR authored score (4.0 weight, 120d tau)\n- Calculates MR reviewed score (2.0 weight, 60d tau) - placeholder\n- Works with file path search\n- Applies decay correctly\n\nHours: 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:52.557884-05:00","updated_at":"2025-12-15T14:29:30.748315-05:00","closed_at":"2025-12-15T14:29:30.748315-05:00","dependencies":[{"issue_id":"gitlab-insights-u8w","depends_on_id":"gitlab-insights-79c","type":"blocks","created_at":"2025-12-15T12:13:16.682337-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-u9b","title":"1.8 Parse cross-references (mentionedInIds)","description":"Parse description and body text for issue/MR references.\n\n## Implementation\nCreate utility function to extract references:\n- Regex pattern for #123 (issues) and !456 (MRs)\n- Extract numeric IIDs\n- Store in mentionedInIds[]\n\nApply to:\n- Issue descriptions\n- MR descriptions\n- Comment bodies\n\n## File\nsrc/server/services/gitlab/event-transformer.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-3\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-u9b: Parse cross-references (mentionedInIds)\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-u9b\n- Update plan: AC-3 -\u003e \"implemented\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:12.247888-05:00","updated_at":"2025-12-15T13:52:08.423698-05:00","closed_at":"2025-12-15T13:52:08.423698-05:00","dependencies":[{"issue_id":"gitlab-insights-u9b","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:48.304455-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-udr","title":"Story 16.4: Add related decisions section","description":"Add a section showing past discussions on files touched by the MR.\n\n**Context:** Surface relevant historical discussions from Epic 13 (Decisions) to provide context about why code is the way it is and what decisions were made previously.\n\n**Implementation:**\n- Query Decision entity for discussions involving touched files\n- Rank by relevance (recent, high engagement, same files)\n- Display in MRContextPanel\n- Link to original discussion locations\n\n**Acceptance criteria:**\n- Shows past discussions related to files in MR\n- Sorted by relevance\n- Links back to original GitLab discussions\n- Handles case where no related decisions exist\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.093367-05:00","updated_at":"2025-12-12T09:04:49.093367-05:00","dependencies":[{"issue_id":"gitlab-insights-udr","depends_on_id":"gitlab-insights-f2b","type":"blocks","created_at":"2025-12-15T12:13:59.99071-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uhwh","title":"Add 'end of list' UI state","description":"When all items loaded (hasMore=false), show 'You've reached the end - Showing all X items' message. Provides closure, prevents user from scrolling expecting more. Addresses UX issue where continuous auto-load can make footer unreachable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T13:41:33.994211-05:00","updated_at":"2025-12-15T13:41:33.994211-05:00","dependencies":[{"issue_id":"gitlab-insights-uhwh","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T13:42:24.731844-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uj2a","title":"Documentation \u0026 Deployment","description":"Update technical documentation and set up deployment monitoring. Includes API docs, implementation guides, and production deployment checklist.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:08.997533-05:00","updated_at":"2025-12-15T12:08:08.997533-05:00","dependencies":[{"issue_id":"gitlab-insights-uj2a","depends_on_id":"gitlab-insights-rli8","type":"blocks","created_at":"2025-12-15T12:09:41.443975-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-uj2a","depends_on_id":"gitlab-insights-8xf8","type":"blocks","created_at":"2025-12-15T12:09:41.520135-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-uj2a","depends_on_id":"gitlab-insights-i03h","type":"blocks","created_at":"2025-12-15T12:09:41.596031-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uln","title":"2.1 Create getWorkItemsGrouped endpoint","description":"Create tRPC endpoint returning grouped work items for dashboard.\n\n## Implementation\nAdd to src/server/api/routers/events.ts:\n\ngetWorkItemsGrouped: protectedProcedure\n  .input(z.object({\n    status: z.enum([\"open\", \"all\"]).default(\"open\"),\n    sort: z.enum([\"activity\", \"unread\"]).default(\"unread\")\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    // Query issues (type = \"issue\", exclude comments)\n    // Query MRs (type = \"merge_request\", exclude comments)\n    // Join with ReadEvent to get unread status\n    // Sort: unread first, then by lastActivityAt\n    // Return { issues: WorkItemSummary[], mergeRequests: WorkItemSummary[] }\n  })\n\nWorkItemSummary type:\n{\n  event: Event,\n  unreadComments: number,\n  lastActivity: DateTime,\n  participants: string[],\n  status: string,\n  hasNewActivity: boolean\n}\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-uln: Create getWorkItemsGrouped endpoint\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-uln","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.046698-05:00","updated_at":"2025-12-11T15:08:38.054457-05:00","dependencies":[{"issue_id":"gitlab-insights-uln","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:28.388248-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ulz1","title":"Implementation Note: PRD Success Criteria \u0026 Validation Gates","description":"","status":"open","priority":2,"issue_type":"chore","estimated_minutes":0,"created_at":"2025-12-15T12:05:52.848927-05:00","updated_at":"2025-12-15T12:05:52.848927-05:00","dependencies":[{"issue_id":"gitlab-insights-ulz1","depends_on_id":"gitlab-insights-5fg","type":"related","created_at":"2025-12-15T12:05:59.585392-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uu9k","title":"Bug: Verification model missing FK and cleanup mechanism for expired records","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:11:34.920113-05:00","updated_at":"2025-12-15T14:11:34.920113-05:00"}
{"id":"gitlab-insights-uud","title":"Story 8.2: Create Person extraction service","description":"**Context:** We have existing Events with author information that needs to be extracted into Person records. New Events should also create/update Person records.\n\n**Implementation:**\n\nCreate `src/server/services/person-extractor.ts`:\n\n```typescript\ninterface ExtractedPerson {\n  gitlabId: number;\n  username: string;\n  name: string | null;\n  avatarUrl: string | null;\n}\n\n// Extract unique people from existing Events\nasync function extractPeopleFromEvents(db: PrismaClient, userId: string): Promise\u003cnumber\u003e\n\n// Extract person from a GitLab API response (issue, MR, note author)\nfunction extractPersonFromGitLabAuthor(author: GitLabAuthor): ExtractedPerson\n\n// Upsert person - create if new, update if exists\nasync function upsertPerson(db: PrismaClient, userId: string, person: ExtractedPerson): Promise\u003cPerson\u003e\n```\n\nThe extraction should:\n1. Query all Events for the user\n2. Parse unique authors (by gitlabId if available, or username)\n3. Deduplicate\n4. Create Person records with upsert semantics\n\n**GitLab author structure** (from API):\n```json\n{\n  \"id\": 123,\n  \"username\": \"jsmith\",\n  \"name\": \"John Smith\",\n  \"avatar_url\": \"https://...\"\n}\n```\n\n**Acceptance criteria:**\n- [ ] Can extract people from existing Events\n- [ ] Deduplication works correctly\n- [ ] Upsert creates new or updates existing\n- [ ] Returns count of people created/updated\n\n**Hours:** 3","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:47.631375-05:00","updated_at":"2025-12-15T12:23:40.639595-05:00","closed_at":"2025-12-15T12:23:40.639595-05:00","dependencies":[{"issue_id":"gitlab-insights-uud","depends_on_id":"gitlab-insights-3xi","type":"blocks","created_at":"2025-12-15T12:12:52.594364-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uum","title":"Story 16.1: Create getMRContext tRPC endpoint","description":"Create a tRPC endpoint that aggregates expertise, territory, and similarity data for a given MR.\n\n**Context:** This endpoint will power the MR Context View by bringing together multiple intelligence sources:\n- Expertise data for reviewer suggestions\n- Territory data for collision detection\n- Similarity scoring for related MRs\n\n**Implementation:**\n- Create new tRPC endpoint in appropriate router\n- Aggregate data from expertise, territory, and similarity services\n- Return structured context object for frontend consumption\n\n**Acceptance criteria:**\n- Endpoint accepts MR ID as input\n- Returns aggregated context including suggested reviewers, collision alerts, and similar MRs\n- Properly typed response using TypeScript\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:48.390087-05:00","updated_at":"2025-12-12T09:04:48.390087-05:00"}
{"id":"gitlab-insights-v0el","title":"P1.3: Enhance GitLab transformer to parse parent relationships","description":"Update transformer logic to extract: 1) Parent ID from API noteable field for comments, 2) Closes patterns via regex matching MR description for closes #123, fixes #456 formats, 3) Cross-references via regex on issue/MR body for #123 patterns, 4) Participants array aggregated from comment authors. Store in new Event fields. Implementation: Add parseClosesPattern function, parseMentions function, aggregateParticipants function. Edge cases: Handle malformed patterns, duplicate mentions, deleted users. Testing: Unit tests with real GitLab API response fixtures.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T13:26:20.12369-05:00","updated_at":"2025-12-16T10:58:58.586369-05:00","closed_at":"2025-12-16T10:58:58.586369-05:00"}
{"id":"gitlab-insights-v5r","title":"8.2.5: Build DecisionSearchView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:13:05.148151-05:00","updated_at":"2025-12-15T12:03:18.968634-05:00","closed_at":"2025-12-15T12:03:18.968634-05:00","dependencies":[{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.629723-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-81u","type":"blocks","created_at":"2025-12-15T11:13:21.309771-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-1bx","type":"blocks","created_at":"2025-12-15T11:13:21.380008-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.108531-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-v6kq","title":"8.4.3: Build weekly rollup generation","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:15:19.382008-05:00","updated_at":"2025-12-15T12:03:19.683991-05:00","closed_at":"2025-12-15T12:03:19.683991-05:00","dependencies":[{"issue_id":"gitlab-insights-v6kq","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.49855-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v6kq","depends_on_id":"gitlab-insights-mas3","type":"blocks","created_at":"2025-12-15T11:16:07.961841-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-vcgo","title":"Bug: Sequential user processing in api-polling - could timeout with many users","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":45,"created_at":"2025-12-15T14:11:31.495291-05:00","updated_at":"2025-12-15T14:11:31.495291-05:00"}
{"id":"gitlab-insights-vggi","title":"Test: people.test.ts doesn't test actual router - provides false confidence","description":"","status":"open","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T14:06:53.249676-05:00","updated_at":"2025-12-15T14:06:53.249676-05:00"}
{"id":"gitlab-insights-vjs0","title":"3.3: Build ActivityTimeline component for expanded cards","description":"Create activity timeline component showing chronological events within expanded card. Vertical timeline with left-side colored dots (purple #B794F4 for issues, blue #38BDF8 for MRs, gray for comments), connecting line (2px gray-600), event text (13px), timestamps (11px, gray-400). Distinguish system notes (italic, lower opacity) from user comments (normal). Per-activity unread indicators (bold if isUnread). 12px spacing between items. File: src/components/work-items/ActivityTimeline.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":150,"created_at":"2025-12-15T12:21:56.099889-05:00","updated_at":"2025-12-15T14:17:01.012904-05:00","closed_at":"2025-12-15T14:17:01.012904-05:00","dependencies":[{"issue_id":"gitlab-insights-vjs0","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:56.254155-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-vjs0","depends_on_id":"gitlab-insights-i3u9","type":"blocks","created_at":"2025-12-15T12:21:56.324884-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-vjvm","title":"Bug: FTS rank ordering not preserved by cursor pagination","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":45,"created_at":"2025-12-15T14:07:14.893941-05:00","updated_at":"2025-12-15T14:07:14.893941-05:00"}
{"id":"gitlab-insights-vwas","title":"4.2: Build useMarkAsRead hook for client-side state management","description":"Create React hook managing read state and mutations. useMarkAsRead(): Returns markAsRead(id), markMultipleAsRead(ids[]), optimistic updates (immediately update local cache before server confirms), invalidate queries to refetch unread count. THREE INTERACTION PATHS: (1) Mark Read button click → markAsRead (2) Expand card in-place → markAsRead (3) Open side panel → markAsRead. Handle race conditions (debounce rapid clicks). File: src/hooks/useMarkAsRead.ts","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T12:21:58.549334-05:00","updated_at":"2025-12-15T14:23:00.942327-05:00","closed_at":"2025-12-15T14:23:00.942327-05:00","dependencies":[{"issue_id":"gitlab-insights-vwas","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:58.738123-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-vwas","depends_on_id":"gitlab-insights-gr0w","type":"blocks","created_at":"2025-12-15T12:21:58.819815-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-w2u","title":"3.7 Add skeleton loading states","description":"Add skeleton loading patterns for cards and detail pane.\n\n## Implementation\nCreate or update skeleton components:\n\nCard skeleton:\n+--------------------------------------------------+\n| [====] [================]              [==] [=]  |\n| [========] - [====] - [======]                   |\n| [====] [==] [==]                                 |\n| [================================]               |\n+--------------------------------------------------+\n\nDetail pane skeleton:\n+--------------------------------------------------+\n| [================================]               |\n|--------------------------------------------------|\n| [======]: [========]                             |\n| [======]: [============]                         |\n|--------------------------------------------------|\n| [====================================]           |\n| [====================================]           |\n| [====================]                           |\n|--------------------------------------------------|\n| [Activity skeleton items...]                     |\n+--------------------------------------------------+\n\n## Files\n- Update WorkItemCard.tsx with loading state\n- Update WorkItemList.tsx with skeleton cards\n- Update EventDetail.tsx with skeleton content\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-w2u: Add skeleton loading states\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-w2u","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:47.076438-05:00","updated_at":"2025-12-11T15:09:55.260641-05:00","dependencies":[{"issue_id":"gitlab-insights-w2u","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:40.85034-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-w4r","title":"Story 14.10: Add activity trend visualization","description":"Context: Show activity volume over time.\n\nImplementation:\n\nCreate src/components/activity/ActivityTrend.tsx:\n\n```tsx\ninterface ActivityTrendProps {\n  dateRange: { from: Date; to: Date };\n  filters?: ActivityFilters;\n}\n\nexport function ActivityTrend({ dateRange, filters }: ActivityTrendProps) {\n  // Area chart showing activity volume per day\n  // Color-coded by type\n  // Hover for counts\n}\n```\n\nChart library: Use recharts or similar.\n\nAcceptance criteria:\n- [ ] Shows daily activity counts\n- [ ] Respects filters\n- [ ] Color by event type\n- [ ] Interactive (hover for details)\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:08.331074-05:00","updated_at":"2025-12-12T09:06:08.331074-05:00","dependencies":[{"issue_id":"gitlab-insights-w4r","depends_on_id":"gitlab-insights-2r7","type":"blocks","created_at":"2025-12-15T12:13:55.251629-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-w5dt","title":"MEDIUM: Generic Error instead of TRPCError in work-items markAsRead","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:15:53.834202-05:00","updated_at":"2025-12-16T15:56:44.2181-05:00","closed_at":"2025-12-16T15:56:44.2181-05:00"}
{"id":"gitlab-insights-w83d","title":"Test: Missing cursor security edge case tests (prototype pollution, future dates)","description":"","status":"open","priority":3,"issue_type":"task","estimated_minutes":45,"created_at":"2025-12-15T14:10:34.875615-05:00","updated_at":"2025-12-15T14:10:34.875615-05:00"}
{"id":"gitlab-insights-w9l","title":"Story 11.10: Create TerritoryCard component","description":"**Context:** Show person's active territory in profile views.\n\n**Implementation:**\n\nCreate `src/components/territory/TerritoryCard.tsx`:\n\n```tsx\ninterface TerritoryCardProps {\n  personId: string;\n  timeWindow?: number; // Days, default 30\n}\n\nexport function TerritoryCard({ personId, timeWindow = 30 }: TerritoryCardProps) {\n  // Shows top 5 directories person is active in\n  // With activity counts (commits, MRs)\n  // Expandable to show all\n}\n```\n\nIntegrate into PersonDetailView.\n\n**Acceptance criteria:**\n- [ ] Shows person's active directories\n- [ ] Activity counts displayed\n- [ ] Time window configurable\n- [ ] Expandable list\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:45.819655-05:00","updated_at":"2025-12-12T09:05:45.819655-05:00","dependencies":[{"issue_id":"gitlab-insights-w9l","depends_on_id":"gitlab-insights-do0","type":"blocks","created_at":"2025-12-15T12:13:40.9537-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wc0p","title":"3.7: Implement 'Mark all as read' button in section headers","description":"## Purpose\nAdd 'Mark all as read' button to WorkItemList section headers (Issues section, MRs section) enabling batch dismissal of all unread items in a section.\n\n## Background \u0026 Rationale\nPRD FR23: 'Users can mark all cards in a section as reviewed via a button in the section header.'\n\nThis supports the triage workflow where users may determine an entire category (e.g., all MRs) doesn't need individual attention today. Rather than clicking Mark Read on each card, they can dismiss the section in one action.\n\n## User Journey Support\nJourney 2 (Returning After Long Weekend): 'Taylor works through them methodically - expand, scan activity log, decide if action needed, move on.' Sometimes the decision is 'none of these MRs need my attention' - batch dismissal saves time.\n\n## Implementation Details\n\n### Button Placement\nIn WorkItemList section headers, next to collapse/expand toggle:\n```\n┌─────────────────────────────────────────────────────┐\n│ ▼ Issues (5)                    [Mark all as read] │\n├─────────────────────────────────────────────────────┤\n│ [Card 1]                                           │\n│ [Card 2]                                           │\n└─────────────────────────────────────────────────────┘\n```\n\n### Button Behavior\n- Only visible when section has unread items\n- On click: calls markMultipleAsRead mutation via tRPC\n- Optimistic update: all cards in section immediately show read state\n- Unread count decrements by section unread count\n- Button disappears after action (no unread items remain)\n\n### Accessibility\n- aria-label: 'Mark all issues as read' / 'Mark all merge requests as read'\n- Keyboard accessible (Tab to reach, Enter to activate)\n- Screen reader announcement: 'Marked N items as read'\n\n## Dependencies\n- WorkItemList component exists (3.2)\n- markMultipleAsRead tRPC mutation exists (4.1)\n\n## Deliverables\n1. Button component in section headers\n2. Integration with tRPC batch mutation + optimistic update\n3. Conditional visibility (only when unread \u003e 0)\n4. Unit tests for batch marking behavior","status":"open","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T13:35:27.01454-05:00","updated_at":"2025-12-15T13:39:39.577938-05:00","dependencies":[{"issue_id":"gitlab-insights-wc0p","depends_on_id":"gitlab-insights-qvex","type":"blocks","created_at":"2025-12-15T13:36:39.473242-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-wc0p","depends_on_id":"gitlab-insights-gr0w","type":"blocks","created_at":"2025-12-15T13:36:40.353807-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wdwx","title":"Update Search FTS module with cursor support","description":"Update /src/lib/search/postgres-fts.ts to add cursor pagination with rank-aware ordering. CRITICAL: Include rank in cursor format {rank, createdAt, id} to preserve search quality. Accept performance cost of double rank calculation - search is ABOUT relevance. Update SearchOptions interface, modify searchEvents to handle three-field cursor with proper WHERE clause ordering.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:01.641199-05:00","updated_at":"2025-12-15T13:41:31.201324-05:00","closed_at":"2025-12-15T12:55:32.255861-05:00","dependencies":[{"issue_id":"gitlab-insights-wdwx","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:37.39155-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wjop","title":"3.5: Build context signal badge components (repo, component, keywords)","description":"Create badge components for context signals in collapsed cards. Repo badge: blue tint (hsl(199,50%,30%) bg, hsl(199,92%,80%) text). Component badge: purple tint (hsl(280,50%,30%) bg, hsl(280,67%,80%) text). Keyword badge: gray (hsl(0,0%,25%) bg, hsl(0,0%,75%) text). Typography: 11px text-xs, medium weight 500, 2px 8px padding, 4px border-radius. Display flex gap 8px, wrap. WHY: First-class context signals enable 3-5 second scan-to-decision by surfacing organizational relevance upfront. File: src/components/work-items/ContextBadges.tsx","status":"closed","priority":0,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T12:21:56.867025-05:00","updated_at":"2025-12-15T14:20:03.794824-05:00","closed_at":"2025-12-15T14:20:03.794824-05:00","dependencies":[{"issue_id":"gitlab-insights-wjop","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:57.09578-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-wjop","depends_on_id":"gitlab-insights-brab","type":"blocks","created_at":"2025-12-15T12:21:57.179542-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wk1","title":"Story 10.6: Add getExperts tRPC endpoint","description":"Context: API endpoint for expert queries.\n\nImplementation:\n\nCreate src/server/api/routers/expertise.ts:\n\nexpertiseRouter with two procedures:\n\n1. getExperts (protectedProcedure)\n   Input validation:\n   - filePath: optional string\n   - directory: optional string\n   - searchTerm: optional string\n   - limit: number (default 10)\n   - Must provide at least one of filePath/directory/searchTerm\n   \n   Query implementation:\n   - Call calculateExpertise(ctx.db, ctx.session.userId, input, { limit })\n   - Return ExpertiseResult[]\n\n2. getPersonExpertise (protectedProcedure)\n   Input:\n   - personId: string\n   - limit: number (default 10)\n   \n   Implementation:\n   - Return top directories/files person is expert in\n\nAcceptance criteria:\n- Can query by file path\n- Can query by directory\n- Can query by search term\n- Validates at least one input provided\n- Enforces user isolation\n\nHours: 3","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:31.901641-05:00","updated_at":"2025-12-15T14:31:57.275339-05:00","dependencies":[{"issue_id":"gitlab-insights-wk1","depends_on_id":"gitlab-insights-7ve","type":"blocks","created_at":"2025-12-15T12:13:16.917662-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wpl","title":"Feature 10.1: Expertise Discovery Engine","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":960,"created_at":"2025-12-15T11:09:02.724854-05:00","updated_at":"2025-12-15T12:02:59.275488-05:00","closed_at":"2025-12-15T12:02:59.275488-05:00","dependencies":[{"issue_id":"gitlab-insights-wpl","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.171654-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-xfb","title":"Story 17.4: Show recent commits to area","description":"Display recent commits (last 30 days) to the selected file/area.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Helps understand recent changes during incident response\n\nAcceptance Criteria:\n- Query commits for selected path from last 30 days\n- Display commit list with author, date, message\n- Link to GitLab commit details\n- Show commit diffs if relevant\n- Highlight potentially related changes\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.226854-05:00","updated_at":"2025-12-12T09:04:39.226854-05:00","dependencies":[{"issue_id":"gitlab-insights-xfb","depends_on_id":"gitlab-insights-dj8","type":"blocks","created_at":"2025-12-15T12:14:02.17186-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-xmof","title":"Bug: deduplicatePeople loses avatarUrl when merging records with different completeness","description":"","status":"closed","priority":3,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T14:10:58.440116-05:00","updated_at":"2025-12-16T16:07:17.921191-05:00","closed_at":"2025-12-16T16:07:17.921191-05:00"}
{"id":"gitlab-insights-xnlk","title":"BUG: Rapid event clicks cause React Query cache race conditions","description":"","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T12:10:24.802623-05:00","updated_at":"2025-12-16T16:03:27.743084-05:00","closed_at":"2025-12-16T16:03:27.743084-05:00"}
{"id":"gitlab-insights-xug","title":"Story 11.1: Add file_changes to MR model","description":"**Context:** Store the list of files an MR touches for collision detection.\n\n**Implementation:**\n\nModify Events to track MR files. Add to schema:\n\n```prisma\nmodel MRFileChange {\n  id        String @id @default(cuid())\n  eventId   String\n  event     Event  @relation(fields: [eventId], references: [id], onDelete: Cascade)\n\n  filePath  String\n  changeType String // 'added' | 'modified' | 'deleted' | 'renamed'\n\n  @@index([eventId])\n  @@index([filePath])\n}\n\nmodel Event {\n  // ... existing fields\n  mrFileChanges MRFileChange[]\n}\n```\n\n**Acceptance criteria:**\n- [ ] MRFileChange model added\n- [ ] Linked to Event\n- [ ] Indexed for queries\n- [ ] Migration runs\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:18.678069-05:00","updated_at":"2025-12-12T09:04:18.678069-05:00","dependencies":[{"issue_id":"gitlab-insights-xug","depends_on_id":"gitlab-insights-d1a","type":"blocks","created_at":"2025-12-15T12:14:19.159633-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-xyz8","title":"P1.2: Create migration script to wipe Event data","description":"Write Prisma migration that truncates Event table. Include warning comment explaining clean slate approach. Rationale: Backfilling existing data risks inconsistencies if transformer logic changed. Fresh sync guarantees 100% accuracy with GitLab API. Acceptable for internal tool with brief downtime. Must execute before schema migration to avoid FK constraint violations.","status":"open","priority":2,"issue_type":"task","estimated_minutes":30,"created_at":"2025-12-15T13:26:13.87842-05:00","updated_at":"2025-12-15T13:26:13.87842-05:00"}
{"id":"gitlab-insights-yb2n","title":"Implement error toast notifications","description":"Show toast on pagination failures after TanStack Query retries exhausted. Include 'Scroll down to retry' description and manual 'Retry' action button. Duration: 10s (longer than default 5s). Preserve already-loaded items during errors.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:07.565668-05:00","updated_at":"2025-12-15T12:09:07.565668-05:00"}
{"id":"gitlab-insights-yha4","title":"3.0: Create Zustand store for work item state management","description":"## REVISED: Client-Side State Management Strategy\n\n### Original Plan: Zustand Store\nThe original plan called for a Zustand store with persistence middleware. After review, this is **over-engineered** for our needs.\n\n### Why NOT Zustand\n\n1. **Duplicated State**: The project uses tRPC with React Query, which already caches server state. Adding Zustand creates two sources of truth.\n\n2. **React Query Handles Optimistic Updates**: `useMutation` with `onMutate/onError/onSettled` handles optimistic updates elegantly - no need for Zustand.\n\n3. **Unnecessary Dependency**: Adding Zustand increases bundle size and mental overhead when existing tools suffice.\n\n### Revised Approach: React Query + Local State\n\n**Server State (React Query handles):**\n- Work items list (cached, invalidated on mutations)\n- Read status (server is source of truth)\n- Unread counts (derived from query)\n\n**Client-Only State (React useState/useReducer):**\n- `expandedIds: Set\u003cstring\u003e` - which cards are expanded\n- `selectedId: string | null` - which item is in side panel\n\n**Optimistic Updates via React Query:**\n```typescript\nconst markAsRead = api.workItems.markAsRead.useMutation({\n  onMutate: async (id) =\u003e {\n    // Cancel outgoing refetches\n    await queryClient.cancelQueries(['workItems']);\n    \n    // Snapshot previous value\n    const previous = queryClient.getQueryData(['workItems']);\n    \n    // Optimistically update\n    queryClient.setQueryData(['workItems'], (old) =\u003e \n      old.map(item =\u003e item.id === id ? { ...item, isUnread: false } : item)\n    );\n    \n    return { previous };\n  },\n  onError: (err, id, context) =\u003e {\n    // Rollback on error\n    queryClient.setQueryData(['workItems'], context.previous);\n  },\n  onSettled: () =\u003e {\n    // Refetch to ensure consistency\n    queryClient.invalidateQueries(['workItems']);\n  },\n});\n```\n\n**Local UI State (simple context or component state):**\n```typescript\n// In WorkItemList component or a simple context\nconst [expandedIds, setExpandedIds] = useState\u003cSet\u003cstring\u003e\u003e(new Set());\nconst [selectedId, setSelectedId] = useState\u003cstring | null\u003e(null);\n\nconst toggleExpand = (id: string) =\u003e {\n  setExpandedIds(prev =\u003e {\n    const next = new Set(prev);\n    if (next.has(id)) next.delete(id);\n    else next.add(id);\n    return next;\n  });\n};\n```\n\n### What About Persistence?\n\n**Don't persist read status locally** - the server is the source of truth. If user marks item read on mobile, it should sync to desktop via server, not localStorage.\n\n**Don't persist expanded state** - ephemeral UI state that resets on page load is fine. Users don't expect to return to the same expanded cards.\n\n### Deliverables (Simplified)\n\n1. `useMarkAsRead` hook wrapping tRPC mutation with optimistic updates\n2. `useWorkItemExpansion` hook or context for expand/collapse state  \n3. Integration with existing tRPC/React Query setup\n\n### Dependencies\n- tRPC endpoints exist (Phase 2)\n- WorkItemCard component needs expansion state (Phase 3)\n\n### Estimate Reduced\nOriginal: 120 minutes\nRevised: 60 minutes (simpler implementation)","status":"open","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T13:35:09.734682-05:00","updated_at":"2025-12-15T13:39:10.002221-05:00","dependencies":[{"issue_id":"gitlab-insights-yha4","depends_on_id":"gitlab-insights-zvjd","type":"blocks","created_at":"2025-12-15T13:36:37.718273-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ylc","title":"8.1.5: Add expertise tRPC router endpoints","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:10:56.23158-05:00","updated_at":"2025-12-15T12:03:17.873115-05:00","closed_at":"2025-12-15T12:03:17.873115-05:00","dependencies":[{"issue_id":"gitlab-insights-ylc","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.044144-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ylc","depends_on_id":"gitlab-insights-dxn","type":"blocks","created_at":"2025-12-15T11:11:41.103759-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-z5uh","title":"8.4.4: Build ActivityDigestView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:15:38.884185-05:00","updated_at":"2025-12-15T12:03:19.751145-05:00","closed_at":"2025-12-15T12:03:19.751145-05:00","dependencies":[{"issue_id":"gitlab-insights-z5uh","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.569719-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-z5uh","depends_on_id":"gitlab-insights-7x83","type":"blocks","created_at":"2025-12-15T11:16:08.240115-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-z5uh","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.246209-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-zdlk","title":"Perform accessibility testing","description":"Verify screen reader announces loading states, keyboard navigation works across pages, focus management during page loads, ARIA labels on loading indicators. Test with NVDA/JAWS and keyboard-only navigation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:06.758631-05:00","updated_at":"2025-12-15T12:09:06.758631-05:00"}
{"id":"gitlab-insights-zgca","title":"Bug: parseClosesIssueIds pattern misses valid GitLab syntax (colon, URLs)","description":"","status":"open","priority":3,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T14:11:22.107334-05:00","updated_at":"2025-12-15T14:11:22.107334-05:00"}
{"id":"gitlab-insights-zjm3","title":"Performance: N+1 query pattern in people.getById - 3 COUNT queries per person","description":"","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":45,"created_at":"2025-12-15T14:06:50.012-05:00","updated_at":"2025-12-16T16:01:31.944347-05:00","closed_at":"2025-12-16T16:01:31.944347-05:00"}
{"id":"gitlab-insights-zup3","title":"2.3: Create tRPC endpoint getWorkItemWithActivity","description":"Create tRPC endpoint returning single work item with full activity timeline for detail pane. Fetch work item with ALL childEvents (chronological asc for timeline), mark each activity as read/unread based on lastReadAt, distinguish system notes from user comments. Include related work items (closedBy, closes, mentions) when requested. File: src/server/api/routers/work-items.ts","status":"closed","priority":0,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T12:21:54.377099-05:00","updated_at":"2025-12-15T14:06:12.557459-05:00","closed_at":"2025-12-15T14:06:12.557459-05:00","dependencies":[{"issue_id":"gitlab-insights-zup3","depends_on_id":"gitlab-insights-hxmx","type":"parent-child","created_at":"2025-12-15T12:21:54.532872-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-zup3","depends_on_id":"gitlab-insights-brab","type":"blocks","created_at":"2025-12-15T12:21:54.602178-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-zvjd","title":"2.0: Define TypeScript interfaces for WorkItem, ActivitySummary, ReadMetadata","description":"## CANCELLED - Duplicate of Existing Bead\n\nThis bead duplicates gitlab-insights-brab (2.1: Create TypeScript types for WorkItem and ActivitySummary).\n\nThe existing bead gitlab-insights-brab should be updated to include all necessary interfaces:\n- WorkItem\n- ActivitySummary  \n- WorkItemEvent\n- Participant\n- Component props interfaces\n\nNo need for a separate bead.","status":"open","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T13:34:56.405982-05:00","updated_at":"2025-12-15T13:38:51.240952-05:00","dependencies":[{"issue_id":"gitlab-insights-zvjd","depends_on_id":"gitlab-insights-fx13","type":"blocks","created_at":"2025-12-15T13:36:36.878728-05:00","created_by":"daemon"}]}
