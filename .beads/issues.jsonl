{"id":"gitlab-insights-05v","title":"8.3.2: Implement collision detection algorithm","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:13:45.847952-05:00","updated_at":"2025-12-15T12:03:19.203473-05:00","closed_at":"2025-12-15T12:03:19.203473-05:00","dependencies":[{"issue_id":"gitlab-insights-05v","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.326141-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-05v","depends_on_id":"gitlab-insights-9ts","type":"blocks","created_at":"2025-12-15T11:14:31.765262-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-07y","title":"8.1.3: Build expertise scoring algorithm","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:10:33.776462-05:00","updated_at":"2025-12-15T12:03:17.641537-05:00","closed_at":"2025-12-15T12:03:17.641537-05:00","dependencies":[{"issue_id":"gitlab-insights-07y","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.836433-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-07y","depends_on_id":"gitlab-insights-a0y","type":"blocks","created_at":"2025-12-15T11:11:40.816304-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0f6","title":"Phase 5: Migration Path","description":"Smooth transition with user preference toggle between views.\n\n## Goal\nAllow users to switch between grouped (new) and flat (old) views.\n\n## On Completion (Epic)\nWhen all Phase 5 tasks complete:\n1. All ACs should be marked 'complete' in plan file\n2. bd close gitlab-insights-0f6","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:25:06.844896-05:00","updated_at":"2025-12-11T15:10:35.452296-05:00","dependencies":[{"issue_id":"gitlab-insights-0f6","depends_on_id":"gitlab-insights-ntz","type":"blocks","created_at":"2025-12-11T14:25:36.31061-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0qd","title":"Story 12.10: Integrate embedding into Event creation","description":"**Context:** Generate embeddings when new Events are stored.\n\n**Implementation:**\n\nModify `src/server/services/event-transformer.ts` to generate embeddings after storing events:\n- Only for issues and MRs (exclude comments)\n- Queue embedding generation for each new event\n\n**Options for async processing:**\n- Inngest job for background embedding\n- Direct inline (slower but simpler)\n- Batch at end of refresh\n\n**Acceptance criteria:**\n- [ ] New Events get embeddings\n- [ ] Does not block event storage\n- [ ] Comments excluded\n- [ ] Error handling for failures\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:43.636439-05:00","updated_at":"2025-12-12T09:05:43.636439-05:00","dependencies":[{"issue_id":"gitlab-insights-0qd","depends_on_id":"gitlab-insights-agx","type":"blocks","created_at":"2025-12-15T12:13:43.63436-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0rb","title":"Story 14.6: Add topic filter","description":"Context: Filter activity by keywords/topics.\n\nImplementation:\n\n```tsx\n\u003cFilterSection title=\"Topics\"\u003e\n  \u003cTopicInput\n    topics={filters.topics}\n    onChange={(topics) =\u003e setFilters({ ...filters, topics })}\n    suggestions={recentSearchTerms}\n  /\u003e\n\u003c/FilterSection\u003e\n```\n\nTopic matching:\n- FTS search on title + body\n- Label matching\n- File path matching\n\nAcceptance criteria:\n- [ ] Can add topic keywords\n- [ ] Suggests from search history\n- [ ] FTS matching\n- [ ] Multiple topics (OR logic)\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:13.746275-05:00","updated_at":"2025-12-12T09:05:13.746275-05:00","dependencies":[{"issue_id":"gitlab-insights-0rb","depends_on_id":"gitlab-insights-7n4","type":"blocks","created_at":"2025-12-15T12:13:54.947423-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0rj","title":"Phase 2: Enhanced Data Layer","description":"Create new tRPC endpoints that leverage relationships for grouped queries.\n\n## Goal\nBuild data layer to serve hierarchical work item data to UI.\n\n## Key Files\n- src/server/api/routers/events.ts\n- src/server/services/event-relationships.ts (new)\n\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion (Epic)\nWhen all Phase 2 tasks complete:\n1. Verify AC-5 is marked 'implemented' in plan file\n2. bd close gitlab-insights-0rj","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:24:24.796401-05:00","updated_at":"2025-12-11T15:08:37.781133-05:00","dependencies":[{"issue_id":"gitlab-insights-0rj","depends_on_id":"gitlab-insights-9mx","type":"blocks","created_at":"2025-12-11T14:25:35.68822-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0w4","title":"Story 14.4: Add territory filter","description":"Context: Filter activity to user's areas of interest.\n\nImplementation:\n\nAdd to ActivityViewClient:\n\n```tsx\n// Territory filter\n\u003cFilterSection title=\"Territory\"\u003e\n  \u003cDirectoryPicker\n    selected={filters.territories}\n    onChange={(dirs) =\u003e setFilters({ ...filters, territories: dirs })}\n    suggestions={userTerritories} // From Epic 11\n  /\u003e\n\u003c/FilterSection\u003e\n```\n\nSuggestions source:\n- User's recent commit directories\n- User's open MR directories\n- Manually added directories\n\nAcceptance criteria:\n- [ ] Can select directories to watch\n- [ ] Suggests based on user activity\n- [ ] Filter applies to feed\n- [ ] Multiple directories supported\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:56.041834-05:00","updated_at":"2025-12-12T09:04:56.041834-05:00","dependencies":[{"issue_id":"gitlab-insights-0w4","depends_on_id":"gitlab-insights-8zv","type":"blocks","created_at":"2025-12-15T12:13:54.79416-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0yt","title":"Story 16.2: Add suggested reviewers based on expertise","description":"Add functionality to suggest reviewers based on file expertise, excluding the MR author.\n\n**Context:** Use expertise scoring from Epic 10 to identify people who know the files being changed in an MR. This helps speed up review assignment by surfacing domain experts.\n\n**Implementation:**\n- Query File expertise for files touched in the MR\n- Rank people by expertise score\n- Filter out the MR author\n- Return ranked list of suggested reviewers\n\n**Acceptance criteria:**\n- Suggested reviewers list excludes MR author\n- Reviewers ranked by expertise on touched files\n- Returns meaningful results for MRs with known file expertise\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:48.618052-05:00","updated_at":"2025-12-12T09:04:48.618052-05:00","dependencies":[{"issue_id":"gitlab-insights-0yt","depends_on_id":"gitlab-insights-uum","type":"blocks","created_at":"2025-12-15T12:13:59.837269-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-0zb","title":"3.8 Add empty states","description":"Add empty state displays for various scenarios.\n\n## Implementation\n\nNo open issues:\n\"No open issues\"\n\nNo open MRs:\n\"No open merge requests\"\n\nNo search results:\n\"No items match your search. Try adjusting your query or clearing filters.\"\n\nSection with 0 items:\nShow section header with (0) count, collapsed by default\n\n## Files\n- WorkItemList.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-0zb: Add empty states\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-0zb","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:47.305803-05:00","updated_at":"2025-12-11T15:09:55.488702-05:00","dependencies":[{"issue_id":"gitlab-insights-0zb","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:41.091576-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-12d","title":"Story 14.1: Create activity-relevance-scorer service","description":"Context: Score events by relevance to user's interests.\n\nImplementation:\n\nCreate src/server/services/activity-relevance-scorer.ts:\n\n```typescript\ninterface RelevanceScore {\n  territoryMatch: number;  // 0-1\n  personMatch: number;     // 0-1\n  topicMatch: number;      // 0-1\n  recency: number;         // 0-1\n  totalScore: number;      // Weighted\n}\n\nasync function scoreEventRelevance(\n  db: PrismaClient,\n  userId: string,\n  event: Event,\n  userContext: {\n    territories: string[];      // User's active directories\n    watchedPeople: string[];    // People user follows\n    watchedTopics: string[];    // Topics user watches\n  }\n): Promise\u003cRelevanceScore\u003e\n```\n\nScoring:\n- Territory: Does event touch user's directories?\n- Person: Is author someone user watches?\n- Topic: Does content match watched keywords?\n- Recency: How recent? (1 = today, 0 = 30+ days)\n\nAcceptance criteria:\n- [ ] Scores all relevance signals\n- [ ] Weights match spec\n- [ ] Returns breakdown\n- [ ] Efficient for batch scoring\n\nHours: 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:20.820554-05:00","updated_at":"2025-12-12T09:04:20.820554-05:00","dependencies":[{"issue_id":"gitlab-insights-12d","depends_on_id":"gitlab-insights-784","type":"blocks","created_at":"2025-12-15T12:14:19.310427-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-162","title":"Story 9.8: Add FileExplorer component","description":"**Context:** UI to browse files, see commit history, and discover who worked on them.\n\n**Implementation:**\n\nCreate `src/app/(auth)/files/page.tsx` and `src/components/files/FileExplorer.tsx`:\n\n```tsx\ninterface FileExplorerProps {\n  projectId?: string; // If provided, filter to this project\n}\n\nexport function FileExplorer({ projectId }: FileExplorerProps) {\n  // Tree view of directories\n  // Click directory to expand\n  // Click file to see details\n  // File details show:\n  //   - Commit history (recent commits)\n  //   - Contributors (people who touched it)\n  //   - Last modified date\n}\n```\n\n**Components needed:**\n- `FileTree` - Directory tree navigation\n- `FileDetailPanel` - Right pane showing file info\n- `CommitList` - List of commits for a file\n- `ContributorList` - People who touched file\n\n**Acceptance criteria:**\n- [ ] Page renders at /files\n- [ ] Can browse directory tree\n- [ ] Clicking file shows details\n- [ ] Shows commit history\n- [ ] Shows contributors\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:51.383857-05:00","updated_at":"2025-12-12T09:05:51.383857-05:00","dependencies":[{"issue_id":"gitlab-insights-162","depends_on_id":"gitlab-insights-1n3","type":"blocks","created_at":"2025-12-15T12:13:14.279338-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1a5","title":"8.2.1: Implement decision keyword extraction","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:12:12.733892-05:00","updated_at":"2025-12-15T12:03:18.286974-05:00","closed_at":"2025-12-15T12:03:18.286974-05:00","dependencies":[{"issue_id":"gitlab-insights-1a5","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.343198-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1bx","title":"8.2.2: Build decision timeline view","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:12:25.938613-05:00","updated_at":"2025-12-15T12:03:18.548866-05:00","closed_at":"2025-12-15T12:03:18.548866-05:00","dependencies":[{"issue_id":"gitlab-insights-1bx","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.418731-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-1bx","depends_on_id":"gitlab-insights-1a5","type":"blocks","created_at":"2025-12-15T11:13:20.990219-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1hw","title":"Story 17.7: Create shareable incident response URL","description":"Create shareable URL functionality for incident response pages.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Enables team collaboration during incidents\n\nAcceptance Criteria:\n- Generate unique URLs for each incident response view\n- Encode path/context in URL parameters\n- Support direct navigation via shared URL\n- Show all relevant info when URL is accessed\n- Add copy-to-clipboard functionality for easy sharing\n\nEstimated Hours: 2h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.925082-05:00","updated_at":"2025-12-12T09:04:39.925082-05:00","dependencies":[{"issue_id":"gitlab-insights-1hw","depends_on_id":"gitlab-insights-p16","type":"blocks","created_at":"2025-12-15T12:14:02.394944-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-1n3","title":"Story 9.7: Add getFileActivity tRPC endpoint","description":"**Context:** API to query who has touched a file and what commits affected it.\n\n**Implementation:**\n\nCreate `src/server/api/routers/files.ts`:\n\n```typescript\nexport const filesRouter = createTRPCRouter({\n  // Get file by path\n  getByPath: protectedProcedure\n    .input(z.object({\n      projectId: z.string(),\n      path: z.string()\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return File with commit count, last modified\n    }),\n\n  // Get commits that touched a file\n  getCommits: protectedProcedure\n    .input(z.object({\n      fileId: z.string(),\n      limit: z.number().default(50)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Commits with Person info, ordered by date\n    }),\n\n  // Get people who touched a file (aggregated)\n  getContributors: protectedProcedure\n    .input(z.object({\n      fileId: z.string()\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Person[] with commit counts\n    }),\n\n  // List files in a directory\n  listDirectory: protectedProcedure\n    .input(z.object({\n      projectId: z.string(),\n      directory: z.string()\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return File[] in directory\n    })\n});\n```\n\n**Acceptance criteria:**\n- [ ] Can get file by path\n- [ ] Can get commits for a file\n- [ ] Can get contributors for a file\n- [ ] Can list directory contents\n- [ ] All enforce user isolation\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:36.424518-05:00","updated_at":"2025-12-12T09:05:36.424518-05:00","dependencies":[{"issue_id":"gitlab-insights-1n3","depends_on_id":"gitlab-insights-edm","type":"blocks","created_at":"2025-12-15T12:13:14.205378-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-203","title":"8.3.4: Build TerritoryRadarView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:14:16.87553-05:00","updated_at":"2025-12-15T12:03:19.396344-05:00","closed_at":"2025-12-15T12:03:19.396344-05:00","dependencies":[{"issue_id":"gitlab-insights-203","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.476139-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-203","depends_on_id":"gitlab-insights-46s","type":"blocks","created_at":"2025-12-15T11:14:32.120207-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-203","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.181049-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-20t","title":"Story 10.1: Create expertise-scorer service with decay function","description":"Context: Core scoring service that will be used across all expertise queries.\n\nImplementation:\n\nCreate src/server/services/expertise-scorer.ts with:\n- DecayConfig interface (commits 3.0/90d, mrsAuthored 4.0/120d, mrsReviewed 2.0/60d, issuesAssigned 2.0/45d, comments 0.5/30d)\n- DEFAULT_DECAY_CONFIG constant\n- decay(days, tau) function using Math.exp(-days / tau)\n- daysSince(date) helper\n- calculateSignalScore(count, date, config) function\n\nAcceptance criteria:\n- Decay function implemented correctly\n- Configurable weights and tau values\n- Unit tests for decay calculations\n- Default config matches spec\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:22.535421-05:00","updated_at":"2025-12-12T09:04:22.535421-05:00","dependencies":[{"issue_id":"gitlab-insights-20t","depends_on_id":"gitlab-insights-d1a","type":"blocks","created_at":"2025-12-15T12:14:19.079376-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-21d","title":"8.1.6: Build ExpertSearchView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:11:07.35292-05:00","updated_at":"2025-12-15T12:03:18.035009-05:00","closed_at":"2025-12-15T12:03:18.035009-05:00","dependencies":[{"issue_id":"gitlab-insights-21d","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.128422-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-21d","depends_on_id":"gitlab-insights-ylc","type":"blocks","created_at":"2025-12-15T11:11:41.17542-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-21d","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.039102-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-27c","title":"Story 13.5: Add discussion thread aggregation","description":"**Context:** Group related Events into discussion threads.\n\n**Implementation:**\n\nCreate `src/server/services/thread-aggregator.ts`:\n\n```typescript\ninterface DiscussionThread {\n  rootEvent: Event;           // Issue or MR\n  comments: Event[];          // Related comments\n  participants: Person[];     // All people involved\n  dateRange: { start: Date; end: Date };\n}\n\nasync function aggregateThread(\n  db: PrismaClient,\n  userId: string,\n  eventId: string\n): Promise\u003cDiscussionThread\u003e\n```\n\n**Aggregation logic:**\n1. If comment: find parent issue/MR\n2. Find all comments on the parent\n3. Extract unique participants\n4. Calculate date range\n\n**Acceptance criteria:**\n- [ ] Groups comments with parent\n- [ ] Extracts participants\n- [ ] Calculates date range\n- [ ] Works for issues and MRs\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:55.032297-05:00","updated_at":"2025-12-12T09:04:55.032297-05:00","dependencies":[{"issue_id":"gitlab-insights-27c","depends_on_id":"gitlab-insights-cf4","type":"blocks","created_at":"2025-12-15T12:13:45.862603-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2gt","title":"Story 8.7: Add \"Who touched?\" query","description":"**Context:** Enable the core expert discovery query: \"Given a file path or search term, who has touched related Events?\"\n\n**Implementation:**\n\nAdd to `src/server/api/routers/people.ts`:\n\n```typescript\n// Find people whose Events match a search term\nwhoTouched: protectedProcedure\n  .input(z.object({\n    query: z.string().min(1),\n    limit: z.number().default(10)\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    // 1. Search Events matching query (use existing FTS)\n    // 2. Group by author\n    // 3. Count occurrences per author\n    // 4. Return ranked Person[] with match counts\n  })\n```\n\n**Ranking logic:**\n- Count how many matching Events each person authored\n- More matches = higher rank\n- Return Person with `matchCount` and sample matching Events\n\n**Acceptance criteria:**\n- [ ] Can query with file path (e.g., \"src/auth/\")\n- [ ] Can query with keyword (e.g., \"authentication\")\n- [ ] Returns ranked people by relevance\n- [ ] Includes match count per person\n- [ ] Performance acceptable (\u003c1s for typical queries)\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:04.698323-05:00","updated_at":"2025-12-12T09:06:04.698323-05:00","dependencies":[{"issue_id":"gitlab-insights-2gt","depends_on_id":"gitlab-insights-9pu","type":"blocks","created_at":"2025-12-15T12:13:11.632874-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2o7","title":"8.2.4: Enhance FTS with decision boosting","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:12:51.008678-05:00","updated_at":"2025-12-15T12:03:18.883629-05:00","closed_at":"2025-12-15T12:03:18.883629-05:00","dependencies":[{"issue_id":"gitlab-insights-2o7","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.561142-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-2o7","depends_on_id":"gitlab-insights-1a5","type":"blocks","created_at":"2025-12-15T11:13:21.067664-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2q6","title":"Story 13.1: Enhance FTS to weight content types","description":"**Context:** Title matches should rank higher than body matches.\n\n**Implementation:**\n\nUpdate `src/lib/search/postgres-fts.ts`:\n\n```sql\n-- Weighted search\nSELECT\n  e.id,\n  e.title,\n  ts_rank(\n    setweight(to_tsvector('english', e.title), 'A') ||\n    setweight(to_tsvector('english', COALESCE(e.body, '')), 'B'),\n    plainto_tsquery('english', $1)\n  ) as rank\nFROM \"Event\" e\nWHERE\n  to_tsvector('english', e.title || ' ' || COALESCE(e.body, ''))\n  @@ plainto_tsquery('english', $1)\nORDER BY rank DESC\n```\n\n**Weight meanings:**\n- A (title): Highest weight\n- B (body): Medium weight\n- C, D: Lower weights (for future use)\n\n**Acceptance criteria:**\n- [ ] Title matches ranked higher\n- [ ] Search still fast\n- [ ] Existing search tests pass\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.170099-05:00","updated_at":"2025-12-12T09:04:54.170099-05:00","dependencies":[{"issue_id":"gitlab-insights-2q6","depends_on_id":"gitlab-insights-784","type":"blocks","created_at":"2025-12-15T12:14:19.23516-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2r7","title":"Story 14.9: Persist filter preferences","description":"Context: Save user's filter settings.\n\nImplementation:\n\nAdd to User model:\n```prisma\nmodel User {\n  // ... existing\n  activityFilters Json? // { territories: [], people: [], topics: [] }\n}\n```\n\nSave/load on ActivityView:\n\n```typescript\n// Load saved filters on mount\nconst savedFilters = user.activityFilters;\n\n// Save when filters change\nconst debouncedSave = useDebouncedCallback((filters) =\u003e {\n  updateUserPrefs.mutate({ activityFilters: filters });\n}, 1000);\n```\n\nAcceptance criteria:\n- [ ] Filters saved to user prefs\n- [ ] Restored on page load\n- [ ] Debounced saves\n- [ ] Works across sessions\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:57.874628-05:00","updated_at":"2025-12-12T09:05:57.874628-05:00","dependencies":[{"issue_id":"gitlab-insights-2r7","depends_on_id":"gitlab-insights-n04","type":"blocks","created_at":"2025-12-15T12:13:55.177762-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-2t2","title":"Story 12.6: Implement combined similarity score","description":"**Context:** Combine embedding similarity with label and file overlap.\n\n**Implementation:**\n\nExtend similarity-scorer with CombinedSimilarity interface and combineSimilarityScores function.\n\n**Algorithm:**\n```\ntotalScore = titleSim * 0.35 + descSim * 0.35 + labelJaccard * 0.15 + fileOverlap * 0.15\n```\n\nUses Jaccard similarity (|intersection| / |union|) for labels and files.\n\n**Acceptance criteria:**\n- [ ] Combines all signals\n- [ ] Weights match spec (0.35, 0.35, 0.15, 0.15)\n- [ ] Returns breakdown\n- [ ] Handles missing labels/files\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:06.843963-05:00","updated_at":"2025-12-12T09:05:06.843963-05:00","dependencies":[{"issue_id":"gitlab-insights-2t2","depends_on_id":"gitlab-insights-63u","type":"blocks","created_at":"2025-12-15T12:13:43.216433-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-38z","title":"BUG: useScrollRestoration saves to wrong key due to stale closure","description":"## Root Cause\nIn src/hooks/useScrollRestoration.ts, the `handleScroll` callback (lines 68-81) captures `key` via closure but is created with an empty useMemo dependency array:\n\n```typescript\nconst handleScroll = useMemo(() =\u003e {\n  return (e: React.UIEvent\u003cHTMLDivElement\u003e) =\u003e {\n    // ...\n    sessionStorage.setItem(\\`scroll-${key}\\`, scrollY.toString());\n  };\n// eslint-disable-next-line react-hooks/exhaustive-deps\n}, []); // \u003c-- Empty deps!\n```\n\nThe comment on lines 66-67 claims this is intentional and correct, but it's WRONG. The closure captures the INITIAL value of `key` when the component mounts. When `key` changes (e.g., switching search queries), the callback still saves scroll position to the OLD key.\n\n## Impact\nWhen a user switches between different search queries or views:\n1. Scroll positions are saved to the wrong sessionStorage key\n2. Scroll restoration works incorrectly - may restore wrong position or not restore at all\n3. User experience degraded when navigating between different filtered views\n\n## Suggested Fix\nOption 1: Add `key` to useMemo dependencies (recreates callback when key changes):\n```typescript\n}, [key]);\n```\n\nOption 2: Use a ref to always read current value (keeps stable callback):\n```typescript\nconst keyRef = useRef(key);\nkeyRef.current = key; // Update on each render\n\nconst handleScroll = useMemo(() =\u003e {\n  return (e) =\u003e {\n    sessionStorage.setItem(\\`scroll-${keyRef.current}\\`, ...);\n  };\n}, []);\n```\n\nOption 2 is preferred as it maintains a stable callback reference while still accessing the current key.\n\n## Files Affected\n- src/hooks/useScrollRestoration.ts (lines 68-81)","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":20,"created_at":"2025-12-15T09:41:25.240086-05:00","updated_at":"2025-12-15T09:52:39.419415-05:00","closed_at":"2025-12-15T09:52:39.419415-05:00"}
{"id":"gitlab-insights-3gs","title":"Story 12.3: Create embedding-generator service","description":"**Context:** Generate embeddings for issue/MR title and description.\n\n**Implementation:**\n\nCreate `src/server/services/embedding-generator.ts`:\n\n```typescript\n// Using transformers.js or API call\nasync function generateEmbedding(text: string): Promise\u003cnumber[]\u003e\n\n// Combine title + description for embedding\nfunction prepareTextForEmbedding(title: string, body: string | null): string {\n  const combined = body ? `${title}\\n\\n${body}` : title;\n  // Truncate to model's max length (512 tokens typically)\n  return truncateToTokens(combined, 400);\n}\n\n// Generate and store embedding for an Event\nasync function embedEvent(\n  db: PrismaClient,\n  eventId: string\n): Promise\u003cvoid\u003e\n```\n\n**Model options:**\n- `Xenova/all-MiniLM-L6-v2` via transformers.js (runs in Node)\n- API call to Hugging Face Inference\n\n**Acceptance criteria:**\n- [ ] Can generate embeddings for text\n- [ ] Handles title + description\n- [ ] Truncates long text\n- [ ] Stores in Event.embedding\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.971177-05:00","updated_at":"2025-12-12T09:04:39.971177-05:00","dependencies":[{"issue_id":"gitlab-insights-3gs","depends_on_id":"gitlab-insights-dwy","type":"blocks","created_at":"2025-12-15T12:13:42.991802-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3kr","title":"Story 11.7: Create getCollisions endpoint","description":"**Context:** API to check collisions for an MR.\n\n**Implementation:**\n\nAdd to territory router:\n\n```typescript\n// Get collisions for an MR\ngetCollisions: protectedProcedure\n  .input(z.object({\n    mrEventId: z.string(),\n    threshold: z.number().default(0.3)\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    return findCollisions(ctx.db, ctx.session.userId, input.mrEventId, {\n      threshold: input.threshold,\n      includeExpertise: true\n    });\n  }),\n\n// Check if any open MRs have collisions (for dashboard alert)\ngetActiveCollisions: protectedProcedure\n  .input(z.object({\n    threshold: z.number().default(0.3)\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    // Find user's open MRs\n    // Check each for collisions\n    // Return MRs with collision counts\n  })\n```\n\n**Acceptance criteria:**\n- [ ] Can check single MR for collisions\n- [ ] Can get all active collisions\n- [ ] Respects threshold\n- [ ] Returns severity scores\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:18.546697-05:00","updated_at":"2025-12-12T09:05:18.546697-05:00","dependencies":[{"issue_id":"gitlab-insights-3kr","depends_on_id":"gitlab-insights-dik","type":"blocks","created_at":"2025-12-15T12:13:40.730046-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3oq","title":"Story 9.4: Create commit-transformer service","description":"**Context:** Transform GitLab commit API responses into our database models.\n\n**Implementation:**\n\nCreate `src/server/services/commit-transformer.ts`:\n\n```typescript\ninterface TransformResult {\n  commit: Prisma.CommitCreateInput;\n  files: { path: string; changeType: string }[];\n}\n\n// Transform GitLab commit to our format\nfunction transformCommit(\n  gitlabCommit: GitLabCommit,\n  diff: GitLabCommitDiff[],\n  userId: string,\n  projectId: string\n): TransformResult\n\n// Determine change type from diff entry\nfunction getChangeType(diff: GitLabCommitDiff): 'added' | 'modified' | 'deleted' | 'renamed'\n\n// Store commits with their files\nasync function storeCommits(\n  db: PrismaClient,\n  userId: string,\n  commits: TransformResult[]\n): Promise\u003c{ stored: number; skipped: number }\u003e\n```\n\n**Change type logic:**\n```typescript\nfunction getChangeType(diff: GitLabCommitDiff) {\n  if (diff.new_file) return 'added';\n  if (diff.deleted_file) return 'deleted';\n  if (diff.renamed_file) return 'renamed';\n  return 'modified';\n}\n```\n\n**Acceptance criteria:**\n- [ ] Transforms GitLab commits to our format\n- [ ] Extracts files from diff\n- [ ] Determines change types correctly\n- [ ] Stores with deduplication (skip existing SHAs)\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:58.439015-05:00","updated_at":"2025-12-12T09:04:58.439015-05:00","dependencies":[{"issue_id":"gitlab-insights-3oq","depends_on_id":"gitlab-insights-b0x","type":"blocks","created_at":"2025-12-15T12:13:13.927216-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3uo","title":"Story 13.9: Add related decisions suggestions","description":"**Context:** When viewing a decision, show related discussions.\n\n**Implementation:**\n\nAdd to ThreadView:\n\n```tsx\n// After main thread content\n\u003cRelatedDecisions eventId={thread.rootEvent.id} /\u003e\n```\n\nCreate `src/components/decisions/RelatedDecisions.tsx`:\n\n```tsx\nexport function RelatedDecisions({ eventId }: { eventId: string }) {\n  const { data } = trpc.similarity.getSimilar.useQuery({\n    eventId,\n    threshold: 0.6,\n    limit: 5\n  });\n\n  return (\n    \u003cPanel title=\"Related Discussions\"\u003e\n      {data?.map(item =\u003e (\n        \u003cRelatedDecisionCard key={item.id} item={item} /\u003e\n      ))}\n    \u003c/Panel\u003e\n  );\n}\n```\n\n**Acceptance criteria:**\n- [ ] Shows related discussions\n- [ ] Uses similarity scoring\n- [ ] Links to other threads\n- [ ] Hidden when none found\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:57.029817-05:00","updated_at":"2025-12-12T09:04:57.029817-05:00","dependencies":[{"issue_id":"gitlab-insights-3uo","depends_on_id":"gitlab-insights-8hl","type":"blocks","created_at":"2025-12-15T12:13:46.167188-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-3xi","title":"Story 8.1: Add Person model to Prisma schema","description":"**Context:** Currently authors are stored as strings on Events. We need a first-class Person entity to enable expertise tracking, relationship queries, and person-centric views.\n\n**Implementation:**\n\nAdd to `prisma/schema.prisma`:\n\n```prisma\nmodel Person {\n  id            String   @id @default(cuid())\n  userId        String   // The app user who owns this data\n  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  gitlabId      Int      // GitLab user ID\n  username      String   // GitLab username\n  name          String?  // Display name (may be null)\n  email         String?  // Email (may be null/hidden)\n  avatarUrl     String?  // Avatar URL\n\n  createdAt     DateTime @default(now())\n  updatedAt     DateTime @updatedAt\n\n  @@unique([userId, gitlabId])\n  @@index([userId])\n  @@index([userId, username])\n}\n```\n\nAlso add relation to User model:\n```prisma\nmodel User {\n  // ... existing fields\n  people        Person[]\n}\n```\n\n**Acceptance criteria:**\n- [ ] Person model added with all fields\n- [ ] Unique constraint on [userId, gitlabId] prevents duplicates\n- [ ] Migration runs successfully\n- [ ] No breaking changes to existing Event model\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:29.55181-05:00","updated_at":"2025-12-12T09:04:29.55181-05:00"}
{"id":"gitlab-insights-3zi","title":"Story 11.11: Add configurable collision threshold","description":"**Context:** Allow user to adjust collision sensitivity.\n\n**Implementation:**\n\nAdd to settings:\n\n```tsx\n// In Settings page\n\u003cFormField label=\"Collision Alert Threshold\"\u003e\n  \u003cSlider\n    min={0.1}\n    max={0.9}\n    step={0.1}\n    value={threshold}\n    onChange={setThreshold}\n  /\u003e\n  \u003cHelpText\u003e\n    Lower = more alerts, Higher = only major collisions\n    (Default: 0.3)\n  \u003c/HelpText\u003e\n\u003c/FormField\u003e\n```\n\nStore in user preferences.\n\n**Acceptance criteria:**\n- [ ] Can adjust threshold in settings\n- [ ] Saved to user prefs\n- [ ] Used in collision queries\n- [ ] Help text explains impact\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:52.825673-05:00","updated_at":"2025-12-12T09:05:52.825673-05:00","dependencies":[{"issue_id":"gitlab-insights-3zi","depends_on_id":"gitlab-insights-w9l","type":"blocks","created_at":"2025-12-15T12:13:41.036148-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-46s","title":"8.3.5: Add territory tRPC router","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:14:24.640967-05:00","updated_at":"2025-12-15T12:03:19.470824-05:00","closed_at":"2025-12-15T12:03:19.470824-05:00","dependencies":[{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.542798-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-9ts","type":"blocks","created_at":"2025-12-15T11:14:31.907065-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-05v","type":"blocks","created_at":"2025-12-15T11:14:31.979466-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-46s","depends_on_id":"gitlab-insights-a86","type":"blocks","created_at":"2025-12-15T11:14:32.050563-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-4kf","title":"BUG: auth-client.ts has hardcoded localhost:3000 baseURL instead of using relative path","description":"## Root Cause\nIn src/lib/auth-client.ts, the better-auth client is configured with a hardcoded baseURL:\n```typescript\nbaseURL: \"http://localhost:3000\"\n```\n\nThis works in local development but will break in production deployments.\n\n## Impact\nAuthentication will fail in any non-localhost environment (staging, production) because API calls will be directed to localhost:3000 instead of the actual server.\n\n## Suggested Fix\nRemove the baseURL or use an empty string to default to the current origin:\n```typescript\nbaseURL: \"\"\n```\n\nOr use window.location.origin for explicit clarity:\n```typescript\nbaseURL: typeof window !== 'undefined' ? window.location.origin : ''\n```\n\nNote: The server-side auth.ts properly uses env.BETTER_AUTH_URL but the client doesn't have access to server env vars.\n\n## Files Affected\n- src/lib/auth-client.ts","status":"closed","priority":2,"issue_type":"bug","estimated_minutes":15,"created_at":"2025-12-15T09:38:42.887583-05:00","updated_at":"2025-12-15T09:52:38.16125-05:00","closed_at":"2025-12-15T09:52:38.16125-05:00"}
{"id":"gitlab-insights-4zq","title":"Story 11.8: Create TerritoryView page","description":"**Context:** Dedicated page showing activity heatmap and collision alerts.\n\n**Implementation:**\n\nCreate `src/app/(auth)/territory/page.tsx`:\n\n```tsx\nexport default async function TerritoryPage() {\n  await requireAuth();\n  return \u003cTerritoryViewClient /\u003e;\n}\n```\n\nCreate `src/components/territory/TerritoryViewClient.tsx`:\n\n```tsx\nexport function TerritoryViewClient() {\n  // Two tabs: \"Heatmap\" and \"My Collisions\"\n\n  // Heatmap tab:\n  // - Directory tree with activity intensity\n  // - Click directory to see who's active there\n  // - Color intensity = activity level\n\n  // Collisions tab:\n  // - List of your open MRs with collision indicators\n  // - Click to see collision details\n}\n```\n\n**Acceptance criteria:**\n- [ ] Page renders at /territory\n- [ ] Heatmap shows activity by directory\n- [ ] Collision list shows alerts\n- [ ] Sidebar link added\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:29.976362-05:00","updated_at":"2025-12-12T09:05:29.976362-05:00","dependencies":[{"issue_id":"gitlab-insights-4zq","depends_on_id":"gitlab-insights-3kr","type":"blocks","created_at":"2025-12-15T12:13:40.807095-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5fg","title":"Epic 10: Expertise Scoring Engine","description":"Goal: Implement weighted expertise scoring algorithm and Expert View UI.\n\nTestable when closed:\n- Can query 'Who is the expert on [file/directory/topic]?'\n- Results show ranked people with expertise scores\n- Scores incorporate recency decay\n- Can see score breakdown (commits, MRs, reviews, comments)\n\nDependencies: Epic 9 (Commit \u0026 File data)\n\nAlgorithm:\nexpertise_score = commits x 3.0 x decay(90d) + mrs_authored x 4.0 x decay(120d) + mrs_reviewed x 2.0 x decay(60d) + issues_assigned x 2.0 x decay(45d) + comments x 0.5 x decay(30d)\n\nContains 10 stories (10.1-10.10), ~30 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:05.246894-05:00","updated_at":"2025-12-12T09:03:05.246894-05:00","dependencies":[{"issue_id":"gitlab-insights-5fg","depends_on_id":"gitlab-insights-mo8","type":"blocks","created_at":"2025-12-12T09:03:21.384031-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5iz","title":"Story 10.9: Add expand to directory option","description":"Context: When viewing file experts, offer to expand to containing directory.\n\nImplementation:\n\nAdd to ExpertViewClient:\n\nWhen query is a file path and results exist:\n- Extract parent directory using getParentDirectory(query)\n- Show button: 'Expand to directory: {directory}'\n- On click, setQuery(directory, 'directory')\n- Can continue expanding up the directory tree\n\nUse cases:\n- File has few experts â†’ expand to see directory experts\n- Broaden search to find more people\n- Navigate up the directory tree\n\nAcceptance criteria:\n- Button shown for file queries\n- Click expands to parent directory\n- Can continue expanding up\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:10.975902-05:00","updated_at":"2025-12-12T09:06:10.975902-05:00","dependencies":[{"issue_id":"gitlab-insights-5iz","depends_on_id":"gitlab-insights-r9i","type":"blocks","created_at":"2025-12-15T12:13:17.16137-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5kc","title":"2.4 Add unread status to grouped queries","description":"Update getWorkItemsGrouped to include unread status based on ReadEvent.\n\n## Implementation\nIn getWorkItemsGrouped query:\n\nFor each work item, determine:\n- hasNewActivity: true if:\n  - No ReadEvent exists for this user+event, OR\n  - lastActivityAt \u003e readAt\n- unreadComments: count of child comments where:\n  - No ReadEvent exists, OR\n  - comment.createdAt \u003e readAt\n\nUse Prisma subquery or raw SQL for efficiency.\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-4\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-5kc: Add unread status to grouped queries\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-5kc\n- Update plan: AC-4 -\u003e \"query-ready\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.780296-05:00","updated_at":"2025-12-11T15:08:38.751919-05:00","dependencies":[{"issue_id":"gitlab-insights-5kc","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:29.023681-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5oj","title":"1.6 Update event transformer for issues","description":"Update event-transformer.ts to capture issue metadata.\n\n## Implementation\nMap GitLab Issues API fields directly:\n- issue.assignees[].username -\u003e assignees[]\n- issue.state -\u003e status (\"opened\" | \"closed\")\n- issue.updated_at -\u003e lastActivityAt\n- issue.user_notes_count -\u003e commentCount\n\n## File\nsrc/server/services/gitlab/event-transformer.ts\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-5oj: Update event transformer for issues\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-5oj","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:06.442139-05:00","updated_at":"2025-12-11T15:07:52.986747-05:00","dependencies":[{"issue_id":"gitlab-insights-5oj","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:47.679909-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-5tky","title":"Update technical documentation","description":"Document cursor pagination API in code comments and README. Add examples for cursor format, usage patterns, error handling. Document pagination logging format for monitoring. Update component prop documentation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:08.364115-05:00","updated_at":"2025-12-15T12:09:08.364115-05:00"}
{"id":"gitlab-insights-5xmm","title":"Write integration tests for tRPC endpoints","description":"Test pagination logic in getRecent, getForDashboard, search, getNewItems. Verify cursor-based queries return correct items, no duplicates, proper hasMore flag. Test with various dataset sizes and cursor positions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:05.544835-05:00","updated_at":"2025-12-15T12:09:05.544835-05:00","dependencies":[{"issue_id":"gitlab-insights-5xmm","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:40.429703-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-63u","title":"Story 12.5: Create similarity-scorer service","description":"**Context:** Calculate similarity between Events using embeddings.\n\n**Implementation:**\n\nCreate `src/server/services/similarity-scorer.ts` with cosine similarity function and findSimilarEvents function using pgvector.\n\n**pgvector query uses:**\n- Distance operator \u003c=\u003e for cosine similarity\n- Filters by userId and excludes self\n- Orders by similarity and respects threshold\n\n**Acceptance criteria:**\n- [ ] Cosine similarity calculation correct\n- [ ] pgvector query efficient\n- [ ] Returns ranked results\n- [ ] Respects threshold\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:00.023944-05:00","updated_at":"2025-12-12T09:05:00.023944-05:00","dependencies":[{"issue_id":"gitlab-insights-63u","depends_on_id":"gitlab-insights-cls","type":"blocks","created_at":"2025-12-15T12:13:43.141505-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6d3","title":"Epic 14: Activity View \u0026 Filtering","description":"Goal: 'What's happening in time window?' view with smart filtering.\n\nTestable when closed:\n- Can see activity feed for a time range\n- Can filter by territory (my files), person (my team), or topic\n- Activity relevance scoring surfaces what matters\n- Configurable filters that persist\n\nDependencies: Epic 10 (Territory), Epic 8 (Person)\n\nAlgorithm:\nevent_relevance = territory_match x 0.4 + person_match x 0.3 + topic_match x 0.2 + recency x 0.1\ndigest_threshold = 0.5, daily_limit = 15\n\nContains 10 stories (14.1-14.10), ~28 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.409589-05:00","updated_at":"2025-12-12T09:03:06.409589-05:00","dependencies":[{"issue_id":"gitlab-insights-6d3","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:22.34376-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6d3","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:22.405164-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6fx","title":"Epic 15: Email Digest","description":"Goal: Proactive daily briefing via email based on user's territory and interests.\n\nTestable when closed:\n- Can configure email digest preferences\n- Daily email sent with relevant activity (territory, person, topic matches)\n- Email includes expert suggestions for topics user searched\n- Unsubscribe works correctly\n\nDependencies: Epic 14 (Activity relevance), Epic 10 (Territory)\n\nContains 10 stories (15.1-15.10), ~27 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.685399-05:00","updated_at":"2025-12-12T09:03:06.685399-05:00","dependencies":[{"issue_id":"gitlab-insights-6fx","depends_on_id":"gitlab-insights-6d3","type":"blocks","created_at":"2025-12-12T09:03:22.625221-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6fx","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:22.687354-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6j1","title":"Story 9.2: Add File model","description":"**Context:** Need to store unique file paths with computed directory and extension for grouping and querying.\n\n**Implementation:**\n\nAdd to `prisma/schema.prisma`:\n\n```prisma\nmodel File {\n  id          String   @id @default(cuid())\n  userId      String\n  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  path        String   // Full file path (e.g., \"src/auth/login.ts\")\n  directory   String   // Parent directory (e.g., \"src/auth\")\n  filename    String   // Just filename (e.g., \"login.ts\")\n  extension   String?  // Extension (e.g., \"ts\")\n  projectId   String   // GitLab project ID\n\n  // Relationships\n  commits     CommitFile[]\n\n  createdAt   DateTime @default(now())\n  updatedAt   DateTime @updatedAt\n\n  @@unique([userId, projectId, path])\n  @@index([userId, projectId])\n  @@index([userId, directory])\n  @@index([userId, extension])\n}\n```\n\n**Directory/extension parsing logic:**\n```typescript\nfunction parseFilePath(fullPath: string) {\n  const parts = fullPath.split('/');\n  const filename = parts.pop() || '';\n  const directory = parts.join('/') || '/';\n  const extMatch = filename.match(/\\.([^.]+)$/);\n  const extension = extMatch ? extMatch[1] : null;\n  return { filename, directory, extension };\n}\n```\n\n**Acceptance criteria:**\n- [ ] File model with all fields\n- [ ] Unique constraint on [userId, projectId, path]\n- [ ] Directory index for prefix queries\n- [ ] Extension index for type filtering\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:29.079249-05:00","updated_at":"2025-12-12T09:04:29.079249-05:00","dependencies":[{"issue_id":"gitlab-insights-6j1","depends_on_id":"gitlab-insights-o58","type":"blocks","created_at":"2025-12-15T12:12:55.889211-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6kvz","title":"8.0.1: Add shared navigation for Intelligence views","description":"","status":"closed","priority":2,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:16:26.125053-05:00","updated_at":"2025-12-15T12:03:19.979764-05:00","closed_at":"2025-12-15T12:03:19.979764-05:00","dependencies":[{"issue_id":"gitlab-insights-6kvz","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:16:44.054434-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-6ob3","title":"Deployment and monitoring setup","description":"Run full test suite (unit + integration + E2E). Test in staging with 1000+ events. Verify DB query performance \u003c10ms. Deploy to production. Monitor error rates and query performance for 24 hours post-deployment. Set up alerts for cursor decode errors and slow queries.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:08.865836-05:00","updated_at":"2025-12-15T12:09:08.865836-05:00"}
{"id":"gitlab-insights-6q0","title":"Epic 13: Decision Archaeology View","description":"Goal: Enable 'What was decided about X?' queries into historical discussions.\n\nTestable when closed:\n- Can search for a topic and see relevant past discussions\n- Results show issues, MR discussions, and comments mentioning the topic\n- Results are ranked by relevance with context snippets\n- Can drill into full discussion threads\n\nDependencies: Epic 12 (Similarity), Epic 8 (Person)\n\nContains 9 stories (13.1-13.9), ~28 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.141227-05:00","updated_at":"2025-12-12T09:03:06.141227-05:00","dependencies":[{"issue_id":"gitlab-insights-6q0","depends_on_id":"gitlab-insights-b5y","type":"blocks","created_at":"2025-12-12T09:03:22.061038-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-6q0","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:22.124665-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-738d","title":"Create cursor encode/decode utilities","description":"Create /src/utils/cursor.ts with encode/decode functions for cursor-based pagination. Cursor format: {createdAt: ISO8601, id: string} encoded as base64 JSON. Includes validation and error handling for malformed cursors.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:00.572378-05:00","updated_at":"2025-12-15T12:09:00.572378-05:00"}
{"id":"gitlab-insights-784","title":"Story 8.8: Add PersonActivityStats component","description":"**Context:** Reusable component showing a person's activity breakdown with date ranges.\n\n**Implementation:**\n\nCreate `src/components/people/PersonActivityStats.tsx`:\n\n```tsx\ninterface PersonActivityStatsProps {\n  personId: string;\n  dateRange?: {\n    from: Date;\n    to: Date;\n  };\n  variant?: 'compact' | 'full';\n}\n\nexport function PersonActivityStats({ personId, dateRange, variant = 'compact' }: PersonActivityStatsProps) {\n  // Fetch stats from API\n  // Display:\n  // - Issues authored (count)\n  // - MRs authored (count)\n  // - MRs reviewed (count) - future, placeholder for now\n  // - Comments (count)\n  // - Date range selector (full variant)\n}\n```\n\n**Stats to display:**\n- Issues authored\n- MRs authored\n- MRs reviewed (placeholder - Epic 9 adds this)\n- Comments made\n- \"Last active\" date\n\n**Acceptance criteria:**\n- [ ] Compact variant shows badges\n- [ ] Full variant shows detailed breakdown\n- [ ] Date range filtering works\n- [ ] Loading and error states handled\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:19.013528-05:00","updated_at":"2025-12-12T09:06:19.013528-05:00","dependencies":[{"issue_id":"gitlab-insights-784","depends_on_id":"gitlab-insights-2gt","type":"blocks","created_at":"2025-12-15T12:13:11.709584-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-79c","title":"Story 10.2: Implement commit-based expertise calculation","description":"Context: Calculate expertise from commits touching a file/directory.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface CommitExpertise with personId, commitCount, lastCommitDate, score\n\nFunction getCommitExpertise(db, userId, fileIdOrDirectory, isDirectory, config) that:\n- Queries commits touching file(s)\n- Groups by personId\n- Calculates decayed scores using 3.0 weight and 90d tau\n- Returns sorted by score DESC\n\nSQL approach for performance:\nSELECT personId, COUNT(*) as commit_count, MAX(authoredAt) as last_commit,\n  SUM(3.0 * EXP(-EXTRACT(DAY FROM NOW() - authoredAt) / 90)) as score\nFROM Commit c\nJOIN CommitFile cf ON cf.commitId = c.id\nJOIN File f ON f.id = cf.fileId\nWHERE c.userId =  AND (f.id =  OR f.directory LIKE )\nGROUP BY c.personId\nORDER BY score DESC\n\nAcceptance criteria:\n- Calculates commit expertise per person\n- Works for single file or directory\n- Applies decay correctly\n- Performance acceptable (\u003c500ms)\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.693265-05:00","updated_at":"2025-12-12T09:04:39.693265-05:00","dependencies":[{"issue_id":"gitlab-insights-79c","depends_on_id":"gitlab-insights-20t","type":"blocks","created_at":"2025-12-15T12:13:16.610021-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7e5","title":"1.7 Update event transformer for MRs","description":"Update event-transformer.ts to capture MR metadata and closes relationships.\n\n## Implementation\nMap GitLab MRs API fields directly:\n- merge_request.assignees[].username -\u003e assignees[]\n- merge_request.state -\u003e status (\"opened\" | \"closed\" | \"merged\")\n- merge_request.updated_at -\u003e lastActivityAt\n- merge_request.user_notes_count -\u003e commentCount\n\nFor closesIssueIds, call GitLab API endpoint:\n- GET /projects/:id/merge_requests/:mr_iid/closes_issues\n- Extract IIDs from response array\n- Store in closesIssueIds[]\n\nMay need to add this API call to gitlab-api.ts or equivalent.\n\n## Files\n- src/server/services/gitlab/event-transformer.ts\n- src/server/services/gitlab/gitlab-api.ts (if exists)\n\n---\n## Acceptance Criteria\nContributes to: AC-2\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-7e5: Update event transformer for MRs\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-7e5\n- Update plan: AC-2 -\u003e \"implemented\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:06.68728-05:00","updated_at":"2025-12-11T15:07:53.231732-05:00","dependencies":[{"issue_id":"gitlab-insights-7e5","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:48.046357-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7n4","title":"Story 14.5: Add person filter","description":"Context: Filter activity to specific people.\n\nImplementation:\n\n```tsx\n\u003cFilterSection title=\"People\"\u003e\n  \u003cPersonPicker\n    selected={filters.people}\n    onChange={(people) =\u003e setFilters({ ...filters, people })}\n    suggestions={frequentCollaborators}\n  /\u003e\n\u003c/FilterSection\u003e\n```\n\nSuggestions:\n- People user has commented on\n- People who commented on user's work\n- People in same territories\n\nAcceptance criteria:\n- [ ] Can select people to watch\n- [ ] Shows suggestions\n- [ ] Filter applies to feed\n- [ ] Multiple people supported\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:03.918608-05:00","updated_at":"2025-12-12T09:05:03.918608-05:00","dependencies":[{"issue_id":"gitlab-insights-7n4","depends_on_id":"gitlab-insights-0w4","type":"blocks","created_at":"2025-12-15T12:13:54.870749-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7ve","title":"Story 10.5: Create calculateExpertise function","description":"Context: Combine all expertise signals into a single ranked result.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface ExpertiseResult with:\n- person: Person\n- totalScore: number\n- breakdown: { commits, mrsAuthored, mrsReviewed, issuesAssigned, comments (each with count and score) }\n- lastActivity: Date\n\nFunction calculateExpertise(db, userId, query, options)\nQuery params:\n- filePath?: string (specific file)\n- directory?: string (directory prefix)\n- searchTerm?: string (keyword search)\nOptions:\n- limit?: number (max results, default 10)\n- config?: DecayConfig (custom weights)\n\nImplementation flow:\n1. Get commit expertise\n2. Get MR expertise\n3. Get issue expertise\n4. Merge by personId\n5. Sum total scores\n6. Sort by totalScore DESC\n7. Limit results\n8. Fetch Person details\n9. Return with breakdown\n\nAcceptance criteria:\n- Combines all signal types\n- Returns breakdown per signal\n- Sorts by total score\n- Includes Person details\n- Respects limit\n\nHours: 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:20.315943-05:00","updated_at":"2025-12-12T09:05:20.315943-05:00","dependencies":[{"issue_id":"gitlab-insights-7ve","depends_on_id":"gitlab-insights-904","type":"blocks","created_at":"2025-12-15T12:13:16.848294-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7x83","title":"8.4.5: Add activity tRPC router","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:15:48.096213-05:00","updated_at":"2025-12-15T12:03:19.817525-05:00","closed_at":"2025-12-15T12:03:19.817525-05:00","dependencies":[{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.637334-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-mas3","type":"blocks","created_at":"2025-12-15T11:16:08.037183-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-e9on","type":"blocks","created_at":"2025-12-15T11:16:08.104233-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-7x83","depends_on_id":"gitlab-insights-v6kq","type":"blocks","created_at":"2025-12-15T11:16:08.171085-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-7yjg","title":"Implement new items toast notification system","description":"Add toast notification when sync brings new items while user scrolled down. Show 'X new items available' with 'Scroll to top' action. Only show if user \u003e100px from top. Persistent toast (duration: Infinity) until dismissed or action clicked. Track dismissed state in component.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:07.16786-05:00","updated_at":"2025-12-15T12:09:07.16786-05:00"}
{"id":"gitlab-insights-81u","title":"8.2.6: Add decisions tRPC router","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:13:13.627838-05:00","updated_at":"2025-12-15T12:03:19.047863-05:00","closed_at":"2025-12-15T12:03:19.047863-05:00","dependencies":[{"issue_id":"gitlab-insights-81u","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.701086-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-81u","depends_on_id":"gitlab-insights-1a5","type":"blocks","created_at":"2025-12-15T11:13:21.14959-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-81u","depends_on_id":"gitlab-insights-las","type":"blocks","created_at":"2025-12-15T11:13:21.231112-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-82a","title":"1.2 Create ReadEvent model","description":"Create new ReadEvent model for tracking which events each user has read.\n\n## Implementation\nAdd to prisma/schema.prisma:\n\nmodel ReadEvent {\n  id        String   @id @default(cuid())\n  userId    String\n  eventId   String\n  readAt    DateTime @default(now())\n\n  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n  event     Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)\n\n  @@unique([userId, eventId])\n  @@index([userId, readAt])\n}\n\nAlso add relation to User model:\nreadEvents  ReadEvent[]\n\nAnd to Event model:\nreadBy      ReadEvent[]\n\n## File\nprisma/schema.prisma\n\n---\n## Acceptance Criteria\nContributes to: AC-4, AC-9\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-82a: Create ReadEvent model\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-82a\n- Update plan: AC-4, AC-9 -\u003e \"schema-ready\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:23:57.412545-05:00","updated_at":"2025-12-11T15:29:29.548659-05:00","closed_at":"2025-12-11T15:29:29.548659-05:00"}
{"id":"gitlab-insights-85l","title":"Story 11.5: Add collision severity scoring","description":"**Context:** Weight collisions by the expertise of both parties.\n\n**Implementation:**\n\nExtend collision detection:\n\n```typescript\nasync function calculateCollisionSeverity(\n  db: PrismaClient,\n  userId: string,\n  collision: Collision,\n  yourPersonId: string\n): Promise\u003cnumber\u003e {\n  // Get your expertise in overlapping files\n  const yourExpertise = await calculateExpertise(\n    db, userId,\n    { filePaths: collision.overlapScore.overlappingFiles }\n  );\n\n  // Get their expertise (MR author)\n  const theirPersonId = await getPersonIdFromAuthor(\n    db, userId, collision.otherMR.author\n  );\n  const theirExpertise = await calculateExpertise(\n    db, userId,\n    { filePaths: collision.overlapScore.overlappingFiles }\n  );\n\n  // Severity = overlap Ã— (your_expertise + their_expertise) / 2\n  const avgExpertise = (yourExpertise + theirExpertise) / 2;\n  return collision.overlapScore.totalScore * avgExpertise;\n}\n```\n\n**Interpretation:**\n- High severity: Both parties are experts â†’ important collision\n- Low severity: Neither is expert â†’ less critical\n- Mixed: Expert should be aware of non-expert's work\n\n**Acceptance criteria:**\n- [ ] Calculates severity with expertise weighting\n- [ ] Higher expertise = higher severity\n- [ ] Severity used for ranking/filtering\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:00.554676-05:00","updated_at":"2025-12-12T09:05:00.554676-05:00","dependencies":[{"issue_id":"gitlab-insights-85l","depends_on_id":"gitlab-insights-j6z","type":"blocks","created_at":"2025-12-15T12:13:40.576719-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-86d","title":"Story 17.5: Show related discussions about the area","description":"Surface related discussions (MRs, issues, comments) about the selected area.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Leverages decision context from Epic 13\n- Helps find historical context during incidents\n\nAcceptance Criteria:\n- Query discussions related to selected path\n- Display relevant MRs, issues, and comments\n- Show discussion titles, authors, dates\n- Link to GitLab discussion threads\n- Sort by relevance to the current path\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.445186-05:00","updated_at":"2025-12-12T09:04:39.445186-05:00","dependencies":[{"issue_id":"gitlab-insights-86d","depends_on_id":"gitlab-insights-xfb","type":"blocks","created_at":"2025-12-15T12:14:02.248517-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8co","title":"8.1.8: Integrate commit fetching into manualRefresh","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:11:32.517997-05:00","updated_at":"2025-12-15T12:01:29.582282-05:00","closed_at":"2025-12-15T12:01:29.582282-05:00","dependencies":[{"issue_id":"gitlab-insights-8co","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.269869-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-8co","depends_on_id":"gitlab-insights-pf0","type":"blocks","created_at":"2025-12-15T11:11:41.316419-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8db","title":"Epic 17: Incident Response Mode (Bonus)","description":"Goal: Quick expert finding for production issues.\n\nTestable when closed:\n- Can enter a file path or error area and immediately see experts\n- Recent changes to that area displayed\n- Related discussions surfaced quickly\n- Single-page focused interface for urgency\n\nDependencies: Epic 10 (Expertise), Epic 13 (Decisions)\n\nContains 7 stories (17.1-17.7), ~19 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:07.261225-05:00","updated_at":"2025-12-12T09:03:07.261225-05:00","dependencies":[{"issue_id":"gitlab-insights-8db","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:23.268416-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-8db","depends_on_id":"gitlab-insights-6q0","type":"blocks","created_at":"2025-12-12T09:03:23.331858-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8hl","title":"Story 13.8: Integrate with Expert View","description":"Context: Show who was involved in decision discussions.\n\nImplementation:\nAdd to DecisionResultCard showing key contributors section with participant avatars that link to person views. Also add Related decisions section to PersonDetailView.\n\nAcceptance criteria:\n- Shows contributors on results\n- Links to Person views\n- Person view shows their decisions\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:11.808065-05:00","updated_at":"2025-12-12T09:05:11.808065-05:00","dependencies":[{"issue_id":"gitlab-insights-8hl","depends_on_id":"gitlab-insights-f87","type":"blocks","created_at":"2025-12-15T12:13:46.09212-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8pw","title":"Story 17.2: Add quick path input with autocomplete","description":"Add path input field with autocomplete functionality using File model data.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Part of quick expert finding for production issues\n- Dependencies: Epic 10 (Expertise), Epic 13 (Decisions)\n\nAcceptance Criteria:\n- Create path input field on /incident page\n- Implement autocomplete using File model\n- Show relevant file paths as user types\n- Handle path selection to trigger expert/commit/discussion queries\n- Provide clear UX for path navigation\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.794155-05:00","updated_at":"2025-12-12T09:04:38.794155-05:00","dependencies":[{"issue_id":"gitlab-insights-8pw","depends_on_id":"gitlab-insights-r13","type":"blocks","created_at":"2025-12-15T12:14:02.004902-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8tm","title":"Feature 10.4: Activity Summaries \u0026 Stalled Work Detection","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":480,"created_at":"2025-12-15T11:09:50.226601-05:00","updated_at":"2025-12-15T12:03:01.318974-05:00","closed_at":"2025-12-15T12:03:01.318974-05:00","dependencies":[{"issue_id":"gitlab-insights-8tm","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.399245-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8ue","title":"Story 15.10: Create digest analytics","description":"**Context:** Track digest engagement.\n\n**Implementation:**\n\nAdd tracking model:\n```prisma\nmodel DigestLog {\n  id          String   @id @default(cuid())\n  userId      String\n  sentAt      DateTime\n  itemCount   Int\n  openedAt    DateTime?\n  clickCount  Int      @default(0)\n}\n```\n\nAdd tracking pixel/link tracking to email:\n```tsx\n// In email template\n\u003cimg src={'/api/digest/track?id=\u0026event=open'} /\u003e\n\n// Links\n\u003cLink href={'/api/digest/track?id=\u0026event=click\u0026target='}\u003e\n```\n\nAdd analytics view to settings.\n\n**Acceptance criteria:**\n- [ ] Tracks email opens\n- [ ] Tracks link clicks\n- [ ] Shows stats on settings\n- [ ] Respects privacy (opt-in)\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:35.854985-05:00","updated_at":"2025-12-12T09:06:35.854985-05:00","dependencies":[{"issue_id":"gitlab-insights-8ue","depends_on_id":"gitlab-insights-fno","type":"blocks","created_at":"2025-12-15T12:13:58.241827-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8xf8","title":"New Items Toast Notifications","description":"Implement toast notifications for new items that arrive during active browsing session. Shows persistent toast with scroll-to-top action when manual/auto sync brings in new events while user is scrolled down.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:07.675458-05:00","updated_at":"2025-12-15T12:08:07.675458-05:00","dependencies":[{"issue_id":"gitlab-insights-8xf8","depends_on_id":"gitlab-insights-ju80","type":"blocks","created_at":"2025-12-15T12:09:40.992665-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8y3x","title":"Implementation Note: Stalled Work Detection Algorithm for Epic 14","description":"","status":"open","priority":3,"issue_type":"chore","estimated_minutes":0,"created_at":"2025-12-15T12:05:41.685097-05:00","updated_at":"2025-12-15T12:05:41.685097-05:00","dependencies":[{"issue_id":"gitlab-insights-8y3x","depends_on_id":"gitlab-insights-6d3","type":"related","created_at":"2025-12-15T12:05:59.488813-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-8zv","title":"Story 14.3: Create ActivityView page","description":"Context: Dedicated activity feed page.\n\nImplementation:\n\nCreate src/app/(auth)/activity/page.tsx:\n\n```tsx\nexport default async function ActivityPage() {\n  await requireAuth();\n  return \u003cActivityViewClient /\u003e;\n}\n```\n\nCreate src/components/activity/ActivityViewClient.tsx:\n\n```tsx\nexport function ActivityViewClient() {\n  // Date range picker (last 24h, 7d, 30d, custom)\n  // Filter panel (territory, person, topic)\n  // Activity feed\n  // Relevance indicator on each item\n}\n```\n\nAcceptance criteria:\n- [ ] Page renders at /activity\n- [ ] Date range selector\n- [ ] Filter panel\n- [ ] Infinite scroll\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:44.461089-05:00","updated_at":"2025-12-12T09:04:44.461089-05:00","dependencies":[{"issue_id":"gitlab-insights-8zv","depends_on_id":"gitlab-insights-mfn","type":"blocks","created_at":"2025-12-15T12:13:54.705274-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-904","title":"Story 10.4: Implement issue-based expertise","description":"Context: Calculate expertise from issues assigned and comments made.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface IssueExpertise with personId, issuesAssigned, commentsCount, assignedScore, commentScore\n\nFunction getIssueExpertise(db, userId, searchTerms, config)\n- searchTerms: File paths or keywords\n\nQuery approach:\n1. Search Events (issues, comments) matching terms\n2. For issues: group by author, apply 2.0 weight, 45d tau\n3. For comments: group by author, apply 0.5 weight, 30d tau\n4. Combine scores\n\nAcceptance criteria:\n- Calculates issue assigned score\n- Calculates comment score\n- Searches by file path or keyword\n- Applies correct weights and decay\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:06.119366-05:00","updated_at":"2025-12-12T09:05:06.119366-05:00","dependencies":[{"issue_id":"gitlab-insights-904","depends_on_id":"gitlab-insights-u8w","type":"blocks","created_at":"2025-12-15T12:13:16.764175-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-929","title":"Feature 10.2: Decision Archaeology System","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":480,"created_at":"2025-12-15T11:09:18.265689-05:00","updated_at":"2025-12-15T12:02:59.962173-05:00","closed_at":"2025-12-15T12:02:59.962173-05:00","dependencies":[{"issue_id":"gitlab-insights-929","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.252765-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9b9","title":"Story 9.9: Integrate commit fetching into manualRefresh","description":"**Context:** Add commit fetching to the existing refresh flow.\n\n**Implementation:**\n\nModify `src/server/api/routers/events.ts` `manualRefresh`:\n\n```typescript\nmanualRefresh: protectedProcedure\n  .input(z.object({\n    includeCommits: z.boolean().default(true),\n    commitDepth: z.number().default(100) // Max commits per project\n  }))\n  .mutation(async ({ ctx, input }) =\u003e {\n    // Existing: fetch issues, MRs, notes\n\n    // New: if includeCommits\n    if (input.includeCommits) {\n      for (const project of monitoredProjects) {\n        const commits = await gitlabClient.fetchCommits(\n          project.gitlabProjectId,\n          { per_page: 100, maxPages: Math.ceil(input.commitDepth / 100) }\n        );\n        // Fetch diffs for each commit (rate limited)\n        // Transform and store\n      }\n    }\n\n    // Return combined stats\n  })\n```\n\n**Configuration options:**\n- `includeCommits` - Toggle commit fetching (default true)\n- `commitDepth` - How many commits to fetch per project\n\n**Performance considerations:**\n- Fetch diffs in batches (10 at a time)\n- Skip commits already in DB\n- Add progress tracking for long operations\n\n**Acceptance criteria:**\n- [ ] Commits fetched during manual refresh\n- [ ] Respects depth limit\n- [ ] Skips existing commits\n- [ ] Reports commit stats in response\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:05.642883-05:00","updated_at":"2025-12-12T09:06:05.642883-05:00","dependencies":[{"issue_id":"gitlab-insights-9b9","depends_on_id":"gitlab-insights-162","type":"blocks","created_at":"2025-12-15T12:13:14.362217-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9c3","title":"Story 8.5: Create PersonListView page","description":"**Context:** Need a page to browse all extracted people with search functionality.\n\n**Implementation:**\n\nCreate `src/app/(auth)/people/page.tsx`:\n\n```tsx\n// Server component for auth\nexport default async function PeoplePage() {\n  await requireAuth();\n  return \u003cPersonListClient /\u003e;\n}\n```\n\nCreate `src/components/people/PersonListClient.tsx`:\n\n```tsx\nexport function PersonListClient() {\n  // Search input (debounced)\n  // List of PersonCards\n  // Loading skeleton\n  // Empty state if no people extracted yet\n  // \"Extract people\" button if empty\n}\n```\n\n**Integration with existing layout:**\n- Add \"People\" link to sidebar in AuthenticatedLayout\n- Use existing split-pane pattern (list on left, detail on right)\n- Keyboard navigation (j/k) following existing patterns\n\n**Acceptance criteria:**\n- [ ] Page renders at /people\n- [ ] Search filters people by name/username\n- [ ] Shows loading state\n- [ ] Empty state prompts extraction\n- [ ] Sidebar link added\n- [ ] Keyboard navigation works\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:35.102127-05:00","updated_at":"2025-12-12T09:05:35.102127-05:00","dependencies":[{"issue_id":"gitlab-insights-9c3","depends_on_id":"gitlab-insights-b06","type":"blocks","created_at":"2025-12-15T12:13:11.486031-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9ed","title":"3.5 Update DashboardClient for grouped view","description":"Update DashboardClient to use new WorkItemList component.\n\n## Implementation\nModify src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n1. Import WorkItemList component\n2. Use getWorkItemsGrouped query instead of flat events query\n3. Conditionally render based on user's dashboardView preference:\n   - \"grouped\": render WorkItemList\n   - \"flat\": render EventTable (existing)\n4. Handle item selection and detail pane updates\n5. Handle activity item clicks (scroll detail pane)\n\n## State Management\n- selectedItemId: string | null\n- expandedCardIds: Set\u003cstring\u003e\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-9ed: Update DashboardClient for grouped view\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-9ed","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:46.622726-05:00","updated_at":"2025-12-11T15:09:54.819453-05:00","dependencies":[{"issue_id":"gitlab-insights-9ed","depends_on_id":"gitlab-insights-fww","type":"blocks","created_at":"2025-12-11T14:26:03.442647-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-9ed","depends_on_id":"gitlab-insights-9vb","type":"blocks","created_at":"2025-12-11T14:26:03.648523-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9jt","title":"5.1 Add view toggle to dashboard header","description":"Add toggle in dashboard header to switch views.\n\n## Implementation\nAdd toggle component in dashboard header:\n- Label: \"View\"\n- Options: \"Grouped\" | \"Flat\"\n- Default: \"Grouped\"\n\nOn change:\n- Update user's dashboardView preference via API\n- Re-render dashboard with selected view\n\n## Files\n- src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n- May need new API endpoint to update user preference\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-9jt: Add view toggle to dashboard header\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-9jt","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:07.079833-05:00","updated_at":"2025-12-11T15:10:35.690667-05:00","dependencies":[{"issue_id":"gitlab-insights-9jt","depends_on_id":"gitlab-insights-a6q","type":"blocks","created_at":"2025-12-11T14:26:54.023636-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9mx","title":"Phase 1: Data Model \u0026 Re-fetch","description":"Update schema and refetch all data with relationships. Clean slate approach.\n\n## Goal\nTransform flat event model into hierarchical structure where comments are grouped under parent issues/MRs.\n\n## Approach\n- Wipe Event table data (preserve User, UserQuery, MonitoredProject)\n- Add relationship fields to Event model\n- Create ReadEvent model for read tracking\n- Update transformers to map GitLab API directly\n- Refetch all data with new schema\n\n## Key Files\n- prisma/schema.prisma\n- src/server/services/gitlab/event-transformer.ts\n- src/server/services/gitlab/types.ts\n\n## Acceptance Criteria\nContributes to: AC-1, AC-2, AC-3\n\n## On Completion (Epic)\nWhen all Phase 1 tasks complete:\n1. Verify AC-1, AC-2, AC-3 are marked 'implemented' in plan file\n2. bd close gitlab-insights-9mx","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:23:56.805113-05:00","updated_at":"2025-12-11T15:07:30.104581-05:00"}
{"id":"gitlab-insights-9pu","title":"Story 8.6: Create PersonDetailView","description":"**Context:** When clicking a person, show their full activity timeline.\n\n**Implementation:**\n\nCreate `src/app/(auth)/people/[id]/page.tsx`:\n\n```tsx\nexport default async function PersonDetailPage({ params }: { params: { id: string } }) {\n  await requireAuth();\n  return \u003cPersonDetailClient personId={params.id} /\u003e;\n}\n```\n\nCreate `src/components/people/PersonDetailClient.tsx`:\n\n```tsx\nexport function PersonDetailClient({ personId }: { personId: string }) {\n  // Person header (avatar, name, overall stats)\n  // Activity timeline (their Events)\n  // Filter by type (issues/MRs/comments)\n  // Date range filter\n}\n```\n\n**Activity timeline should show:**\n- Issues they authored\n- MRs they authored or reviewed\n- Comments they made\n- Sorted by date, most recent first\n\n**Acceptance criteria:**\n- [ ] Page renders at /people/[id]\n- [ ] Shows person header with stats\n- [ ] Activity timeline loads\n- [ ] Can filter by event type\n- [ ] Handles person not found\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:50.015417-05:00","updated_at":"2025-12-12T09:05:50.015417-05:00","dependencies":[{"issue_id":"gitlab-insights-9pu","depends_on_id":"gitlab-insights-9c3","type":"blocks","created_at":"2025-12-15T12:13:11.559719-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9rb","title":"Story 12.8: Add SimilarItemsPanel component","description":"**Context:** Show similar items on Event detail view.\n\n**Implementation:**\n\nCreate `src/components/similarity/SimilarItemsPanel.tsx` that:\n- Queries similar items using trpc.similarity.getSimilar\n- Uses threshold 0.7 and limit 5\n- Shows SimilarItemCard for each result\n- Displays duplicate badge for items with score \u003e= 0.85\n- Hidden when no similar items found\n\nIntegrate into EventDetail page.\n\n**Acceptance criteria:**\n- [ ] Shows similar items on detail view\n- [ ] Displays similarity score\n- [ ] Links to related items\n- [ ] Hidden when none found\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:28.105577-05:00","updated_at":"2025-12-12T09:05:28.105577-05:00","dependencies":[{"issue_id":"gitlab-insights-9rb","depends_on_id":"gitlab-insights-cb4","type":"blocks","created_at":"2025-12-15T12:13:43.450758-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9sk","title":"Story 10.10: Add configurable decay parameters","description":"Context: Allow advanced users to tune scoring weights and decay rates.\n\nImplementation:\n\nAdd to settings page src/app/(auth)/settings/page.tsx:\n- Advanced section (collapsed by default)\n- Accordion with 'Expert Scoring Configuration'\n- Contains ExpertiseConfigForm component\n\nCreate src/components/settings/ExpertiseConfigForm.tsx:\n- Form fields for each signal:\n  * Weight (0.1 - 10.0)\n  * Decay tau in days (7 - 365)\n- Save to user preferences (new field in User model)\n- Reset to defaults button\n\nAdd to Prisma schema:\nmodel User {\n  // ... existing fields\n  expertiseConfig Json? // Store custom DecayConfig\n}\n\nAcceptance criteria:\n- Can adjust weights per signal\n- Can adjust decay rates\n- Changes saved to user prefs\n- Reset to defaults works\n- Expert queries use custom config\n\nHours: 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:22.614895-05:00","updated_at":"2025-12-12T09:06:22.614895-05:00","dependencies":[{"issue_id":"gitlab-insights-9sk","depends_on_id":"gitlab-insights-5iz","type":"blocks","created_at":"2025-12-15T12:13:17.253478-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9ts","title":"8.3.1: Track open MRs with file paths","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:13:32.906885-05:00","updated_at":"2025-12-15T12:03:19.129632-05:00","closed_at":"2025-12-15T12:03:19.129632-05:00","dependencies":[{"issue_id":"gitlab-insights-9ts","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.253826-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9vb","title":"3.2 Create WorkItemList component","description":"Create list component grouping WorkItemCards by type.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n\nProps:\n- issues: WorkItemSummary[]\n- mergeRequests: WorkItemSummary[]\n- selectedId: string | null\n- onSelectItem: (id: string) =\u003e void\n- onActivityItemClick: (eventId: string, activityId: string) =\u003e void\n\n## Layout\n+--------------------------------------------------+\n| Issues (12) - 3 new        [Sort: Activity v]    |\n|--------------------------------------------------|\n| [WorkItemCard]                                   |\n| [WorkItemCard]                                   |\n| [WorkItemCard]                                   |\n|--------------------------------------------------|\n| Merge Requests (8)         [Sort: Activity v]    |\n|--------------------------------------------------|\n| [WorkItemCard]                                   |\n| [WorkItemCard]                                   |\n+--------------------------------------------------+\n\n## Features\n- Section headers are sticky when scrolling\n- Section headers are collapsible (click to collapse all cards)\n- Multiple cards can be expanded simultaneously\n- Sort dropdown in section header\n\n## File\nsrc/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-9vb: Create WorkItemList component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-9vb","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:38.706094-05:00","updated_at":"2025-12-11T15:09:21.522902-05:00","dependencies":[{"issue_id":"gitlab-insights-9vb","depends_on_id":"gitlab-insights-fww","type":"blocks","created_at":"2025-12-11T14:26:03.235006-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-9wc","title":"Story 13.3: Create DecisionView page","description":"**Context:** Dedicated page for decision archaeology.\n\n**Implementation:**\n\nCreate `src/app/(auth)/decisions/page.tsx`:\n\n```tsx\nexport default async function DecisionsPage() {\n  await requireAuth();\n  return \u003cDecisionViewClient /\u003e;\n}\n```\n\nCreate `src/components/decisions/DecisionViewClient.tsx`:\n\n```tsx\nexport function DecisionViewClient() {\n  // Search input\n  // Date range filter\n  // Type filter (issues/MRs/comments)\n  // Results list\n  // Empty state with example queries\n}\n```\n\n**Example queries to suggest:**\n- \"OAuth implementation\"\n- \"database schema\"\n- \"API design\"\n\n**Acceptance criteria:**\n- [ ] Page renders at /decisions\n- [ ] Search with filters\n- [ ] Shows results with context\n- [ ] Sidebar link added\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.594274-05:00","updated_at":"2025-12-12T09:04:54.594274-05:00","dependencies":[{"issue_id":"gitlab-insights-9wc","depends_on_id":"gitlab-insights-d33","type":"blocks","created_at":"2025-12-15T12:13:45.694059-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a0y","title":"8.1.1: Extend Prisma schema for expertise data","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:10:08.646587-05:00","updated_at":"2025-12-15T12:01:28.086355-05:00","closed_at":"2025-12-15T12:01:28.086355-05:00","dependencies":[{"issue_id":"gitlab-insights-a0y","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.691301-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-a0y","depends_on_id":"gitlab-insights-d140","type":"blocks","created_at":"2025-12-15T11:18:41.004622-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a3r","title":"Story 12.1: Select embedding approach","description":"**Context:** Need to decide between local embeddings (pgvector) or API-based (OpenAI, sentence-transformers API).\n\n**Implementation:**\n\nResearch and document decision in ADR format:\n\n**Options:**\n1. **pgvector + sentence-transformers** - Local, free, requires setup\n2. **OpenAI embeddings API** - Easy, costs per token\n3. **Hugging Face Inference API** - Free tier available\n\n**Recommendation:** Start with pgvector + all-MiniLM-L6-v2 (384 dimensions):\n- Free and local\n- Fast inference\n- Good quality for short text\n- Can upgrade later\n\nCreate `docs/adr/embedding-approach.md` documenting decision.\n\n**Acceptance criteria:**\n- [ ] Decision documented\n- [ ] Trade-offs analyzed\n- [ ] Implementation path clear\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:10.320266-05:00","updated_at":"2025-12-12T09:04:10.320266-05:00"}
{"id":"gitlab-insights-a6q","title":"4.1 Mark as read on expand/view","description":"Trigger markAsRead when user expands card or views in detail.\n\n## Implementation\nIn DashboardClient.tsx:\n\n1. When card is expanded:\n   - Call markAsRead mutation with eventId\n   - Update local state to remove NEW badge\n\n2. When item is selected for detail pane:\n   - Call markAsRead mutation with eventId\n   - Update local state\n\n3. Optimistic update:\n   - Remove NEW badge immediately\n   - Revert if mutation fails\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-4, AC-9\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-a6q: Mark as read on expand/view\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-a6q\n- Update plan: AC-4, AC-9 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:00.820574-05:00","updated_at":"2025-12-11T15:10:21.396416-05:00","dependencies":[{"issue_id":"gitlab-insights-a6q","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:48.686869-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a7f","title":"Story 15.8: Implement threshold and daily limit","description":"**Context:** Ensure digest quality by filtering low-relevance items.\n\n**Implementation:**\n\nAlready in generateDigest, but add UI controls:\n\n```tsx\n\u003cFormField label=\"Minimum Relevance\"\u003e\n  \u003cSlider\n    min={0.3}\n    max={0.9}\n    step={0.1}\n    value={minRelevance}\n    onChange={setMinRelevance}\n  /\u003e\n  \u003cHelpText\u003eLower = more items, Higher = only most relevant\u003c/HelpText\u003e\n\u003c/FormField\u003e\n\n\u003cFormField label=\"Maximum Items\"\u003e\n  \u003cNumberInput\n    min={5}\n    max={30}\n    value={maxItems}\n    onChange={setMaxItems}\n  /\u003e\n  \u003cHelpText\u003eMaximum items per digest (default: 15)\u003c/HelpText\u003e\n\u003c/FormField\u003e\n```\n\n**Acceptance criteria:**\n- [ ] Can adjust relevance threshold\n- [ ] Can set max items\n- [ ] Defaults match spec (0.5, 15)\n- [ ] Changes affect preview\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:07.058712-05:00","updated_at":"2025-12-12T09:06:07.058712-05:00","dependencies":[{"issue_id":"gitlab-insights-a7f","depends_on_id":"gitlab-insights-psm","type":"blocks","created_at":"2025-12-15T12:13:58.070589-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-a86","title":"8.3.3: Calculate territory ownership metrics","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:13:59.163987-05:00","updated_at":"2025-12-15T12:03:19.287351-05:00","closed_at":"2025-12-15T12:03:19.287351-05:00","dependencies":[{"issue_id":"gitlab-insights-a86","depends_on_id":"gitlab-insights-tmn","type":"parent-child","created_at":"2025-12-15T11:14:30.398918-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-a86","depends_on_id":"gitlab-insights-pf0","type":"blocks","created_at":"2025-12-15T11:14:31.841584-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-agx","title":"Story 12.9: Add \"Likely Duplicate\" badge","description":"**Context:** Prominently flag items that are very similar (\u003e0.85).\n\n**Implementation:**\n\nCreate DuplicateBadge component that:\n- Only renders when similarity \u003e= 0.85\n- Shows as danger/flat Badge\n- Displays percentage (rounded)\n- Text: \"Likely Duplicate (XX%)\"\n\nShow badge in:\n- Event list items\n- Event detail header\n- Similar items panel\n\n**Acceptance criteria:**\n- [ ] Badge shown for \u003e0.85 similarity\n- [ ] Shows percentage\n- [ ] Appears in relevant places\n- [ ] Visually prominent\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:34.57375-05:00","updated_at":"2025-12-12T09:05:34.57375-05:00","dependencies":[{"issue_id":"gitlab-insights-agx","depends_on_id":"gitlab-insights-9rb","type":"blocks","created_at":"2025-12-15T12:13:43.542081-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-aifm","title":"8.4.6: Create nightly digest generation job","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:16:00.123935-05:00","updated_at":"2025-12-15T12:03:19.896618-05:00","closed_at":"2025-12-15T12:03:19.896618-05:00","dependencies":[{"issue_id":"gitlab-insights-aifm","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.70501-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-aifm","depends_on_id":"gitlab-insights-7x83","type":"blocks","created_at":"2025-12-15T11:16:08.309697-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ayt0","title":"Create useInfiniteEvents hook","description":"Create /src/hooks/useInfiniteEvents.ts wrapping TanStack Query useInfiniteQuery. Includes getNextPageParam logic, staleTime configuration (30s), and useFlattenedEvents helper to flatten pages into single array for components.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:03.140921-05:00","updated_at":"2025-12-15T12:09:03.140921-05:00","dependencies":[{"issue_id":"gitlab-insights-ayt0","depends_on_id":"gitlab-insights-mz1k","type":"blocks","created_at":"2025-12-15T12:09:38.216136-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b06","title":"Story 8.4: Create PersonCard component","description":"**Context:** Need a reusable card to display person information with their activity stats.\n\n**Implementation:**\n\nCreate `src/components/people/PersonCard.tsx`:\n\n```tsx\ninterface PersonCardProps {\n  person: {\n    id: string;\n    username: string;\n    name: string | null;\n    avatarUrl: string | null;\n  };\n  stats?: {\n    issuesAuthored: number;\n    mrsAuthored: number;\n    mrsReviewed: number;\n    commentsCount: number;\n  };\n  onClick?: () =\u003e void;\n}\n\nexport function PersonCard({ person, stats, onClick }: PersonCardProps) {\n  // Avatar (use HeroUI Avatar component)\n  // Name/username\n  // Stats badges if provided (issues, MRs, comments)\n  // Clickable for navigation\n}\n```\n\n**Design notes:**\n- Use HeroUI Avatar, Card components\n- Match existing app styling (olive/cream theme)\n- Compact variant for lists, expanded for detail views\n\n**Acceptance criteria:**\n- [ ] Displays avatar, name, username\n- [ ] Shows stats badges when provided\n- [ ] Handles missing avatar gracefully\n- [ ] Clickable with proper hover state\n- [ ] Responsive layout\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:19.849675-05:00","updated_at":"2025-12-12T09:05:19.849675-05:00","dependencies":[{"issue_id":"gitlab-insights-b06","depends_on_id":"gitlab-insights-d29","type":"blocks","created_at":"2025-12-15T12:12:52.755036-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b0x","title":"Story 9.3: Extend GitLabClient to fetch commits","description":"**Context:** Need to fetch commits from GitLab API with file diffs.\n\n**Implementation:**\n\nExtend `src/server/services/gitlab-client.ts`:\n\n```typescript\ninterface GitLabCommit {\n  id: string;           // SHA\n  short_id: string;\n  title: string;\n  message: string;\n  author_name: string;\n  author_email: string;\n  authored_date: string;\n  web_url: string;\n  stats?: {\n    additions: number;\n    deletions: number;\n  };\n}\n\ninterface GitLabCommitDiff {\n  old_path: string;\n  new_path: string;\n  new_file: boolean;\n  renamed_file: boolean;\n  deleted_file: boolean;\n}\n\n// Add to GitLabClient class:\n\nasync fetchCommits(\n  projectId: string,\n  options?: {\n    since?: string;      // ISO date\n    until?: string;      // ISO date\n    ref_name?: string;   // Branch\n    per_page?: number;\n    maxPages?: number;\n  }\n): Promise\u003cGitLabCommit[]\u003e\n\nasync fetchCommitDiff(\n  projectId: string,\n  sha: string\n): Promise\u003cGitLabCommitDiff[]\u003e\n```\n\n**API endpoints:**\n- `GET /projects/:id/repository/commits?with_stats=true\u0026per_page=100`\n- `GET /projects/:id/repository/commits/:sha/diff`\n\n**Rate limiting considerations:**\n- Commits endpoint: 2 pages max (200 commits)\n- Diff endpoint: Only fetch for recent commits or on-demand\n- Consider caching diffs since they don't change\n\n**Acceptance criteria:**\n- [ ] Can fetch commit list with pagination\n- [ ] Can fetch commit diff (files changed)\n- [ ] Handles rate limiting\n- [ ] Returns typed responses\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:44.756568-05:00","updated_at":"2025-12-12T09:04:44.756568-05:00","dependencies":[{"issue_id":"gitlab-insights-b0x","depends_on_id":"gitlab-insights-6j1","type":"blocks","created_at":"2025-12-15T12:13:13.851514-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b5y","title":"Epic 12: Similarity \u0026 Duplicate Detection","description":"Goal: Detect similar/duplicate issues and MRs using text similarity.\n\nTestable when closed:\n- Creating an issue shows 'similar existing issues' suggestions\n- Viewing an issue shows related issues ranked by similarity\n- Similarity threshold distinguishes 'related' (0.7) from 'likely duplicate' (0.85)\n- Works with title and description text\n\nDependencies: Epic 8 (Person entity for baseline)\n\nAlgorithm:\nsimilarity_score = title_embedding_cosine x 0.35 + description_embedding_cosine x 0.35 + label_jaccard x 0.15 + file_overlap x 0.15\nthreshold_similar = 0.7, threshold_duplicate = 0.85\n\nContains 10 stories (12.1-12.10), ~28 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:05.835223-05:00","updated_at":"2025-12-12T09:03:05.835223-05:00","dependencies":[{"issue_id":"gitlab-insights-b5y","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:21.832053-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-b6v","title":"Story 16.7: Create reviewer suggestion explanation","description":"Add explanations for why each reviewer is suggested.\n\n**Context:** Make reviewer suggestions actionable by explaining the reasoning - e.g., 'Expert in auth.ts (15 commits)', 'Owns user authentication territory', 'Recently active in this area'.\n\n**Implementation:**\n- Generate explanation text based on expertise signals\n- Show expertise scores or commit counts\n- Display in reviewer suggestion UI\n- Make reasoning transparent and useful\n\n**Acceptance criteria:**\n- Each suggested reviewer has explanation\n- Explanations reference concrete signals (commits, expertise, territory)\n- Clear and concise language\n- Helps user decide who to actually assign\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.748437-05:00","updated_at":"2025-12-12T09:04:49.748437-05:00","dependencies":[{"issue_id":"gitlab-insights-b6v","depends_on_id":"gitlab-insights-e1i","type":"blocks","created_at":"2025-12-15T12:14:00.216508-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-bgm","title":"1.1 Update Prisma schema with relationship fields","description":"Add relationship and metadata fields to the Event model in prisma/schema.prisma.\n\n## Implementation\nAdd these fields to Event model:\n\n// Relationship fields\nparentType      String?   // \"issue\" | \"merge_request\"\nparentEventId   String?   // FK to parent Event\ngitlabParentId  Int?      // GitLab issue/MR IID\n\n// MR -\u003e Issue relationships\nclosesIssueIds  Int[]     // Array of GitLab issue IIDs this MR closes\n\n// Cross-references\nmentionedInIds  Int[]     // GitLab IIDs mentioned in this item\n\n// System note flag\nisSystemNote    Boolean   @default(false)\n\n// People involvement\nassignees       String[]  // Array of assignee usernames\nparticipants    String[]  // Everyone who commented/interacted\n\n// Activity metadata\ncommentCount    Int       @default(0)\nlastActivityAt  DateTime\nstatus          String    // \"open\" | \"closed\" | \"merged\"\n\nAdd self-relation:\nparent          Event?    @relation(\"EventHierarchy\", fields: [parentEventId], references: [id])\nchildren        Event[]   @relation(\"EventHierarchy\")\n\nAdd indexes:\n@@index([parentEventId, createdAt])\n@@index([gitlabParentId])\n@@index([status, lastActivityAt])\n@@index([userId, type, status])\n\n## File\nprisma/schema.prisma\n\n---\n## Acceptance Criteria\nContributes to: AC-1, AC-2, AC-3\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-bgm: Add relationship fields to Event model\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-bgm\n- Update plan: AC-1, AC-2, AC-3 -\u003e \"schema-ready\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:23:57.148543-05:00","updated_at":"2025-12-11T15:29:05.723483-05:00","closed_at":"2025-12-11T15:29:05.723483-05:00"}
{"id":"gitlab-insights-bjk","title":"Add component and keyword badges to collapsed work item cards","description":"Currently, collapsed work item cards only show the repository name as plain text context. This enhancement adds styled component badges and keyword badges to collapsed cards to improve scan-to-decision relevance assessment.\n\nContext signals (repo, component, keywords) are first-class information in our organizational intelligence model - they answer 'why might this matter to me?' at a glance.\n\nEXACT COLOR SPECIFICATIONS (match existing GitLab Insights theme):\n\nREPOSITORY BADGE:\n- Semantic Name: badge-repo-dark / badge-repo-light\n- Dark Mode Background: hsl(199, 50%, 30%) - #1F5C75 (Blue tint)\n- Dark Mode Text: hsl(199, 92%, 80%) - #99D8F5 (Light blue)\n- Light Mode Background: hsl(199, 60%, 35%) - #2476A0\n- Light Mode Text: hsl(199, 100%, 95%) - #E6F7FF (Very light blue)\n\nCOMPONENT BADGE:\n- Semantic Name: badge-component-dark / badge-component-light  \n- Dark Mode Background: hsl(280, 50%, 30%) - #672680 (Purple tint)\n- Dark Mode Text: hsl(280, 67%, 80%) - #D4A5E6 (Light purple)\n- Light Mode Background: hsl(280, 60%, 35%) - #7A2E9E\n- Light Mode Text: hsl(280, 100%, 95%) - #F5E6FF (Very light purple)\n\nKEYWORD BADGE:\n- Semantic Name: badge-keyword-dark / badge-keyword-light\n- Dark Mode Background: hsl(0, 0%, 25%) - #404040 (Gray - subtle)\n- Dark Mode Text: hsl(0, 0%, 75%) - #BFBFBF (Gray text)\n- Light Mode Background: hsl(0, 0%, 85%) - #D9D9D9 (Light gray)\n- Light Mode Text: hsl(0, 0%, 30%) - #4D4D4D (Dark gray text)\n\nTYPOGRAPHY \u0026 SPACING (from existing GitLab Insights system):\n- Font Size: 11px (text-xs from existing scale)\n- Font Weight: 500 (Medium from existing scale)\n- Padding: 2px vertical, 8px horizontal\n- Border Radius: 4px\n- Gap Between Badges: 8px (spacing-2 from existing 8px grid)\n- Margin Top: 8px (spacing-2)\n\nIMPLEMENTATION DETAILS:\n\nBadge Container:\n- Display: flex\n- Gap: 8px\n- Flex-wrap: wrap\n- Margin-top: 8px\n\nBadge Base Style:\n- Font-size: 11px\n- Font-weight: 500\n- Padding: 2px 8px\n- Border-radius: 4px\n- Display: inline-flex\n- Align-items: center\n- Gap: 4px (for optional icon)\n\nRendering Order: [Repo Badge] [Component Badge] [Keyword Badge 1] [Keyword Badge 2] ...\n\nWHY THESE COLORS:\n- Blue tint for repository matches existing Info semantic color family (hsl(199, ...))\n- Purple tint for component matches existing event type colors (purple for issues)\n- Gray for keywords is intentionally less prominent (contextual vs first-class)\n- All colors meet WCAG AA contrast requirements\n- Colors integrate seamlessly with existing olive accent (#9DAA5F) and charcoal background (#2d2e2e)\n\nACCEPTANCE CRITERIA:\nâœ… Repository badge uses hsl(199, 50%, 30%) background in dark mode\nâœ… Component badge uses hsl(280, 50%, 30%) background in dark mode  \nâœ… Keyword badge uses hsl(0, 0%, 25%) background in dark mode\nâœ… Light mode variants implemented with specified colors\nâœ… Badges follow 8px spacing grid (8px gap, 8px margin-top)\nâœ… Typography uses text-xs (11px) and medium weight (500)\nâœ… Badges wrap properly on mobile\nâœ… Contrast ratios meet WCAG AA (4.5:1 minimum for text)\nâœ… Renders in order: repo â†’ component â†’ keywords\n\nREFERENCE:\n- UX Spec Section 3.2 Visual Foundation: Context Signal Badges (lines 1119-1157)\n- Design System Integration: GitLab Insights Color System (lines 736-756)\n- Design Direction Section 4.4: Enhancement 1 analysis","status":"open","priority":2,"issue_type":"feature","estimated_minutes":120,"created_at":"2025-12-15T10:28:23.783258-05:00","updated_at":"2025-12-15T10:31:03.44298-05:00"}
{"id":"gitlab-insights-bug","title":"4.2 Default sort: unread first","description":"Implement default sort order: unread items first, then by activity.\n\n## Implementation\nIn WorkItemList.tsx:\n\nDefault sort:\n1. Items with hasNewActivity = true (NEW badge)\n2. Then by lastActivityAt descending\n\nAdd sort dropdown with options:\n- \"Unread first\" (default)\n- \"Latest activity\"\n- \"Most comments\"\n- \"Assigned to me\"\n\n## File\nsrc/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-4\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-bug: Default sort - unread first\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-bug","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:01.044437-05:00","updated_at":"2025-12-11T15:10:21.723696-05:00","dependencies":[{"issue_id":"gitlab-insights-bug","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:48.923381-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-c1vd","title":"Write E2E tests for scroll behavior","description":"Test scroll-to-load triggers next page, loading states appear, keyboard navigation across pages, scroll restoration after navigation, error states handled gracefully. Use realistic datasets (100+ items).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:05.943351-05:00","updated_at":"2025-12-15T12:09:05.943351-05:00","dependencies":[{"issue_id":"gitlab-insights-c1vd","depends_on_id":"gitlab-insights-hn5c","type":"blocks","created_at":"2025-12-15T12:09:40.515252-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-c1vd","depends_on_id":"gitlab-insights-m3gw","type":"blocks","created_at":"2025-12-15T12:09:40.590081-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ca6","title":"Story 11.2: Extend GitLabClient for MR changes","description":"**Context:** Fetch file changes for merge requests.\n\n**Implementation:**\n\nAdd to `src/server/services/gitlab-client.ts`:\n\n```typescript\ninterface GitLabMRChange {\n  old_path: string;\n  new_path: string;\n  new_file: boolean;\n  renamed_file: boolean;\n  deleted_file: boolean;\n}\n\nasync fetchMRChanges(\n  projectId: string,\n  mrIid: number\n): Promise\u003cGitLabMRChange[]\u003e\n```\n\n**API endpoint:** `GET /projects/:id/merge_requests/:iid/changes`\n\n**Rate limiting:** This is expensive - only fetch for open MRs or on-demand.\n\nAdd to event-transformer to populate MRFileChange on MR fetch.\n\n**Acceptance criteria:**\n- [ ] Can fetch MR file changes\n- [ ] Transforms to MRFileChange records\n- [ ] Handles rate limits\n- [ ] Integrated into MR refresh\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:26.565761-05:00","updated_at":"2025-12-12T09:04:26.565761-05:00","dependencies":[{"issue_id":"gitlab-insights-ca6","depends_on_id":"gitlab-insights-xug","type":"blocks","created_at":"2025-12-15T12:13:40.344111-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cb4","title":"Story 12.7: Add getSimilarIssues endpoint","description":"**Context:** API to find similar items.\n\n**Implementation:**\n\nCreate `src/server/api/routers/similarity.ts` with similarityRouter containing two endpoints:\n\n1. **getSimilar** - Find similar items to an existing Event\n   - Input: eventId, limit (default 10), threshold (default 0.7), optional types\n   - Returns similar events with scores\n\n2. **searchSimilar** - Search for similar items by text (for new issue check)\n   - Input: title, optional body, limit, threshold\n   - Generates embedding for input text and searches\n\n**Acceptance criteria:**\n- [ ] Can find similar to existing Event\n- [ ] Can search by text (pre-creation check)\n- [ ] Respects threshold\n- [ ] Returns similarity scores\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:16.982726-05:00","updated_at":"2025-12-12T09:05:16.982726-05:00","dependencies":[{"issue_id":"gitlab-insights-cb4","depends_on_id":"gitlab-insights-2t2","type":"blocks","created_at":"2025-12-15T12:13:43.358052-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cf4","title":"Story 13.4: Create DecisionResultCard","description":"**Context:** Display search results with context and participants.\n\n**Implementation:**\n\nCreate `src/components/decisions/DecisionResultCard.tsx`:\n\n```tsx\ninterface DecisionResultCardProps {\n  result: {\n    event: Event;\n    rank: number;\n    snippet: string; // Highlighted context\n    participants: Person[];\n    discussionCount: number;\n  };\n}\n\nexport function DecisionResultCard({ result }: DecisionResultCardProps) {\n  // Event type badge\n  // Title (highlighted matches)\n  // Context snippet\n  // Participants avatars\n  // Discussion count\n  // Date\n  // Click to view full discussion\n}\n```\n\n**Acceptance criteria:**\n- [ ] Shows highlighted context\n- [ ] Displays participants\n- [ ] Discussion count shown\n- [ ] Links to full view\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.795696-05:00","updated_at":"2025-12-12T09:04:54.795696-05:00","dependencies":[{"issue_id":"gitlab-insights-cf4","depends_on_id":"gitlab-insights-9wc","type":"blocks","created_at":"2025-12-15T12:13:45.778637-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ch8","title":"4.4 Search includes all items with Hide closed filter","description":"Make search return all items (open + closed) with filter toggle.\n\n## Implementation\nWhen search/query is active:\n- Default: show all items matching query (open + closed)\n- Add \"Hide closed\" toggle near search bar\n- When toggled: filter out closed/merged items\n\nThis allows users to find historical/archived items via search.\n\n## Files\n- src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n- Search-related components\n\n---\n## Acceptance Criteria\nContributes to: AC-8\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-ch8: Search includes all items with Hide closed filter\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-ch8\n- Update plan: AC-8 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:01.511918-05:00","updated_at":"2025-12-11T15:10:22.163708-05:00","dependencies":[{"issue_id":"gitlab-insights-ch8","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:49.34145-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cj3","title":"Story 16.5: Integrate collision alerts","description":"Integrate territory-based collision alerts prominently in MR context view.\n\n**Context:** Use Epic 11 (Territory) collision detection to warn about overlapping work. This helps prevent merge conflicts and duplicate effort by surfacing when multiple people are working in the same area.\n\n**Implementation:**\n- Use territory collision detection from Epic 11\n- Display collision alerts prominently in MRContextPanel\n- Show which other MRs/people are working in same area\n- Include severity indicators\n\n**Acceptance criteria:**\n- Collision alerts displayed prominently when detected\n- Shows details of conflicting work (who, what MR, which files)\n- Clear visual treatment for high-priority alerts\n- No false positives for unrelated changes\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.319578-05:00","updated_at":"2025-12-12T09:04:49.319578-05:00","dependencies":[{"issue_id":"gitlab-insights-cj3","depends_on_id":"gitlab-insights-udr","type":"blocks","created_at":"2025-12-15T12:14:00.065475-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-cls","title":"Story 12.4: Backfill embeddings for existing Events","description":"**Context:** Generate embeddings for all existing issues and MRs.\n\n**Implementation:**\n\nCreate backfill script/endpoint with function signature and tRPC endpoint. Includes performance considerations like batch processing (50 at a time), rate limiting, progress reporting, and resume capability.\n\n**Acceptance criteria:**\n- [ ] Can backfill all Events\n- [ ] Progress tracking\n- [ ] Handles errors gracefully\n- [ ] Can be re-run safely\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.026135-05:00","updated_at":"2025-12-12T09:04:54.026135-05:00","dependencies":[{"issue_id":"gitlab-insights-cls","depends_on_id":"gitlab-insights-3gs","type":"blocks","created_at":"2025-12-15T12:13:43.067194-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d140","title":"8.1.0: GitLab API data validation spike","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:18:35.483788-05:00","updated_at":"2025-12-15T12:01:30.589629-05:00","closed_at":"2025-12-15T12:01:30.589629-05:00","dependencies":[{"issue_id":"gitlab-insights-d140","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:18:40.935863-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d1a","title":"Story 9.10: Add indexes for file path prefix queries","description":"**Context:** Need efficient queries for all files in directory X patterns.\n\n**Implementation:**\n\nAdd database indexes and query helpers:\n\nSQL migration:\n- CREATE INDEX idx_file_path_prefix ON File USING btree (userId, projectId, path text_pattern_ops)\n- CREATE INDEX idx_file_directory ON File (userId, directory)\n\nAdd query helper in src/lib/db/file-queries.ts:\n\nasync function findFilesByPathPrefix(db, userId, projectId, pathPrefix)\nasync function findFilesInDirectory(db, userId, projectId, directory)\n\n**Acceptance criteria:**\n- Prefix queries use index\n- Directory queries efficient\n- EXPLAIN shows index usage\n- Performance less than 100ms for typical queries\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:25.667926-05:00","updated_at":"2025-12-12T09:06:25.667926-05:00","dependencies":[{"issue_id":"gitlab-insights-d1a","depends_on_id":"gitlab-insights-9b9","type":"blocks","created_at":"2025-12-15T12:13:14.446544-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d29","title":"Story 8.3: Add Person tRPC router","description":"**Context:** Need API endpoints to query and display Person data.\n\n**Implementation:**\n\nCreate `src/server/api/routers/people.ts`:\n\n```typescript\nexport const peopleRouter = createTRPCRouter({\n  // List all people with optional search\n  list: protectedProcedure\n    .input(z.object({\n      search: z.string().optional(),\n      limit: z.number().default(50)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Person[] with basic stats\n    }),\n\n  // Get single person by ID\n  getById: protectedProcedure\n    .input(z.object({ id: z.string() }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Person with detailed stats\n    }),\n\n  // Get person's activity (Events they authored)\n  getActivity: protectedProcedure\n    .input(z.object({\n      personId: z.string(),\n      limit: z.number().default(50)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Return Events where author matches person's username\n    }),\n\n  // Trigger extraction from existing Events\n  extractFromEvents: protectedProcedure\n    .mutation(async ({ ctx }) =\u003e {\n      // Run person extraction, return count\n    })\n});\n```\n\nAdd to `src/server/api/root.ts`:\n```typescript\nimport { peopleRouter } from \"./routers/people\";\n\nexport const appRouter = createTRPCRouter({\n  // ... existing\n  people: peopleRouter,\n});\n```\n\n**Acceptance criteria:**\n- [ ] `people.list` returns paginated people with search\n- [ ] `people.getById` returns single person\n- [ ] `people.getActivity` returns person's Events\n- [ ] `people.extractFromEvents` runs extraction\n- [ ] All procedures enforce user isolation (userId filter)\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:02.705309-05:00","updated_at":"2025-12-12T09:05:02.705309-05:00","dependencies":[{"issue_id":"gitlab-insights-d29","depends_on_id":"gitlab-insights-uud","type":"blocks","created_at":"2025-12-15T12:12:52.676087-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-d33","title":"Story 13.2: Create getDecisions endpoint","description":"**Context:** API for decision archaeology queries.\n\n**Implementation:**\n\nAdd to `src/server/api/routers/decisions.ts`:\n\n```typescript\nexport const decisionsRouter = createTRPCRouter({\n  // Search for decisions/discussions\n  search: protectedProcedure\n    .input(z.object({\n      query: z.string(),\n      types: z.array(z.enum(['issue', 'merge_request', 'comment'])).optional(),\n      dateRange: z.object({\n        from: z.date().optional(),\n        to: z.date().optional()\n      }).optional(),\n      limit: z.number().default(20)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Combine FTS with semantic search\n      // Return ranked results with context\n    })\n});\n```\n\n**Search strategy:**\n1. FTS for keyword matches\n2. Semantic search for meaning matches\n3. Combine and deduplicate\n4. Return with context snippets\n\n**Acceptance criteria:**\n- [ ] Searches all content types\n- [ ] Date range filtering\n- [ ] Returns context snippets\n- [ ] Combined keyword + semantic\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:54.38228-05:00","updated_at":"2025-12-12T09:04:54.38228-05:00","dependencies":[{"issue_id":"gitlab-insights-d33","depends_on_id":"gitlab-insights-2q6","type":"blocks","created_at":"2025-12-15T12:13:45.61112-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dgci","title":"Update EventTable component for infinite scroll","description":"Update /src/components/dashboard/EventTable.tsx to accept optional infiniteScroll prop {fetchNextPage, hasNextPage, isFetchingNextPage}. Add sentinel div at bottom with loading indicator. Integrate with useInfiniteScroll hook. Preserve existing keyboard nav, scroll restoration, and selection behavior.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:03.582599-05:00","updated_at":"2025-12-15T12:09:03.582599-05:00","dependencies":[{"issue_id":"gitlab-insights-dgci","depends_on_id":"gitlab-insights-mdhx","type":"blocks","created_at":"2025-12-15T12:09:38.874892-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dgci","depends_on_id":"gitlab-insights-ayt0","type":"blocks","created_at":"2025-12-15T12:09:38.957087-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-di5","title":"Story 9.5: Link commits to Person records","description":"**Context:** Match commit authors to existing Person records for relationship queries.\n\n**Implementation:**\n\nAdd to `src/server/services/commit-transformer.ts`:\n\n```typescript\n// Find or create Person from commit author\nasync function resolveCommitAuthor(\n  db: PrismaClient,\n  userId: string,\n  authorName: string,\n  authorEmail: string\n): Promise\u003cstring | null\u003e // Returns personId or null\n```\n\n**Matching logic (in priority order):**\n1. Match by email (exact)\n2. Match by name (exact, case-insensitive)\n3. Match by name (fuzzy - first/last name parts)\n4. Return null if no match (orphan commit)\n\n**Future enhancement:** Store unmatched authors for manual linking.\n\n**Acceptance criteria:**\n- [ ] Matches commits to Person by email\n- [ ] Falls back to name matching\n- [ ] Handles unmatched authors gracefully\n- [ ] Links personId in Commit record\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:11.205027-05:00","updated_at":"2025-12-12T09:05:11.205027-05:00","dependencies":[{"issue_id":"gitlab-insights-di5","depends_on_id":"gitlab-insights-3oq","type":"blocks","created_at":"2025-12-15T12:13:14.010101-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dik","title":"Story 11.6: Create getTerritoryForPerson endpoint","description":"**Context:** Show what files/directories a person is currently working on.\n\n**Implementation:**\n\nAdd to `src/server/api/routers/territory.ts`:\n\n```typescript\nexport const territoryRouter = createTRPCRouter({\n  // Get person's active territory\n  getForPerson: protectedProcedure\n    .input(z.object({\n      personId: z.string(),\n      timeWindow: z.number().default(30) // Days\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Find files they've touched recently (commits, MRs)\n      // Group by directory\n      // Return with activity counts\n    }),\n\n  // Get territory heatmap (all people's activity)\n  getHeatmap: protectedProcedure\n    .input(z.object({\n      projectId: z.string().optional(),\n      timeWindow: z.number().default(30)\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Aggregate all activity by directory\n      // Return directories with person counts\n    })\n});\n```\n\n**Acceptance criteria:**\n- [ ] Returns person's active files/directories\n- [ ] Respects time window\n- [ ] Groups by directory\n- [ ] Heatmap shows activity density\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:09.436245-05:00","updated_at":"2025-12-12T09:05:09.436245-05:00","dependencies":[{"issue_id":"gitlab-insights-dik","depends_on_id":"gitlab-insights-85l","type":"blocks","created_at":"2025-12-15T12:13:40.651253-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dj8","title":"Story 17.3: Show instant expert list with contact info","description":"Display instant expert list with contact information for the selected path/area.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Leverages expertise scoring from Epic 10\n- Critical for quick incident response\n\nAcceptance Criteria:\n- Query and display experts for selected path\n- Show expert names and contact information\n- Display expertise metrics/scores\n- Provide quick contact options (email, Slack, etc.)\n- Sort experts by relevance/expertise level\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.99984-05:00","updated_at":"2025-12-12T09:04:38.99984-05:00","dependencies":[{"issue_id":"gitlab-insights-dj8","depends_on_id":"gitlab-insights-8pw","type":"blocks","created_at":"2025-12-15T12:14:02.08329-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dnfs","title":"Update Queries router with cursor support (getNewItems)","description":"Update /src/server/api/routers/queries.ts getNewItems endpoint. Add cursor pagination while preserving lastVisitedAt filter. Return {items, nextCursor, hasMore} format.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:02.054362-05:00","updated_at":"2025-12-15T12:09:02.054362-05:00","dependencies":[{"issue_id":"gitlab-insights-dnfs","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:37.476731-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-do0","title":"Story 11.9: Add CollisionAlert component","description":"**Context:** Show collision warning on MR detail view.\n\n**Implementation:**\n\nCreate `src/components/territory/CollisionAlert.tsx`:\n\n```tsx\ninterface CollisionAlertProps {\n  mrEventId: string;\n}\n\nexport function CollisionAlert({ mrEventId }: CollisionAlertProps) {\n  const { data: collisions } = trpc.territory.getCollisions.useQuery({\n    mrEventId,\n    threshold: 0.3\n  });\n\n  if (!collisions?.length) return null;\n\n  return (\n    \u003cAlert color=\"warning\"\u003e\n      \u003cAlertTitle\u003e\n        {collisions.length} potential collision(s) detected\n      \u003c/AlertTitle\u003e\n      {collisions.map(c =\u003e (\n        \u003cCollisionItem key={c.otherMR.id} collision={c} /\u003e\n      ))}\n    \u003c/Alert\u003e\n  );\n}\n```\n\nIntegrate into EventDetail for MR type events.\n\n**Acceptance criteria:**\n- [ ] Shows alert for collisions above threshold\n- [ ] Lists conflicting MRs\n- [ ] Shows severity indicator\n- [ ] Hidden when no collisions\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:37.812446-05:00","updated_at":"2025-12-12T09:05:37.812446-05:00","dependencies":[{"issue_id":"gitlab-insights-do0","depends_on_id":"gitlab-insights-4zq","type":"blocks","created_at":"2025-12-15T12:13:40.877053-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dw9","title":"1.1a Fix Event self-relation onDelete behavior","description":"Fix missing onDelete behavior on Event self-relation for parent-child hierarchy.\n\n## Problem\nThe `parent` relation in Event model does not specify onDelete behavior:\n```prisma\nparent   Event?  @relation(\"EventHierarchy\", fields: [parentEventId], references: [id])\n```\n\nWithout explicit onDelete, Prisma defaults to restricting deletion, which could prevent deleting parent events (issues/MRs) that have children (comments). This would cause runtime errors.\n\n## Solution\nAdd `onDelete: SetNull` to preserve child events with nullified parent reference:\n```prisma\nparent   Event?  @relation(\"EventHierarchy\", fields: [parentEventId], references: [id], onDelete: SetNull)\n```\n\nAlternative: Use `onDelete: Cascade` if child comments should be deleted with their parent issue/MR.\n\n## Location\nprisma/schema.prisma:113 (approximately)\n\n## Discovered\nFound during code review of gitlab-insights-82a (ReadEvent model)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T15:29:05.234309-05:00","updated_at":"2025-12-11T15:29:14.103197-05:00","dependencies":[{"issue_id":"gitlab-insights-dw9","depends_on_id":"gitlab-insights-bgm","type":"discovered-from","created_at":"2025-12-11T15:29:19.680931-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dwy","title":"Story 12.2: Add embedding column to Event model","description":"**Context:** Store vector embeddings for similarity search.\n\n**Implementation:**\n\nAdd pgvector extension and column:\n\n```sql\n-- Migration\nCREATE EXTENSION IF NOT EXISTS vector;\n\nALTER TABLE \"Event\" ADD COLUMN embedding vector(384);\n\nCREATE INDEX idx_event_embedding ON \"Event\"\nUSING ivfflat (embedding vector_cosine_ops)\nWITH (lists = 100);\n```\n\nUpdate Prisma schema:\n```prisma\nmodel Event {\n  // ... existing\n  embedding     Unsupported(\"vector(384)\")?\n}\n```\n\n**Note:** Prisma doesn't natively support vector type. Use raw SQL for embedding operations.\n\n**Acceptance criteria:**\n- [ ] pgvector extension enabled\n- [ ] Embedding column added\n- [ ] IVFFlat index created\n- [ ] Migration runs\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:19.771477-05:00","updated_at":"2025-12-12T09:04:19.771477-05:00","dependencies":[{"issue_id":"gitlab-insights-dwy","depends_on_id":"gitlab-insights-a3r","type":"blocks","created_at":"2025-12-15T12:13:42.924292-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-dxn","title":"8.1.4: Create expertise query service","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:10:46.667463-05:00","updated_at":"2025-12-15T12:03:17.73077-05:00","closed_at":"2025-12-15T12:03:17.73077-05:00","dependencies":[{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.923403-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-a0y","type":"blocks","created_at":"2025-12-15T11:11:40.888497-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-pf0","type":"blocks","created_at":"2025-12-15T11:11:40.957802-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-dxn","depends_on_id":"gitlab-insights-07y","type":"blocks","created_at":"2025-12-15T11:11:41.032579-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e0h","title":"1.5 Update event transformer for notes/comments","description":"Update event-transformer.ts to capture parent relationships for comments.\n\n## Implementation\nIn src/server/services/gitlab/event-transformer.ts, when transforming notes:\n\nMap GitLab Notes API fields directly:\n- note.noteable_id -\u003e gitlabParentId\n- note.noteable_type -\u003e parentType (convert \"Issue\" | \"MergeRequest\")\n- note.system -\u003e isSystemNote\n\nAfter creating the Event, look up parent:\n- Query Event where gitlabEventId = gitlabParentId AND type matches parentType\n- Set parentEventId to found Event's id\n\n## File\nsrc/server/services/gitlab/event-transformer.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-1\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-e0h: Update event transformer for notes/comments\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-e0h\n- Update plan: AC-1 -\u003e \"implemented\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:06.215644-05:00","updated_at":"2025-12-11T15:07:52.754952-05:00","dependencies":[{"issue_id":"gitlab-insights-e0h","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:47.417303-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e0p","title":"8.1.7: Build expertise heatmap visualization","description":"","status":"closed","priority":2,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:11:20.174083-05:00","updated_at":"2025-12-15T12:03:18.166013-05:00","closed_at":"2025-12-15T12:03:18.166013-05:00","dependencies":[{"issue_id":"gitlab-insights-e0p","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.203273-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-e0p","depends_on_id":"gitlab-insights-ylc","type":"blocks","created_at":"2025-12-15T11:11:41.244141-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e1i","title":"Story 16.6: Add similar MRs section","description":"Add a section showing similar MRs using similarity scoring from Epic 12.\n\n**Context:** Help reviewers and authors find related work by surfacing MRs with similar descriptions, touched files, or goals. This provides useful context and can reveal related implementations.\n\n**Implementation:**\n- Use similarity scoring from Epic 12\n- Query for MRs with high similarity scores\n- Display with similarity explanation\n- Link to similar MRs\n\n**Acceptance criteria:**\n- Shows MRs with similar descriptions/changes\n- Similarity score or explanation included\n- Links directly to similar MRs\n- Handles case where no similar MRs found\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.541453-05:00","updated_at":"2025-12-12T09:04:49.541453-05:00","dependencies":[{"issue_id":"gitlab-insights-e1i","depends_on_id":"gitlab-insights-cj3","type":"blocks","created_at":"2025-12-15T12:14:00.139522-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e5z","title":"Story 15.4: Create DigestEmail template","description":"**Context:** Email template for daily digest.\n\n**Implementation:**\n\nCreate `src/emails/digest-email.tsx`:\n\n```tsx\nimport { Html, Head, Body, Container, Section, Text, Link } from '@react-email/components';\n\ninterface DigestEmailProps {\n  userName: string;\n  dateRange: string;\n  activities: DigestActivity[];\n  stats: {\n    total: number;\n    byType: Record\u003cstring, number\u003e;\n  };\n}\n\nexport function DigestEmail({ userName, activities, stats }: DigestEmailProps) {\n  return (\n    \u003cHtml\u003e\n      \u003cHead /\u003e\n      \u003cBody\u003e\n        \u003cContainer\u003e\n          {/* Header */}\n          \u003cSection\u003e\n            \u003cText\u003eHi {userName}, here's your GitLab activity digest\u003c/Text\u003e\n          \u003c/Section\u003e\n\n          {/* Summary stats */}\n          \u003cSection\u003e\n            \u003cText\u003e{stats.total} items in your areas of interest\u003c/Text\u003e\n          \u003c/Section\u003e\n\n          {/* Activity list by relevance */}\n          \u003cSection\u003e\n            {activities.map(activity =\u003e (\n              \u003cDigestActivityRow key={activity.id} activity={activity} /\u003e\n            ))}\n          \u003c/Section\u003e\n\n          {/* Footer with unsubscribe */}\n          \u003cSection\u003e\n            \u003cLink href={unsubscribeUrl}\u003eUnsubscribe\u003c/Link\u003e\n          \u003c/Section\u003e\n        \u003c/Container\u003e\n      \u003c/Body\u003e\n    \u003c/Html\u003e\n  );\n}\n```\n\n**Acceptance criteria:**\n- [ ] Clean email layout\n- [ ] Shows relevant activities\n- [ ] Links to GitLab Insights\n- [ ] Unsubscribe link\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:04.460154-05:00","updated_at":"2025-12-12T09:05:04.460154-05:00","dependencies":[{"issue_id":"gitlab-insights-e5z","depends_on_id":"gitlab-insights-nmx","type":"blocks","created_at":"2025-12-15T12:13:57.756227-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-e9on","title":"8.4.2: Implement stalled work detection","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:15:06.401215-05:00","updated_at":"2025-12-15T12:03:19.6114-05:00","closed_at":"2025-12-15T12:03:19.6114-05:00","dependencies":[{"issue_id":"gitlab-insights-e9on","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.423189-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-e9on","depends_on_id":"gitlab-insights-mas3","type":"blocks","created_at":"2025-12-15T11:16:07.890533-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-edm","title":"Story 9.6: Create File extraction from commit diffs","description":"**Context:** Populate the File table with unique file paths from commit diffs.\n\n**Implementation:**\n\nAdd to `src/server/services/commit-transformer.ts`:\n\n```typescript\n// Ensure file exists in File table, create if not\nasync function ensureFile(\n  db: PrismaClient,\n  userId: string,\n  projectId: string,\n  filePath: string\n): Promise\u003cstring\u003e // Returns fileId\n\n// Parse file path into components\nfunction parseFilePath(path: string): {\n  filename: string;\n  directory: string;\n  extension: string | null;\n}\n\n// Batch create/update files from commit diffs\nasync function ensureFilesFromDiffs(\n  db: PrismaClient,\n  userId: string,\n  projectId: string,\n  diffs: GitLabCommitDiff[]\n): Promise\u003cMap\u003cstring, string\u003e\u003e // path -\u003e fileId\n```\n\n**Implementation notes:**\n- Use upsert to handle existing files\n- Track both old_path and new_path for renames\n- Skip deleted files from future queries but keep history\n\n**Acceptance criteria:**\n- [ ] Creates File records for new paths\n- [ ] Parses directory/extension correctly\n- [ ] Handles renames (both paths stored)\n- [ ] Deduplicates across commits\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:23.10914-05:00","updated_at":"2025-12-12T09:05:23.10914-05:00","dependencies":[{"issue_id":"gitlab-insights-edm","depends_on_id":"gitlab-insights-di5","type":"blocks","created_at":"2025-12-15T12:13:14.089737-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ej4o","title":"Frontend Core Hooks","description":"Create reusable React hooks for infinite scroll functionality. These hooks encapsulate Intersection Observer logic and TanStack Query infinite query patterns for consistent behavior across all views.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:04.743832-05:00","updated_at":"2025-12-15T12:08:04.743832-05:00","dependencies":[{"issue_id":"gitlab-insights-ej4o","depends_on_id":"gitlab-insights-igun","type":"blocks","created_at":"2025-12-15T12:09:37.831129-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-eqz","title":"Epic 10: Intelligence Platform - Phase 1 MVP","description":"","status":"closed","priority":1,"issue_type":"epic","estimated_minutes":2400,"created_at":"2025-12-15T11:08:44.979683-05:00","updated_at":"2025-12-15T12:02:58.477528-05:00","closed_at":"2025-12-15T12:02:58.477528-05:00","dependencies":[{"issue_id":"gitlab-insights-eqz","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-15T11:19:57.334629-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-eqz","depends_on_id":"gitlab-insights-mo8","type":"blocks","created_at":"2025-12-15T12:01:06.121089-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-f2b","title":"Story 16.3: Create MRContextPanel component","description":"Create a React component that displays all MR context suggestions in a unified panel.\n\n**Context:** This is the main UI component for the MR Context View. It should display suggested reviewers, collision alerts, similar MRs, and related decisions in an organized, scannable layout.\n\n**Implementation:**\n- Create new React component MRContextPanel\n- Consume getMRContext tRPC endpoint\n- Design clear sections for different suggestion types\n- Handle loading and error states\n\n**Acceptance criteria:**\n- Component displays all context sections (reviewers, collisions, similar MRs, decisions)\n- Clear visual hierarchy and scannable layout\n- Proper loading and error handling\n- Responsive design\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:48.850796-05:00","updated_at":"2025-12-12T09:04:48.850796-05:00","dependencies":[{"issue_id":"gitlab-insights-f2b","depends_on_id":"gitlab-insights-0yt","type":"blocks","created_at":"2025-12-15T12:13:59.915572-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-f87","title":"Story 13.7: Add timeline visualization","description":"**Context:** Show when discussion happened over time.\n\n**Implementation:**\n\nCreate `src/components/decisions/ThreadTimeline.tsx`:\n\n```tsx\ninterface ThreadTimelineProps {\n  thread: DiscussionThread;\n}\n\nexport function ThreadTimeline({ thread }: ThreadTimelineProps) {\n  // Horizontal timeline\n  // Dots for each comment\n  // Hover for details\n  // Shows activity intensity\n}\n```\n\n**Visualization:**\n- Timeline axis from first to last comment\n- Dots/markers for each comment\n- Density shows activity bursts\n- Click to jump to comment\n\n**Acceptance criteria:**\n- [ ] Shows timeline of activity\n- [ ] Interactive (click to jump)\n- [ ] Shows relative timing\n- [ ] Handles long discussions\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:55.453163-05:00","updated_at":"2025-12-12T09:04:55.453163-05:00","dependencies":[{"issue_id":"gitlab-insights-f87","depends_on_id":"gitlab-insights-sq5","type":"blocks","created_at":"2025-12-15T12:13:46.015283-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fjp","title":"Story 10.7: Create ExpertView page","description":"Context: Dedicated page for expert discovery.\n\nImplementation:\n\nCreate src/app/(auth)/experts/page.tsx:\n- Async function requiring auth\n- Returns ExpertViewClient component\n\nCreate src/components/expertise/ExpertViewClient.tsx:\n- Search input (file path, directory, or keyword)\n- Search type selector (file | directory | keyword)\n- Results list (ExpertResultCards)\n- Empty state with example queries\n\nSearch modes:\n- File path: 'src/auth/login.ts'\n- Directory: 'src/auth/' (auto-adds trailing slash)\n- Keyword: 'authentication' (searches event content)\n\nAcceptance criteria:\n- Page renders at /experts\n- Search input with type selector\n- Shows results with scores\n- Empty state guides usage\n- Sidebar link added\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:45.711718-05:00","updated_at":"2025-12-12T09:05:45.711718-05:00","dependencies":[{"issue_id":"gitlab-insights-fjp","depends_on_id":"gitlab-insights-wk1","type":"blocks","created_at":"2025-12-15T12:13:17.006934-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fno","title":"Story 15.9: Add \"alert me about this\" from search","description":"**Context:** Search results offer option to add topic to digest.\n\n**Implementation:**\n\nAdd to search results:\n\n```tsx\n\u003cSearchResultCard\u003e\n  {/* ... existing content */}\n  \u003cDropdownMenu\u003e\n    \u003cDropdownItem onClick={() =\u003e addToDigest(searchTerm)}\u003e\n      Add \"{searchTerm}\" to daily digest\n    \u003c/DropdownItem\u003e\n  \u003c/DropdownMenu\u003e\n\u003c/SearchResultCard\u003e\n```\n\nAdd topic to DigestPreference.topics array.\n\n**Acceptance criteria:**\n- [ ] Option available on search results\n- [ ] Adds topic to digest prefs\n- [ ] Shows confirmation toast\n- [ ] Visible in digest settings\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:17.856192-05:00","updated_at":"2025-12-12T09:06:17.856192-05:00","dependencies":[{"issue_id":"gitlab-insights-fno","depends_on_id":"gitlab-insights-a7f","type":"blocks","created_at":"2025-12-15T12:13:58.156575-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-fww","title":"3.1 Create WorkItemCard component","description":"Create collapsible card component for issues/MRs.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/WorkItemCard.tsx\n\nProps:\n- workItem: WorkItemSummary\n- isSelected: boolean\n- isExpanded: boolean\n- onToggleExpand: () =\u003e void\n- onSelect: () =\u003e void\n- onActivityItemClick: (activityId: string) =\u003e void\n\n## Card Layout\n\nCollapsed (default):\n+--------------------------------------------------+\n| [Badge] #123 Title here...            [NEW] [v] |\n| Open - Alice - 2 days ago                        |\n| 3 new comments - [avatars] 5 participants        |\n| Latest: \"Bob commented: I think the...\"          |\n| Related: MR !456 (merged) - Labels: bug, auth    |\n+--------------------------------------------------+\n\nExpanded:\n+--------------------------------------------------+\n| [Badge] #123 Title here...            [NEW] [^] |\n| Open - Alice - 2 days ago                        |\n|--------------------------------------------------|\n| Activity Log:                                    |\n| - Bob commented: \"I think the root cause...\"     |\n| - Alice changed status: Open -\u003e In Progress      |\n| - Dave commented: \"I can reproduce this...\"      |\n| [scrollable, max-height ~1000px]                 |\n+--------------------------------------------------+\n\n## Styling (from UX spec)\n- Card background: bg-gray-50 (light) / bg-gray-800 (dark)\n- Border: border-gray-200 (light) / border-gray-600 (dark)\n- NEW badge: olive accent color\n- Selected state: ring/outline\n- Query match: olive left border\n\n## Interactions\n- Header click: toggle expand\n- Activity item click: call onActivityItemClick\n- Related item click: emit event to scroll to that card\n\n## File\nsrc/app/(authenticated)/dashboard/_components/WorkItemCard.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-6, AC-7\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-fww: Create WorkItemCard component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-fww\n- Update plan: AC-6, AC-7 -\u003e \"ui-ready\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:38.463687-05:00","updated_at":"2025-12-11T15:09:21.304084-05:00","dependencies":[{"issue_id":"gitlab-insights-fww","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:40.143605-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-gcv","title":"1.3 Add dashboardView preference to User model","description":"Add user preference field for switching between grouped and flat views.\n\n## Implementation\nAdd to User model in prisma/schema.prisma:\n\ndashboardView   String   @default(\"grouped\")  // \"grouped\" | \"flat\"\n\n## File\nprisma/schema.prisma\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-gcv: Add dashboardView preference to User model\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-gcv","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T14:23:57.67338-05:00","updated_at":"2025-12-12T08:34:37.987031-05:00","closed_at":"2025-12-12T08:34:37.987031-05:00"}
{"id":"gitlab-insights-ggqk","title":"[EPIC] Infinite Scroll Implementation","description":"","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-15T12:07:42.089986-05:00","updated_at":"2025-12-15T12:07:42.089986-05:00","dependencies":[{"issue_id":"gitlab-insights-ggqk","depends_on_id":"gitlab-insights-uj2a","type":"blocks","created_at":"2025-12-15T12:09:41.953856-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-gj9","title":"2.3 Create markAsRead endpoint","description":"Create tRPC mutation to mark events as read.\n\n## Implementation\nAdd to src/server/api/routers/events.ts:\n\nmarkAsRead: protectedProcedure\n  .input(z.object({ eventId: z.string() }))\n  .mutation(async ({ ctx, input }) =\u003e {\n    await ctx.db.readEvent.upsert({\n      where: {\n        userId_eventId: {\n          userId: ctx.session.user.id,\n          eventId: input.eventId\n        }\n      },\n      create: {\n        userId: ctx.session.user.id,\n        eventId: input.eventId\n      },\n      update: {\n        readAt: new Date()\n      }\n    });\n  })\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-9\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-gj9: Create markAsRead endpoint\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-gj9\n- Update plan: AC-9 -\u003e \"implemented\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.521544-05:00","updated_at":"2025-12-11T15:08:38.49905-05:00","dependencies":[{"issue_id":"gitlab-insights-gj9","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:28.823924-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-gmt2","title":"Query Detail Infinite Scroll Integration","description":"Integrate infinite scroll into Saved Query detail view. Updates query detail components to support cursor pagination for query results.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:05.982749-05:00","updated_at":"2025-12-15T12:08:05.982749-05:00","dependencies":[{"issue_id":"gitlab-insights-gmt2","depends_on_id":"gitlab-insights-ej4o","type":"blocks","created_at":"2025-12-15T12:09:38.621286-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-hn5c","title":"Update DashboardClient to use infinite queries","description":"Update /src/components/dashboard/DashboardClient.tsx to use api.events.getForDashboard.useInfiniteQuery. Flatten pages with useMemo. Pass infinite scroll props to EventTable. Add smooth scroll to top on filter change. Query key includes filterLabel to auto-reset on filter change.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:03.953698-05:00","updated_at":"2025-12-15T12:09:03.953698-05:00","dependencies":[{"issue_id":"gitlab-insights-hn5c","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T12:09:39.225921-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-hxmx","title":"Epic: Work Item Grouping - Transform flat feed into hierarchical work-item-centric view","description":"","status":"open","priority":0,"issue_type":"epic","estimated_minutes":0,"created_at":"2025-12-15T12:15:59.194414-05:00","updated_at":"2025-12-15T12:15:59.194414-05:00"}
{"id":"gitlab-insights-i03h","title":"Error Handling \u0026 Recovery","description":"Implement graceful error handling for pagination failures. Includes toast notifications, automatic retry on scroll, and manual retry actions.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:08.353134-05:00","updated_at":"2025-12-15T12:08:08.353134-05:00","dependencies":[{"issue_id":"gitlab-insights-i03h","depends_on_id":"gitlab-insights-mdhx","type":"blocks","created_at":"2025-12-15T12:09:41.07741-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-igun","title":"Backend Cursor Infrastructure","description":"Implement cursor-based pagination in backend routers and utilities. This provides the foundation for infinite scroll by replacing offset/limit pagination with cursor-based pagination using createdAt + ID for deterministic ordering.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:04.212921-05:00","updated_at":"2025-12-15T12:08:04.212921-05:00"}
{"id":"gitlab-insights-ipd","title":"4.3 Dashboard shows open items only","description":"Filter main dashboard to show only open items.\n\n## Implementation\nIn DashboardClient.tsx:\n\nPass status: \"open\" to getWorkItemsGrouped query by default.\nThis excludes status = \"closed\" and status = \"merged\".\n\nClosed/merged items are accessible via search (see 4.4).\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-6\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-ipd: Dashboard shows open items only\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-ipd\n- Update plan: AC-6 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:01.274962-05:00","updated_at":"2025-12-11T15:10:21.954231-05:00","dependencies":[{"issue_id":"gitlab-insights-ipd","depends_on_id":"gitlab-insights-9ed","type":"blocks","created_at":"2025-12-11T14:26:49.130337-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-iw2","title":"BUG: postgres-fts.ts uses plainto_tsquery which ignores AND operators, breaking multi-keyword search","description":"## Root Cause\nIn src/lib/search/postgres-fts.ts, the buildTsQueryString() function (line 77-89) builds a query string with '\u0026' operators to implement AND logic for multi-keyword searches:\n```typescript\nreturn sanitized.join(\" \u0026 \");\n```\n\nHowever, this query string is then passed to PostgreSQL's plainto_tsquery() function (lines 137, 142, 148, 154, 206) which IGNORES operators and treats the entire input as plain text.\n\nThe comment on line 113 even says 'use to_tsquery with \u0026 for AND logic' but the actual implementation uses plainto_tsquery.\n\n## Impact\nMulti-keyword searches like 'authentication login' do NOT use AND logic. Instead of finding items containing BOTH words, it searches for the literal string 'authentication \u0026 login'.\n\n## Suggested Fix\nOption 1: Use to_tsquery() with properly sanitized input\nOption 2: Build separate plainto_tsquery() calls for each keyword and AND them together in SQL using the \u0026\u0026 operator:\n```sql\nplainto_tsquery('keyword1') \u0026\u0026 plainto_tsquery('keyword2')\n```\n\n## Files Affected\n- src/lib/search/postgres-fts.ts","status":"closed","priority":1,"issue_type":"bug","estimated_minutes":30,"created_at":"2025-12-15T09:38:41.840202-05:00","updated_at":"2025-12-15T09:52:37.460748-05:00","closed_at":"2025-12-15T09:52:37.460748-05:00"}
{"id":"gitlab-insights-j6z","title":"Story 11.4: Implement collision detection","description":"**Context:** Find other MRs that overlap with a given MR's files.\n\n**Implementation:**\n\nAdd to `src/server/services/territory-scorer.ts`:\n\n```typescript\ninterface Collision {\n  otherMR: Event;\n  overlapScore: TerritoryScore;\n  severity: number;\n}\n\nasync function findCollisions(\n  db: PrismaClient,\n  userId: string,\n  mrEventId: string,\n  options?: {\n    threshold?: number;      // Default 0.3\n    includeExpertise?: boolean;\n  }\n): Promise\u003cCollision[]\u003e\n```\n\n**Implementation flow:**\n1. Get files for the input MR\n2. Find other open MRs with overlapping files\n3. Calculate overlap score for each\n4. Filter by threshold\n5. Sort by severity DESC\n\n**Query approach:**\n```sql\n-- Find MRs with overlapping files\nSELECT DISTINCT e.id, e.title, e.\"gitlabUrl\"\nFROM \"Event\" e\nJOIN \"MRFileChange\" mfc ON mfc.\"eventId\" = e.id\nWHERE e.\"userId\" = $1\n  AND e.type = 'merge_request'\n  AND e.id != $2\n  AND mfc.\"filePath\" IN (\n    SELECT \"filePath\" FROM \"MRFileChange\" WHERE \"eventId\" = $2\n  )\n```\n\n**Acceptance criteria:**\n- [ ] Finds overlapping MRs\n- [ ] Calculates overlap scores\n- [ ] Filters by threshold\n- [ ] Returns sorted results\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:50.618868-05:00","updated_at":"2025-12-12T09:04:50.618868-05:00","dependencies":[{"issue_id":"gitlab-insights-j6z","depends_on_id":"gitlab-insights-t2r","type":"blocks","created_at":"2025-12-15T12:13:40.502239-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-jfx","title":"Story 15.2: Create digest settings page","description":"**Context:** UI to configure email digest.\n\n**Implementation:**\n\nCreate `src/app/(auth)/settings/digest/page.tsx`:\n\n```tsx\nexport default async function DigestSettingsPage() {\n  await requireAuth();\n  return \u003cDigestSettingsClient /\u003e;\n}\n```\n\nCreate `src/components/settings/DigestSettingsClient.tsx`:\n\n```tsx\nexport function DigestSettingsClient() {\n  // Enable/disable toggle\n  // Frequency selector\n  // Send time picker\n  // Territory filter (reuse from Activity)\n  // Topic filter\n  // Threshold sliders\n  // Test send button\n}\n```\n\n**Acceptance criteria:**\n- [ ] Can enable/disable\n- [ ] Can set frequency\n- [ ] Can configure filters\n- [ ] Saves to DigestPreference\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.498656-05:00","updated_at":"2025-12-12T09:04:38.498656-05:00","dependencies":[{"issue_id":"gitlab-insights-jfx","depends_on_id":"gitlab-insights-q4a","type":"blocks","created_at":"2025-12-15T12:13:57.601094-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ju80","title":"Dashboard Infinite Scroll Integration","description":"Integrate infinite scroll into Dashboard view components. Updates EventTable and DashboardClient to use cursor-based pagination with auto-load on scroll.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:05.066642-05:00","updated_at":"2025-12-15T12:08:05.066642-05:00","dependencies":[{"issue_id":"gitlab-insights-ju80","depends_on_id":"gitlab-insights-ej4o","type":"blocks","created_at":"2025-12-15T12:09:38.455627-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-k53m","title":"Implement automatic retry logic","description":"Configure Intersection Observer to auto-retry failed page loads when sentinel comes back into view. Use isFetchingNextPage flag to prevent duplicate requests. Disconnect observer during fetch to prevent race conditions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:07.975038-05:00","updated_at":"2025-12-15T12:09:07.975038-05:00"}
{"id":"gitlab-insights-kqw","title":"5.2 Conditionally render views","description":"Render appropriate view based on user preference.\n\n## Implementation\nIn DashboardClient.tsx:\n\nconst { data: user } = api.user.getCurrent.useQuery();\n\n{user?.dashboardView === \"grouped\" ? (\n  \u003cWorkItemList ... /\u003e\n) : (\n  \u003cEventTable ... /\u003e // existing flat view\n)}\n\n## File\nsrc/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-kqw: Conditionally render views\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-kqw","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:25:07.304011-05:00","updated_at":"2025-12-11T15:10:35.894364-05:00","dependencies":[{"issue_id":"gitlab-insights-kqw","depends_on_id":"gitlab-insights-9jt","type":"blocks","created_at":"2025-12-11T14:26:04.099267-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ksg","title":"1.4 Create database migration","description":"Create and run Prisma migration for all schema changes.\n\n## Implementation\n1. Run: npx prisma migrate dev --name add-event-relationships\n2. Migration should:\n   - Preserve User, UserQuery, MonitoredProject tables\n   - Add new columns to Event table\n   - Create ReadEvent table\n   - Add all indexes\n\nNote: This is a clean slate approach. The migration may drop Event data.\nIf data preservation is needed, consider a multi-step migration.\n\n## Verification\n- Run: npx prisma studio\n- Confirm Event table has all new fields\n- Confirm ReadEvent table exists\n- Confirm indexes are created\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-ksg: Create database migration for event relationships\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-ksg","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:05.973113-05:00","updated_at":"2025-12-11T15:07:52.530323-05:00","dependencies":[{"issue_id":"gitlab-insights-ksg","depends_on_id":"gitlab-insights-bgm","type":"blocks","created_at":"2025-12-11T14:25:46.417562-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ksg","depends_on_id":"gitlab-insights-82a","type":"blocks","created_at":"2025-12-11T14:25:46.722584-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ksg","depends_on_id":"gitlab-insights-gcv","type":"blocks","created_at":"2025-12-11T14:25:47.048451-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-las","title":"8.2.3: Implement related discussion discovery","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:12:39.673431-05:00","updated_at":"2025-12-15T12:03:18.802032-05:00","closed_at":"2025-12-15T12:03:18.802032-05:00","dependencies":[{"issue_id":"gitlab-insights-las","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.492094-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-lec","title":"Story 15.5: Implement digest-generator service","description":"**Context:** Generate digest content for a user.\n\n**Implementation:**\n\nCreate `src/server/services/digest-generator.ts`:\n\n```typescript\ninterface DigestContent {\n  activities: DigestActivity[];\n  stats: DigestStats;\n  generatedAt: Date;\n}\n\nasync function generateDigest(\n  db: PrismaClient,\n  userId: string,\n  preferences: DigestPreference\n): Promise\u003cDigestContent | null\u003e {\n  // 1. Get date range (last 24h for daily)\n  const from = new Date(Date.now() - 24 * 60 * 60 * 1000);\n  const to = new Date();\n\n  // 2. Fetch events in range\n  const events = await getEventsInRange(db, userId, from, to);\n\n  // 3. Score relevance\n  const scored = await scoreEvents(events, preferences);\n\n  // 4. Filter by threshold\n  const relevant = scored.filter(e =\u003e e.score \u003e= preferences.minRelevance);\n\n  // 5. Sort and limit\n  const activities = relevant\n    .sort((a, b) =\u003e b.score - a.score)\n    .slice(0, preferences.maxItems);\n\n  // 6. Return null if nothing to send\n  if (activities.length === 0) return null;\n\n  return { activities, stats: calculateStats(activities), generatedAt: to };\n}\n```\n\n**Acceptance criteria:**\n- [ ] Generates relevant activities\n- [ ] Respects thresholds\n- [ ] Returns null if empty\n- [ ] Calculates stats\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:18.610613-05:00","updated_at":"2025-12-12T09:05:18.610613-05:00","dependencies":[{"issue_id":"gitlab-insights-lec","depends_on_id":"gitlab-insights-e5z","type":"blocks","created_at":"2025-12-15T12:13:57.832016-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-loqk","title":"Perform performance testing","description":"Measure DB query times (target: \u003c10ms p95 for 50 items), browser memory usage (target: \u003c50MB for 500 items), initial page load time (no regression), network payload sizes. Test with 1000+ event datasets. Use Performance API for measurements.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:06.325807-05:00","updated_at":"2025-12-15T12:09:06.325807-05:00"}
{"id":"gitlab-insights-m3gw","title":"Update Search components for infinite scroll","description":"Update search context/components to use api.events.search.useInfiniteQuery. Flatten pages, pass to EventTable. Instant scroll to top (behavior: 'auto') on keyword change since it's a new search. Handle enabled flag for query activation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:04.310473-05:00","updated_at":"2025-12-15T12:09:04.310473-05:00","dependencies":[{"issue_id":"gitlab-insights-m3gw","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T12:09:39.295562-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-m3gw","depends_on_id":"gitlab-insights-wdwx","type":"blocks","created_at":"2025-12-15T12:09:39.610145-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mas3","title":"8.4.1: Build daily activity aggregation service","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:14:50.604249-05:00","updated_at":"2025-12-15T12:03:19.542332-05:00","closed_at":"2025-12-15T12:03:19.542332-05:00","dependencies":[{"issue_id":"gitlab-insights-mas3","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.346507-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mdhx","title":"Create useInfiniteScroll hook","description":"Create /src/hooks/useInfiniteScroll.ts using Intersection Observer API. Hook manages sentinel ref, auto-triggers fetchNextPage on scroll, shows loading states, handles errors with toast. Configurable threshold (default 0.8). Returns sentinelRef for component integration.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:02.768233-05:00","updated_at":"2025-12-15T12:09:02.768233-05:00","dependencies":[{"issue_id":"gitlab-insights-mdhx","depends_on_id":"gitlab-insights-mz1k","type":"blocks","created_at":"2025-12-15T12:09:38.125261-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mfn","title":"Story 14.2: Add getActivityFeed endpoint","description":"Context: API for filtered activity feed.\n\nImplementation:\n\nCreate src/server/api/routers/activity.ts:\n\n```typescript\nexport const activityRouter = createTRPCRouter({\n  getFeed: protectedProcedure\n    .input(z.object({\n      dateRange: z.object({\n        from: z.date(),\n        to: z.date()\n      }),\n      filters: z.object({\n        territories: z.array(z.string()).optional(),\n        people: z.array(z.string()).optional(),\n        topics: z.array(z.string()).optional(),\n        types: z.array(z.enum(['issue', 'merge_request', 'comment'])).optional()\n      }).optional(),\n      limit: z.number().default(50),\n      cursor: z.string().optional() // Pagination\n    }))\n    .query(async ({ ctx, input }) =\u003e {\n      // Fetch events in date range\n      // Apply filters\n      // Score relevance\n      // Sort by relevance Ã— recency\n      // Return with cursor for pagination\n    })\n});\n```\n\nAcceptance criteria:\n- [ ] Date range filtering\n- [ ] Territory/person/topic filters\n- [ ] Relevance scoring\n- [ ] Pagination support\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:33.086469-05:00","updated_at":"2025-12-12T09:04:33.086469-05:00","dependencies":[{"issue_id":"gitlab-insights-mfn","depends_on_id":"gitlab-insights-12d","type":"blocks","created_at":"2025-12-15T12:13:54.625769-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mji","title":"Epic 16: MR Context View (Bonus)","description":"Goal: Enhanced MR view with intelligent suggestions.\n\nTestable when closed:\n- Creating/viewing MR shows suggested reviewers based on expertise\n- MR detail shows related decisions about touched files\n- Territory conflicts automatically highlighted\n- 'Related work' section shows similar MRs and related issues\n\nDependencies: Epic 10 (Expertise), Epic 11 (Territory), Epic 12 (Similarity)\n\nContains 7 stories (16.1-16.7), ~21 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:06.971437-05:00","updated_at":"2025-12-12T09:03:06.971437-05:00","dependencies":[{"issue_id":"gitlab-insights-mji","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:22.913488-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mji","depends_on_id":"gitlab-insights-mnh","type":"blocks","created_at":"2025-12-12T09:03:22.976646-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mji","depends_on_id":"gitlab-insights-b5y","type":"blocks","created_at":"2025-12-12T09:03:23.039387-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mkn","title":"Move author to header","description":"in EventTable rows, move author from right-hand section to the header section for easier visibility","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-11T09:44:09.823631-05:00","updated_at":"2025-12-11T09:47:25.638292-05:00","closed_at":"2025-12-11T09:47:25.638292-05:00"}
{"id":"gitlab-insights-mnh","title":"Epic 11: Territory \u0026 Collision Detection","description":"Goal: Implement Territory View showing who's working where, with collision alerts.\n\nTestable when closed:\n- Can see 'territory map' of active work areas\n- When viewing an MR, see potential collisions with other MRs touching same files\n- Collision severity scored based on file overlap and expertise\n- Alert threshold surfacing real conflicts without noise\n\nDependencies: Epic 10 (Expertise scoring)\n\nAlgorithm:\nterritory_collision = file_overlap x 0.7 + directory_overlap x 0.3\ncollision_severity = territory_collision x (your_expertise + their_expertise) / 2\nalert_threshold = 0.3\n\nContains 11 stories (11.1-11.11), ~34 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:05.5304-05:00","updated_at":"2025-12-12T09:03:05.5304-05:00","dependencies":[{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-5fg","type":"blocks","created_at":"2025-12-12T09:03:21.60576-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-xug","type":"blocks","created_at":"2025-12-12T09:06:47.521246-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-ca6","type":"blocks","created_at":"2025-12-12T09:06:47.625368-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-t2r","type":"blocks","created_at":"2025-12-12T09:06:47.691183-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-j6z","type":"blocks","created_at":"2025-12-12T09:06:47.756475-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-85l","type":"blocks","created_at":"2025-12-12T09:06:47.825482-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-dik","type":"blocks","created_at":"2025-12-12T09:06:47.899312-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-3kr","type":"blocks","created_at":"2025-12-12T09:06:47.970542-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-4zq","type":"blocks","created_at":"2025-12-12T09:06:48.043771-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-do0","type":"blocks","created_at":"2025-12-12T09:06:48.107362-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-w9l","type":"blocks","created_at":"2025-12-12T09:06:48.173632-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-mnh","depends_on_id":"gitlab-insights-3zi","type":"blocks","created_at":"2025-12-12T09:06:48.252864-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mo8","title":"Epic 9: Commit \u0026 File Data Foundation","description":"Goal: Fetch commit and file-level data from GitLab, establishing the foundation for expertise scoring and territory detection.\n\nTestable when closed:\n- Commits are fetched and stored with file lists\n- File entity populated with paths, directories, extensions\n- Can browse files touched in a project and see who committed to them\n- Person-to-File relationships visible through commits\n\nDependencies: Epic 8 (Person entity)\n\nContains 10 stories (9.1-9.10), ~29 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:04.914007-05:00","updated_at":"2025-12-12T09:03:04.914007-05:00","dependencies":[{"issue_id":"gitlab-insights-mo8","depends_on_id":"gitlab-insights-q34","type":"blocks","created_at":"2025-12-12T09:03:21.124059-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-myl","title":"1.9 Trigger full data refetch and verify","description":"Refetch all data from GitLab and verify relationships are captured.\n\n## Implementation\n1. Use existing manualRefresh endpoint or create admin endpoint\n2. Trigger full refetch for all monitored projects\n\n## Verification Checklist\n- [ ] Comments have parentEventId set (link to parent issue/MR)\n- [ ] Comments have gitlabParentId set (GitLab IID)\n- [ ] MRs have closesIssueIds populated from API\n- [ ] Issues have status, commentCount, lastActivityAt\n- [ ] MRs have status, commentCount, lastActivityAt\n- [ ] System notes have isSystemNote = true\n- [ ] Assignees arrays are populated\n- [ ] Cross-references (mentionedInIds) are extracted\n\n## Performance Check\n- Run sample queries to verify indexes work\n- Check query times for grouped queries\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-myl: Trigger full data refetch and verify\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-myl\n- Update plan: AC-1, AC-2, AC-3 -\u003e \"complete\" (if verified)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:12.480671-05:00","updated_at":"2025-12-11T15:08:07.306923-05:00","dependencies":[{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-e0h","type":"blocks","created_at":"2025-12-11T14:25:54.636046-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-5oj","type":"blocks","created_at":"2025-12-11T14:25:54.881508-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-7e5","type":"blocks","created_at":"2025-12-11T14:25:55.083724-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-myl","depends_on_id":"gitlab-insights-u9b","type":"blocks","created_at":"2025-12-11T14:25:55.280003-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-mz1k","title":"Update Events router with cursor support (getRecent, getForDashboard)","description":"Update /src/server/api/routers/events.ts endpoints. Replace hard-coded limits with cursor-based pagination. getRecent: add cursor param, return {items, nextCursor, hasMore}. getForDashboard: eliminate inefficient separate fetch+merge, use single DB query with cursor pagination.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:01.164495-05:00","updated_at":"2025-12-15T12:09:01.164495-05:00","dependencies":[{"issue_id":"gitlab-insights-mz1k","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:37.293223-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n04","title":"Story 14.8: Add My Activity quick filter","description":"Context: One-click filter for activity in user's territory.\n\nImplementation:\n\n```tsx\n\u003cQuickFilters\u003e\n  \u003cQuickFilterButton\n    label=\"My Activity\"\n    active={isMyActivityFilter}\n    onClick={() =\u003e {\n      setFilters({\n        territories: userTerritories,\n        people: [],\n        topics: []\n      });\n    }}\n  /\u003e\n  \u003cQuickFilterButton\n    label=\"Everything\"\n    active={!hasFilters}\n    onClick={() =\u003e clearFilters()}\n  /\u003e\n\u003c/QuickFilters\u003e\n```\n\nMy Activity includes:\n- Events in user's territory\n- Events mentioning user\n- Responses to user's work\n\nAcceptance criteria:\n- [ ] Quick filter button\n- [ ] Uses user's territory\n- [ ] One-click activation\n- [ ] Clear indicator when active\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:46.846211-05:00","updated_at":"2025-12-12T09:05:46.846211-05:00","dependencies":[{"issue_id":"gitlab-insights-n04","depends_on_id":"gitlab-insights-nv6","type":"blocks","created_at":"2025-12-15T12:13:55.102936-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n4ee","title":"Update Query Detail components for infinite scroll","description":"Update query detail view to use api.queries.getNewItems.useInfiniteQuery. Flatten pages, pass to EventTable. Instant scroll to top on filter changes if applicable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:04.684815-05:00","updated_at":"2025-12-15T12:09:04.684815-05:00","dependencies":[{"issue_id":"gitlab-insights-n4ee","depends_on_id":"gitlab-insights-dgci","type":"blocks","created_at":"2025-12-15T12:09:39.370543-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-n4ee","depends_on_id":"gitlab-insights-dnfs","type":"blocks","created_at":"2025-12-15T12:09:39.688691-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n5x","title":"Story 15.6: Create Inngest scheduled function","description":"**Context:** Cron job to send daily digests.\n\n**Implementation:**\n\nCreate `src/inngest/functions/daily-digest.ts`:\n\n```typescript\nimport { inngest } from '../client';\n\nexport const sendDailyDigests = inngest.createFunction(\n  { id: 'send-daily-digests' },\n  { cron: '0 * * * *' }, // Every hour, check who needs digest\n  async ({ step }) =\u003e {\n    // 1. Find users with digests due\n    const users = await step.run('find-users', async () =\u003e {\n      return db.digestPreference.findMany({\n        where: {\n          enabled: true,\n          // sendTime matches current hour\n        },\n        include: { user: true }\n      });\n    });\n\n    // 2. Generate and send for each\n    for (const pref of users) {\n      await step.run('send-digest-' + pref.userId, async () =\u003e {\n        const content = await generateDigest(db, pref.userId, pref);\n        if (content) {\n          await sendDigestEmail(pref.user.email, content);\n        }\n      });\n    }\n  }\n);\n```\n\n**Acceptance criteria:**\n- [ ] Runs hourly\n- [ ] Sends to users at their preferred time\n- [ ] Handles failures gracefully\n- [ ] Logs results\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:43.064297-05:00","updated_at":"2025-12-12T09:05:43.064297-05:00","dependencies":[{"issue_id":"gitlab-insights-n5x","depends_on_id":"gitlab-insights-lec","type":"blocks","created_at":"2025-12-15T12:13:57.914972-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-n7f","title":"3.4 Create participant avatars component","description":"Create overlapping avatar stack component.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/ParticipantAvatars.tsx\n\nProps:\n- participants: { username: string, avatar?: string }[]\n- maxVisible: number (default 3)\n\n## Layout\nDefault: [A][B][C] +2 more\nHover: [A] [B] [C] [D] [E] (spread animation)\n\n## Styling\n- Avatar size: 24px diameter\n- Overlap: -8px margin\n- Hover animation: framer-motion spread\n- Tooltip: full participant list on hover\n\n## File\nsrc/app/(authenticated)/dashboard/_components/ParticipantAvatars.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-7\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-n7f: Create participant avatars component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-n7f","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:46.37586-05:00","updated_at":"2025-12-11T15:09:54.558045-05:00","dependencies":[{"issue_id":"gitlab-insights-n7f","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:40.622553-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-nmx","title":"Story 15.3: Set up email integration","description":"**Context:** Configure email sending service.\n\n**Implementation:**\n\nInstall Resend:\n```bash\nnpm install resend @react-email/components\n```\n\nCreate `src/server/services/email-service.ts`:\n\n```typescript\nimport { Resend } from 'resend';\n\nconst resend = new Resend(process.env.RESEND_API_KEY);\n\nasync function sendEmail(options: {\n  to: string;\n  subject: string;\n  react: React.ReactElement;\n}): Promise\u003c{ success: boolean; id?: string }\u003e\n```\n\nAdd to `.env`:\n```\nRESEND_API_KEY=re_xxxxx\n```\n\n**Acceptance criteria:**\n- [ ] Resend configured\n- [ ] Can send test email\n- [ ] Environment variable set\n- [ ] Error handling\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:52.421558-05:00","updated_at":"2025-12-12T09:04:52.421558-05:00","dependencies":[{"issue_id":"gitlab-insights-nmx","depends_on_id":"gitlab-insights-jfx","type":"blocks","created_at":"2025-12-15T12:13:57.681101-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ntz","title":"Phase 4: Read Tracking \u0026 Filtering","description":"Implement read tracking integration, smart defaults, and filtering.\n\n## Goal\nWire up read tracking to UI and implement smart sorting/filtering.\n\n## Acceptance Criteria\nContributes to: AC-4, AC-8, AC-9\n\n## On Completion (Epic)\nWhen all Phase 4 tasks complete:\n1. Verify AC-4, AC-8, AC-9 are marked 'complete' in plan file\n2. bd close gitlab-insights-ntz","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:25:00.569438-05:00","updated_at":"2025-12-11T15:10:21.160892-05:00","dependencies":[{"issue_id":"gitlab-insights-ntz","depends_on_id":"gitlab-insights-pyd","type":"blocks","created_at":"2025-12-11T14:25:36.090897-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-nv6","title":"Story 14.7: Create ActivityCard component","description":"Context: Display activity items with relevance indicator.\n\nImplementation:\n\nCreate src/components/activity/ActivityCard.tsx:\n\n```tsx\ninterface ActivityCardProps {\n  event: Event;\n  relevance: RelevanceScore;\n}\n\nexport function ActivityCard({ event, relevance }: ActivityCardProps) {\n  // Type icon (issue/MR/comment)\n  // Title\n  // Author with avatar\n  // Relevance bar/indicator\n  // Time ago\n  // Click to view details\n}\n```\n\nRelevance indicator:\n- Color gradient (red = very relevant, gray = less)\n- Tooltip showing why relevant\n\nAcceptance criteria:\n- [ ] Shows all event types\n- [ ] Relevance indicator visible\n- [ ] Explains relevance on hover\n- [ ] Links to detail view\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:29.590266-05:00","updated_at":"2025-12-12T09:05:29.590266-05:00","dependencies":[{"issue_id":"gitlab-insights-nv6","depends_on_id":"gitlab-insights-0rb","type":"blocks","created_at":"2025-12-15T12:13:55.030772-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-o1uv","title":"8.0.2: Week 8 validation checkpoint","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":30,"created_at":"2025-12-15T11:16:35.034026-05:00","updated_at":"2025-12-15T12:03:20.052558-05:00","closed_at":"2025-12-15T12:03:20.052558-05:00","dependencies":[{"issue_id":"gitlab-insights-o1uv","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:16:44.128614-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-o58","title":"Story 9.1: Add Commit model and CommitFile junction","description":"**Context:** Need to store commits with their metadata and link them to the files they touch.\n\n**Implementation:**\n\nAdd to `prisma/schema.prisma`:\n\n```prisma\nmodel Commit {\n  id            String   @id @default(cuid())\n  userId        String\n  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  sha           String   // Full commit SHA\n  shortSha      String   // First 8 chars for display\n  message       String   // Commit message\n  title         String   // First line of message\n  authoredAt    DateTime // When authored\n\n  // Author link - may be null if person not found\n  personId      String?\n  person        Person?  @relation(fields: [personId], references: [id])\n\n  // GitLab metadata\n  projectId     String   // GitLab project ID\n  webUrl        String   // Link to GitLab\n\n  // Stats\n  additions     Int      @default(0)\n  deletions     Int      @default(0)\n\n  // Relationships\n  files         CommitFile[]\n\n  createdAt     DateTime @default(now())\n\n  @@unique([userId, sha])\n  @@index([userId, authoredAt])\n  @@index([userId, projectId])\n  @@index([personId])\n}\n\nmodel CommitFile {\n  id        String @id @default(cuid())\n  commitId  String\n  commit    Commit @relation(fields: [commitId], references: [id], onDelete: Cascade)\n  fileId    String\n  file      File   @relation(fields: [fileId], references: [id], onDelete: Cascade)\n\n  // Change type\n  changeType String // 'added' | 'modified' | 'deleted' | 'renamed'\n\n  @@unique([commitId, fileId])\n  @@index([fileId])\n}\n```\n\n**Acceptance criteria:**\n- [ ] Commit model with all fields\n- [ ] CommitFile junction table\n- [ ] Proper indexes for queries\n- [ ] Migration runs successfully\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:14.205963-05:00","updated_at":"2025-12-12T09:04:14.205963-05:00","dependencies":[{"issue_id":"gitlab-insights-o58","depends_on_id":"gitlab-insights-784","type":"blocks","created_at":"2025-12-15T12:14:18.983895-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-p16","title":"Story 17.6: Add recent incidents section","description":"Add section showing recent historical incidents if data is available.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Optional feature dependent on historical incident data availability\n\nAcceptance Criteria:\n- Query for historical incidents related to selected path (if data exists)\n- Display recent incident list with dates, severity, resolution\n- Link to incident details/postmortems\n- Show patterns or recurring issues\n- Gracefully handle missing data\n\nEstimated Hours: 2h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.670227-05:00","updated_at":"2025-12-12T09:04:39.670227-05:00","dependencies":[{"issue_id":"gitlab-insights-p16","depends_on_id":"gitlab-insights-86d","type":"blocks","created_at":"2025-12-15T12:14:02.322-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-pf0","title":"8.1.2: Implement GitLab commit fetching with file diffs","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:10:19.519695-05:00","updated_at":"2025-12-15T12:01:28.858249-05:00","closed_at":"2025-12-15T12:01:28.858249-05:00","dependencies":[{"issue_id":"gitlab-insights-pf0","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:38.762393-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-pf0","depends_on_id":"gitlab-insights-a0y","type":"blocks","created_at":"2025-12-15T11:11:40.724427-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-psm","title":"Story 15.7: Add digest preview feature","description":"**Context:** Let user preview what digest would look like.\n\n**Implementation:**\n\nAdd to digest settings:\n\n```tsx\n\u003cButton onClick={handlePreview}\u003e\n  Preview Digest\n\u003c/Button\u003e\n\n\u003cDigestPreviewModal\n  isOpen={previewOpen}\n  content={previewContent}\n  onClose={() =\u003e setPreviewOpen(false)}\n/\u003e\n```\n\nAdd tRPC endpoint:\n```typescript\npreviewDigest: protectedProcedure\n  .query(async ({ ctx }) =\u003e {\n    const prefs = await getDigestPrefs(ctx.db, ctx.session.userId);\n    return generateDigest(ctx.db, ctx.session.userId, prefs);\n  })\n```\n\n**Acceptance criteria:**\n- [ ] Preview button on settings\n- [ ] Shows what digest would contain\n- [ ] Uses current preferences\n- [ ] Renders email content\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:54.771138-05:00","updated_at":"2025-12-12T09:05:54.771138-05:00","dependencies":[{"issue_id":"gitlab-insights-psm","depends_on_id":"gitlab-insights-n5x","type":"blocks","created_at":"2025-12-15T12:13:57.986811-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-pyd","title":"Phase 3: New UI Components","description":"Build work item card components to replace flat event list.\n\n## Goal\nCreate collapsible card UI showing activity logs, with full content in detail pane.\n\n## Key Files (new)\n- src/app/(authenticated)/dashboard/_components/WorkItemCard.tsx\n- src/app/(authenticated)/dashboard/_components/WorkItemList.tsx\n- src/app/(authenticated)/dashboard/_components/ActivityTimeline.tsx\n\n## Key Files (update)\n- src/app/(authenticated)/dashboard/_components/DashboardClient.tsx\n- src/app/(authenticated)/dashboard/_components/EventDetail.tsx\n\n## Design Reference\n/docs/ux-design-specification.md\n\n## Acceptance Criteria\nContributes to: AC-5, AC-6, AC-7\n\n## On Completion (Epic)\nWhen all Phase 3 tasks complete:\n1. Verify AC-5, AC-6, AC-7 are marked 'ui-ready' or 'complete' in plan file\n2. bd close gitlab-insights-pyd","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-11T14:24:38.190022-05:00","updated_at":"2025-12-11T15:09:21.071515-05:00","dependencies":[{"issue_id":"gitlab-insights-pyd","depends_on_id":"gitlab-insights-0rj","type":"blocks","created_at":"2025-12-11T14:25:35.893617-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-q34","title":"Epic 8: Person Entity \u0026 Basic Expertise Foundation","description":"Goal: Establish Person entity and basic expertise signals - the minimum needed for any 'who knows about X?' query.\n\nTestable when closed:\n- Can see a list of people extracted from GitLab activity\n- Can click on a person and see their basic activity summary\n- Basic 'Who touched file X?' query works\n\nDependencies: None (builds on existing Event data)\n\nContains 8 stories (8.1-8.8), ~23 hours total.\n\nSee docs/intelligence-platform-epics.md for full implementation details.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-12T09:03:04.591315-05:00","updated_at":"2025-12-12T09:03:04.591315-05:00"}
{"id":"gitlab-insights-q4a","title":"Story 15.1: Add DigestPreference model","description":"**Context:** Store user's digest configuration.\n\n**Implementation:**\n\nAdd to schema:\n```prisma\nmodel DigestPreference {\n  id            String   @id @default(cuid())\n  userId        String   @unique\n  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  enabled       Boolean  @default(false)\n  frequency     String   @default(\"daily\") // daily, weekly\n  sendTime      String   @default(\"08:00\") // HH:mm UTC\n\n  // Filters (what to include)\n  territories   String[] // Directories to watch\n  topics        String[] // Keywords to watch\n\n  // Thresholds\n  minRelevance  Float    @default(0.5)\n  maxItems      Int      @default(15)\n\n  createdAt     DateTime @default(now())\n  updatedAt     DateTime @updatedAt\n}\n```\n\n**Acceptance criteria:**\n- [ ] Model created\n- [ ] Linked to User\n- [ ] Default values set\n- [ ] Migration runs\n\n**Hours:** 2","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:27.577911-05:00","updated_at":"2025-12-12T09:04:27.577911-05:00"}
{"id":"gitlab-insights-r13","title":"Story 17.1: Create IncidentResponseView page at /incident","description":"Create the main Incident Response Mode page at /incident route. This page provides quick expert finding for production issues.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Goal: Quick expert finding for production issues\n- Dependencies: Epic 10 (Expertise), Epic 13 (Decisions)\n\nAcceptance Criteria:\n- Create IncidentResponseView component\n- Set up route at /incident\n- Create basic page layout and structure for incident response features\n- Prepare UI sections for expert list, commits, discussions, and incidents\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.591257-05:00","updated_at":"2025-12-12T09:04:38.591257-05:00"}
{"id":"gitlab-insights-r9i","title":"Story 10.8: Create ExpertResultCard with score visualization","description":"Context: Display expert results with score breakdown.\n\nImplementation:\n\nCreate src/components/expertise/ExpertResultCard.tsx:\n\nProps interface:\n- result: ExpertiseResult\n- rank: number\n\nComponent displays:\n- Rank badge (#1, #2, etc.)\n- PersonCard (avatar, name)\n- Total score (prominent)\n- Score breakdown visualization:\n  * Bar chart or progress bars showing contribution of each signal\n  * Commits: 45% | MRs: 30% | Issues: 15% | Comments: 10%\n- Last activity date\n- Click to expand/navigate to person\n\nVisualization approach:\n- Stacked horizontal bar showing relative contribution\n- Color-coded: commits (blue), MRs (green), issues (yellow), comments (gray)\n- Percentage labels on hover\n\nAcceptance criteria:\n- Shows rank and total score\n- Displays person info\n- Visualizes score breakdown\n- Shows last activity\n- Clickable for navigation\n\nHours: 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:00.148184-05:00","updated_at":"2025-12-12T09:06:00.148184-05:00","dependencies":[{"issue_id":"gitlab-insights-r9i","depends_on_id":"gitlab-insights-fjp","type":"blocks","created_at":"2025-12-15T12:13:17.085257-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rb68","title":"Search Infinite Scroll Integration","description":"Integrate infinite scroll into Search results view. Updates search components to support cursor pagination while maintaining FTS rank-based ordering.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:05.394458-05:00","updated_at":"2025-12-15T12:08:05.394458-05:00","dependencies":[{"issue_id":"gitlab-insights-rb68","depends_on_id":"gitlab-insights-ej4o","type":"blocks","created_at":"2025-12-15T12:09:38.541385-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rli8","title":"Testing \u0026 Quality Assurance","description":"Comprehensive testing suite for infinite scroll implementation. Includes unit tests, integration tests, E2E tests, performance testing, and accessibility validation.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:06.667561-05:00","updated_at":"2025-12-15T12:08:06.667561-05:00","dependencies":[{"issue_id":"gitlab-insights-rli8","depends_on_id":"gitlab-insights-ju80","type":"blocks","created_at":"2025-12-15T12:09:39.979831-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-rli8","depends_on_id":"gitlab-insights-rb68","type":"blocks","created_at":"2025-12-15T12:09:40.05706-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-rli8","depends_on_id":"gitlab-insights-gmt2","type":"blocks","created_at":"2025-12-15T12:09:40.124678-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rpy","title":"3.6 Update EventDetail for full content view","description":"Update EventDetail to show full work item content with activity timeline.\n\n## Implementation\nModify src/app/(authenticated)/dashboard/_components/EventDetail.tsx\n\n## Layout\n+--------------------------------------------------+\n| [Breadcrumb: Issue #123 \u003e MR !456]         [x]   |\n|==================================================|\n| [Badge] Issue #123: Fix login timeout bug        |\n|--------------------------------------------------|\n| Status: Open                                     |\n| Author: Alice - 2 days ago                       |\n| Assigned: Bob, Charlie                           |\n| Labels: bug, auth, high-priority                 |\n| Project: gitlab-insights                         |\n|--------------------------------------------------|\n| Description                                      |\n|--------------------------------------------------|\n| [Full markdown rendered description]             |\n|--------------------------------------------------|\n| Related Work                                     |\n|--------------------------------------------------|\n| MR !456 - Implement new auth flow (merged)       |\n|   -\u003e Closes this issue                           |\n|--------------------------------------------------|\n| Activity (5 items)                               |\n|--------------------------------------------------|\n| [ActivityTimeline component]                     |\n|--------------------------------------------------|\n| [Open in GitLab]                                 |\n+--------------------------------------------------+\n\n## Features\n- Use getWorkItemWithActivity query\n- Render full description with markdown\n- Show related items section\n- Embed ActivityTimeline component\n- Breadcrumb navigation for history\n- Scroll to specific activity when clicked from card\n- Mark as read when viewed\n\n## File\nsrc/app/(authenticated)/dashboard/_components/EventDetail.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-rpy: Update EventDetail for full content view\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-rpy\n- Update plan: AC-5 -\u003e \"complete\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:46.848755-05:00","updated_at":"2025-12-11T15:09:55.047995-05:00","dependencies":[{"issue_id":"gitlab-insights-rpy","depends_on_id":"gitlab-insights-s06","type":"blocks","created_at":"2025-12-11T14:26:03.846516-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-rsqv","title":"Implementation Note: Decision Keyword List for Epic 13","description":"","status":"open","priority":3,"issue_type":"chore","estimated_minutes":0,"created_at":"2025-12-15T12:05:32.297743-05:00","updated_at":"2025-12-15T12:05:32.297743-05:00","dependencies":[{"issue_id":"gitlab-insights-rsqv","depends_on_id":"gitlab-insights-6q0","type":"related","created_at":"2025-12-15T12:05:59.415513-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-s06","title":"3.3 Create ActivityTimeline component","description":"Create full content timeline for detail pane.\n\n## Implementation\nCreate src/app/(authenticated)/dashboard/_components/ActivityTimeline.tsx\n\nProps:\n- activities: ActivityItem[]\n- highlightId?: string (scroll to this item)\n- onMarkAsRead: (activityId: string) =\u003e void\n\n## ActivityItem Type\n{\n  id: string,\n  type: \"comment\" | \"system\",\n  author: string,\n  authorAvatar?: string,\n  content: string,\n  createdAt: DateTime,\n  isUnread: boolean\n}\n\n## Layout\n\nUser Comment:\n+--------------------------------------------------+\n| [Avatar] Bob - 4 hours ago              [NEW]    |\n|--------------------------------------------------|\n| I think I found the root cause. The session      |\n| timeout is set to 5 minutes but the frontend...  |\n| [full markdown rendered content]                 |\n+--------------------------------------------------+\n\nSystem Activity (compressed):\n+--------------------------------------------------+\n| [gear] Alice changed status: Open -\u003e In Progress |\n|        1 day ago                                 |\n+--------------------------------------------------+\n\n## Styling\n- User comments: primary text, full contrast\n- System activity: gray-500, single line, reduced opacity\n- NEW badge: olive pill\n- Unread items: subtle highlight\n\n## File\nsrc/app/(authenticated)/dashboard/_components/ActivityTimeline.tsx\n\n---\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-s06: Create ActivityTimeline component\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-s06\n- Update plan: AC-5 -\u003e \"ui-ready\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:38.934403-05:00","updated_at":"2025-12-11T15:09:21.727959-05:00","dependencies":[{"issue_id":"gitlab-insights-s06","depends_on_id":"gitlab-insights-tng","type":"blocks","created_at":"2025-12-11T14:26:40.408154-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-sk2t","title":"Add pagination logging to all endpoints","description":"Add structured logging to getRecent, getForDashboard, search, getNewItems endpoints. Log: userId, endpoint, cursorProvided, itemsReturned, hasMore, durationMs. Place before return statement. Follow existing codebase logging patterns for userId.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:02.4147-05:00","updated_at":"2025-12-15T12:09:02.4147-05:00"}
{"id":"gitlab-insights-sq5","title":"Story 13.6: Create ThreadView component","description":"**Context:** Display full discussion thread.\n\n**Implementation:**\n\nCreate `src/components/decisions/ThreadView.tsx`:\n\n```tsx\ninterface ThreadViewProps {\n  eventId: string;\n}\n\nexport function ThreadView({ eventId }: ThreadViewProps) {\n  // Root event (issue/MR) at top\n  // Comments in chronological order\n  // Participant sidebar\n  // Highlight search terms if from search\n}\n```\n\n**Layout:**\n- Header: Event title, type, dates\n- Sidebar: Participants with avatars\n- Main: Chronological comments\n- Footer: Link to GitLab\n\n**Acceptance criteria:**\n- [ ] Shows full discussion\n- [ ] Comments in order\n- [ ] Participants visible\n- [ ] Search terms highlighted\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:55.245143-05:00","updated_at":"2025-12-12T09:04:55.245143-05:00","dependencies":[{"issue_id":"gitlab-insights-sq5","depends_on_id":"gitlab-insights-27c","type":"blocks","created_at":"2025-12-15T12:13:45.944099-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-t2r","title":"Story 11.3: Create territory-scorer service","description":"**Context:** Calculate territory overlap between MRs or between person and files.\n\n**Implementation:**\n\nCreate `src/server/services/territory-scorer.ts`:\n\n```typescript\ninterface FileOverlap {\n  file: string;\n  inBoth: boolean;\n}\n\ninterface TerritoryScore {\n  fileOverlapScore: number;      // 0-1\n  directoryOverlapScore: number; // 0-1\n  totalScore: number;            // Weighted combination\n  overlappingFiles: string[];\n  overlappingDirectories: string[];\n}\n\n// Calculate overlap between two sets of files\nfunction calculateOverlap(\n  files1: string[],\n  files2: string[]\n): TerritoryScore {\n  // File overlap: |intersection| / |union|\n  const fileSet1 = new Set(files1);\n  const fileSet2 = new Set(files2);\n  const intersection = files1.filter(f =\u003e fileSet2.has(f));\n  const union = new Set([...files1, ...files2]);\n  const fileOverlapScore = intersection.length / union.size;\n\n  // Directory overlap: same logic on parent directories\n  const dirs1 = new Set(files1.map(f =\u003e getParentDirectory(f)));\n  const dirs2 = new Set(files2.map(f =\u003e getParentDirectory(f)));\n  // ...\n\n  return {\n    fileOverlapScore,\n    directoryOverlapScore,\n    totalScore: fileOverlapScore * 0.7 + directoryOverlapScore * 0.3,\n    overlappingFiles: intersection,\n    overlappingDirectories: [...]\n  };\n}\n```\n\n**Acceptance criteria:**\n- [ ] Calculates file overlap correctly\n- [ ] Calculates directory overlap\n- [ ] Returns weighted total\n- [ ] Lists overlapping items\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:38.217704-05:00","updated_at":"2025-12-12T09:04:38.217704-05:00","dependencies":[{"issue_id":"gitlab-insights-t2r","depends_on_id":"gitlab-insights-ca6","type":"blocks","created_at":"2025-12-15T12:13:40.424211-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-tmn","title":"Feature 10.3: Code Territory Radar","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":480,"created_at":"2025-12-15T11:09:34.557824-05:00","updated_at":"2025-12-15T12:03:00.630885-05:00","closed_at":"2025-12-15T12:03:00.630885-05:00","dependencies":[{"issue_id":"gitlab-insights-tmn","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.322189-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-tng","title":"2.2 Create getWorkItemWithActivity endpoint","description":"Create tRPC endpoint returning full context for a single work item.\n\n## Implementation\nAdd to src/server/api/routers/events.ts:\n\ngetWorkItemWithActivity: protectedProcedure\n  .input(z.object({ eventId: z.string() }))\n  .query(async ({ ctx, input }) =\u003e {\n    // Load the work item\n    // Load all children (comments) ordered by createdAt\n    // Load related MRs (where closesIssueIds includes this issue)\n    // Load related issues (if MR, lookup closesIssueIds)\n    // Load cross-references (mentionedInIds)\n    // Build unified activity timeline\n    return {\n      workItem: Event,\n      comments: Event[],\n      relatedMRs: Event[],\n      relatedIssues: Event[],\n      crossReferences: Event[],\n      participants: string[],\n      activityTimeline: ActivityItem[]\n    }\n  })\n\nEager load with Prisma includes.\nPaginate if \u003e50 activity items.\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-5\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-tng: Create getWorkItemWithActivity endpoint\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-tng\n- Update plan: AC-5 -\u003e \"implemented\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.283554-05:00","updated_at":"2025-12-11T15:08:38.29715-05:00","dependencies":[{"issue_id":"gitlab-insights-tng","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:28.608868-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-u6sf","title":"Write unit tests for cursor logic","description":"Test cursor encode/decode utilities. Edge cases: empty results, single page, timestamp collisions, invalid cursor format. Verify base64 encoding/decoding, JSON parsing errors, malformed input handling.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:05.08344-05:00","updated_at":"2025-12-15T12:09:05.08344-05:00"}
{"id":"gitlab-insights-u8w","title":"Story 10.3: Implement MR-based expertise","description":"Context: Calculate expertise from MRs authored and reviewed.\n\nImplementation:\n\nAdd to src/server/services/expertise-scorer.ts:\n\nInterface MRExpertise with personId, mrsAuthored, mrsReviewed, lastMRDate, authoredScore, reviewedScore\n\nFunction getMRExpertise(db, userId, filePaths, config)\n\nNOTE: This requires MR â†’ File relationships from Epic 11. For now, use Event-based matching.\n\nFallback implementation (until Epic 11):\n- Search Events of type 'merge_request' containing file paths in title/body\n- Group by author\n- Apply decay based on createdAt\n- MR authored: 4.0 weight, 120d tau\n- MR reviewed: 2.0 weight, 60d tau (placeholder)\n\nCode approach:\nconst events = await db.event.findMany({\n  where: {\n    userId,\n    type: 'merge_request',\n    OR: filePaths.map(p =\u003e ({\n      OR: [\n        { title: { contains: p } },\n        { body: { contains: p } }\n      ]\n    }))\n  }\n});\n// Group by author, apply decay\n\nAcceptance criteria:\n- Calculates MR authored score (4.0 weight, 120d tau)\n- Calculates MR reviewed score (2.0 weight, 60d tau) - placeholder\n- Works with file path search\n- Applies decay correctly\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:52.557884-05:00","updated_at":"2025-12-12T09:04:52.557884-05:00","dependencies":[{"issue_id":"gitlab-insights-u8w","depends_on_id":"gitlab-insights-79c","type":"blocks","created_at":"2025-12-15T12:13:16.682337-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-u9b","title":"1.8 Parse cross-references (mentionedInIds)","description":"Parse description and body text for issue/MR references.\n\n## Implementation\nCreate utility function to extract references:\n- Regex pattern for #123 (issues) and !456 (MRs)\n- Extract numeric IIDs\n- Store in mentionedInIds[]\n\nApply to:\n- Issue descriptions\n- MR descriptions\n- Comment bodies\n\n## File\nsrc/server/services/gitlab/event-transformer.ts\n\n---\n## Acceptance Criteria\nContributes to: AC-3\n\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-u9b: Parse cross-references (mentionedInIds)\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-u9b\n- Update plan: AC-3 -\u003e \"implemented\"","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:12.247888-05:00","updated_at":"2025-12-11T15:08:06.976057-05:00","dependencies":[{"issue_id":"gitlab-insights-u9b","depends_on_id":"gitlab-insights-ksg","type":"blocks","created_at":"2025-12-11T14:25:48.304455-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-udr","title":"Story 16.4: Add related decisions section","description":"Add a section showing past discussions on files touched by the MR.\n\n**Context:** Surface relevant historical discussions from Epic 13 (Decisions) to provide context about why code is the way it is and what decisions were made previously.\n\n**Implementation:**\n- Query Decision entity for discussions involving touched files\n- Rank by relevance (recent, high engagement, same files)\n- Display in MRContextPanel\n- Link to original discussion locations\n\n**Acceptance criteria:**\n- Shows past discussions related to files in MR\n- Sorted by relevance\n- Links back to original GitLab discussions\n- Handles case where no related decisions exist\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:49.093367-05:00","updated_at":"2025-12-12T09:04:49.093367-05:00","dependencies":[{"issue_id":"gitlab-insights-udr","depends_on_id":"gitlab-insights-f2b","type":"blocks","created_at":"2025-12-15T12:13:59.99071-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uj2a","title":"Documentation \u0026 Deployment","description":"Update technical documentation and set up deployment monitoring. Includes API docs, implementation guides, and production deployment checklist.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T12:08:08.997533-05:00","updated_at":"2025-12-15T12:08:08.997533-05:00","dependencies":[{"issue_id":"gitlab-insights-uj2a","depends_on_id":"gitlab-insights-rli8","type":"blocks","created_at":"2025-12-15T12:09:41.443975-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-uj2a","depends_on_id":"gitlab-insights-8xf8","type":"blocks","created_at":"2025-12-15T12:09:41.520135-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-uj2a","depends_on_id":"gitlab-insights-i03h","type":"blocks","created_at":"2025-12-15T12:09:41.596031-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uln","title":"2.1 Create getWorkItemsGrouped endpoint","description":"Create tRPC endpoint returning grouped work items for dashboard.\n\n## Implementation\nAdd to src/server/api/routers/events.ts:\n\ngetWorkItemsGrouped: protectedProcedure\n  .input(z.object({\n    status: z.enum([\"open\", \"all\"]).default(\"open\"),\n    sort: z.enum([\"activity\", \"unread\"]).default(\"unread\")\n  }))\n  .query(async ({ ctx, input }) =\u003e {\n    // Query issues (type = \"issue\", exclude comments)\n    // Query MRs (type = \"merge_request\", exclude comments)\n    // Join with ReadEvent to get unread status\n    // Sort: unread first, then by lastActivityAt\n    // Return { issues: WorkItemSummary[], mergeRequests: WorkItemSummary[] }\n  })\n\nWorkItemSummary type:\n{\n  event: Event,\n  unreadComments: number,\n  lastActivity: DateTime,\n  participants: string[],\n  status: string,\n  hasNewActivity: boolean\n}\n\n## File\nsrc/server/api/routers/events.ts\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-uln: Create getWorkItemsGrouped endpoint\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-uln","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:25.046698-05:00","updated_at":"2025-12-11T15:08:38.054457-05:00","dependencies":[{"issue_id":"gitlab-insights-uln","depends_on_id":"gitlab-insights-myl","type":"blocks","created_at":"2025-12-11T14:26:28.388248-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-ulz1","title":"Implementation Note: PRD Success Criteria \u0026 Validation Gates","description":"","status":"open","priority":2,"issue_type":"chore","estimated_minutes":0,"created_at":"2025-12-15T12:05:52.848927-05:00","updated_at":"2025-12-15T12:05:52.848927-05:00","dependencies":[{"issue_id":"gitlab-insights-ulz1","depends_on_id":"gitlab-insights-5fg","type":"related","created_at":"2025-12-15T12:05:59.585392-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uud","title":"Story 8.2: Create Person extraction service","description":"**Context:** We have existing Events with author information that needs to be extracted into Person records. New Events should also create/update Person records.\n\n**Implementation:**\n\nCreate `src/server/services/person-extractor.ts`:\n\n```typescript\ninterface ExtractedPerson {\n  gitlabId: number;\n  username: string;\n  name: string | null;\n  avatarUrl: string | null;\n}\n\n// Extract unique people from existing Events\nasync function extractPeopleFromEvents(db: PrismaClient, userId: string): Promise\u003cnumber\u003e\n\n// Extract person from a GitLab API response (issue, MR, note author)\nfunction extractPersonFromGitLabAuthor(author: GitLabAuthor): ExtractedPerson\n\n// Upsert person - create if new, update if exists\nasync function upsertPerson(db: PrismaClient, userId: string, person: ExtractedPerson): Promise\u003cPerson\u003e\n```\n\nThe extraction should:\n1. Query all Events for the user\n2. Parse unique authors (by gitlabId if available, or username)\n3. Deduplicate\n4. Create Person records with upsert semantics\n\n**GitLab author structure** (from API):\n```json\n{\n  \"id\": 123,\n  \"username\": \"jsmith\",\n  \"name\": \"John Smith\",\n  \"avatar_url\": \"https://...\"\n}\n```\n\n**Acceptance criteria:**\n- [ ] Can extract people from existing Events\n- [ ] Deduplication works correctly\n- [ ] Upsert creates new or updates existing\n- [ ] Returns count of people created/updated\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:47.631375-05:00","updated_at":"2025-12-12T09:04:47.631375-05:00","dependencies":[{"issue_id":"gitlab-insights-uud","depends_on_id":"gitlab-insights-3xi","type":"blocks","created_at":"2025-12-15T12:12:52.594364-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-uum","title":"Story 16.1: Create getMRContext tRPC endpoint","description":"Create a tRPC endpoint that aggregates expertise, territory, and similarity data for a given MR.\n\n**Context:** This endpoint will power the MR Context View by bringing together multiple intelligence sources:\n- Expertise data for reviewer suggestions\n- Territory data for collision detection\n- Similarity scoring for related MRs\n\n**Implementation:**\n- Create new tRPC endpoint in appropriate router\n- Aggregate data from expertise, territory, and similarity services\n- Return structured context object for frontend consumption\n\n**Acceptance criteria:**\n- Endpoint accepts MR ID as input\n- Returns aggregated context including suggested reviewers, collision alerts, and similar MRs\n- Properly typed response using TypeScript\n\n**Hours:** 4","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:48.390087-05:00","updated_at":"2025-12-12T09:04:48.390087-05:00"}
{"id":"gitlab-insights-v5r","title":"8.2.5: Build DecisionSearchView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2025-12-15T11:13:05.148151-05:00","updated_at":"2025-12-15T12:03:18.968634-05:00","closed_at":"2025-12-15T12:03:18.968634-05:00","dependencies":[{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-929","type":"parent-child","created_at":"2025-12-15T11:13:19.629723-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-81u","type":"blocks","created_at":"2025-12-15T11:13:21.309771-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-1bx","type":"blocks","created_at":"2025-12-15T11:13:21.380008-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v5r","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.108531-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-v6kq","title":"8.4.3: Build weekly rollup generation","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2025-12-15T11:15:19.382008-05:00","updated_at":"2025-12-15T12:03:19.683991-05:00","closed_at":"2025-12-15T12:03:19.683991-05:00","dependencies":[{"issue_id":"gitlab-insights-v6kq","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.49855-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-v6kq","depends_on_id":"gitlab-insights-mas3","type":"blocks","created_at":"2025-12-15T11:16:07.961841-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-w2u","title":"3.7 Add skeleton loading states","description":"Add skeleton loading patterns for cards and detail pane.\n\n## Implementation\nCreate or update skeleton components:\n\nCard skeleton:\n+--------------------------------------------------+\n| [====] [================]              [==] [=]  |\n| [========] - [====] - [======]                   |\n| [====] [==] [==]                                 |\n| [================================]               |\n+--------------------------------------------------+\n\nDetail pane skeleton:\n+--------------------------------------------------+\n| [================================]               |\n|--------------------------------------------------|\n| [======]: [========]                             |\n| [======]: [============]                         |\n|--------------------------------------------------|\n| [====================================]           |\n| [====================================]           |\n| [====================]                           |\n|--------------------------------------------------|\n| [Activity skeleton items...]                     |\n+--------------------------------------------------+\n\n## Files\n- Update WorkItemCard.tsx with loading state\n- Update WorkItemList.tsx with skeleton cards\n- Update EventDetail.tsx with skeleton content\n\n---\n## On Completion\n\n### 1. Commit Changes\njj describe -m \"gitlab-insights-w2u: Add skeleton loading states\"\njj new  # Only if continuing to next task\n\n### 2. Code Review\n- Run code-review-changeset agent on the changeset\n- Address ALL issues identified\n- If anything is ambiguous or would deviate from established architecture/patterns:\n  - STOP and seek developer input before proceeding\n  - Do not make assumptions about architectural decisions\n\n### 3. Human Approval\n- Present summary of changes to developer\n- Wait for explicit approval before closing\n\n### 4. Close Bead\n- bd close gitlab-insights-w2u","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-11T14:24:47.076438-05:00","updated_at":"2025-12-11T15:09:55.260641-05:00","dependencies":[{"issue_id":"gitlab-insights-w2u","depends_on_id":"gitlab-insights-uln","type":"blocks","created_at":"2025-12-11T14:26:40.85034-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-w4r","title":"Story 14.10: Add activity trend visualization","description":"Context: Show activity volume over time.\n\nImplementation:\n\nCreate src/components/activity/ActivityTrend.tsx:\n\n```tsx\ninterface ActivityTrendProps {\n  dateRange: { from: Date; to: Date };\n  filters?: ActivityFilters;\n}\n\nexport function ActivityTrend({ dateRange, filters }: ActivityTrendProps) {\n  // Area chart showing activity volume per day\n  // Color-coded by type\n  // Hover for counts\n}\n```\n\nChart library: Use recharts or similar.\n\nAcceptance criteria:\n- [ ] Shows daily activity counts\n- [ ] Respects filters\n- [ ] Color by event type\n- [ ] Interactive (hover for details)\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:06:08.331074-05:00","updated_at":"2025-12-12T09:06:08.331074-05:00","dependencies":[{"issue_id":"gitlab-insights-w4r","depends_on_id":"gitlab-insights-2r7","type":"blocks","created_at":"2025-12-15T12:13:55.251629-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-w9l","title":"Story 11.10: Create TerritoryCard component","description":"**Context:** Show person's active territory in profile views.\n\n**Implementation:**\n\nCreate `src/components/territory/TerritoryCard.tsx`:\n\n```tsx\ninterface TerritoryCardProps {\n  personId: string;\n  timeWindow?: number; // Days, default 30\n}\n\nexport function TerritoryCard({ personId, timeWindow = 30 }: TerritoryCardProps) {\n  // Shows top 5 directories person is active in\n  // With activity counts (commits, MRs)\n  // Expandable to show all\n}\n```\n\nIntegrate into PersonDetailView.\n\n**Acceptance criteria:**\n- [ ] Shows person's active directories\n- [ ] Activity counts displayed\n- [ ] Time window configurable\n- [ ] Expandable list\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:45.819655-05:00","updated_at":"2025-12-12T09:05:45.819655-05:00","dependencies":[{"issue_id":"gitlab-insights-w9l","depends_on_id":"gitlab-insights-do0","type":"blocks","created_at":"2025-12-15T12:13:40.9537-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wdwx","title":"Update Search FTS module with cursor support","description":"Update /src/lib/search/postgres-fts.ts to add cursor pagination. Update SearchOptions interface to include cursor param. Modify searchEvents to use createdAt+id cursor (ignoring rank for consistency). Accept minor ordering variance at page boundaries for simplicity.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:01.641199-05:00","updated_at":"2025-12-15T12:09:01.641199-05:00","dependencies":[{"issue_id":"gitlab-insights-wdwx","depends_on_id":"gitlab-insights-738d","type":"blocks","created_at":"2025-12-15T12:09:37.39155-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wk1","title":"Story 10.6: Add getExperts tRPC endpoint","description":"Context: API endpoint for expert queries.\n\nImplementation:\n\nCreate src/server/api/routers/expertise.ts:\n\nexpertiseRouter with two procedures:\n\n1. getExperts (protectedProcedure)\n   Input validation:\n   - filePath: optional string\n   - directory: optional string\n   - searchTerm: optional string\n   - limit: number (default 10)\n   - Must provide at least one of filePath/directory/searchTerm\n   \n   Query implementation:\n   - Call calculateExpertise(ctx.db, ctx.session.userId, input, { limit })\n   - Return ExpertiseResult[]\n\n2. getPersonExpertise (protectedProcedure)\n   Input:\n   - personId: string\n   - limit: number (default 10)\n   \n   Implementation:\n   - Return top directories/files person is expert in\n\nAcceptance criteria:\n- Can query by file path\n- Can query by directory\n- Can query by search term\n- Validates at least one input provided\n- Enforces user isolation\n\nHours: 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:05:31.901641-05:00","updated_at":"2025-12-12T09:05:31.901641-05:00","dependencies":[{"issue_id":"gitlab-insights-wk1","depends_on_id":"gitlab-insights-7ve","type":"blocks","created_at":"2025-12-15T12:13:16.917662-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-wpl","title":"Feature 10.1: Expertise Discovery Engine","description":"","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":960,"created_at":"2025-12-15T11:09:02.724854-05:00","updated_at":"2025-12-15T12:02:59.275488-05:00","closed_at":"2025-12-15T12:02:59.275488-05:00","dependencies":[{"issue_id":"gitlab-insights-wpl","depends_on_id":"gitlab-insights-eqz","type":"parent-child","created_at":"2025-12-15T11:09:56.171654-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-xfb","title":"Story 17.4: Show recent commits to area","description":"Display recent commits (last 30 days) to the selected file/area.\n\nContext:\n- Epic 17: Incident Response Mode (Bonus)\n- Helps understand recent changes during incident response\n\nAcceptance Criteria:\n- Query commits for selected path from last 30 days\n- Display commit list with author, date, message\n- Link to GitLab commit details\n- Show commit diffs if relevant\n- Highlight potentially related changes\n\nEstimated Hours: 3h","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:39.226854-05:00","updated_at":"2025-12-12T09:04:39.226854-05:00","dependencies":[{"issue_id":"gitlab-insights-xfb","depends_on_id":"gitlab-insights-dj8","type":"blocks","created_at":"2025-12-15T12:14:02.17186-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-xug","title":"Story 11.1: Add file_changes to MR model","description":"**Context:** Store the list of files an MR touches for collision detection.\n\n**Implementation:**\n\nModify Events to track MR files. Add to schema:\n\n```prisma\nmodel MRFileChange {\n  id        String @id @default(cuid())\n  eventId   String\n  event     Event  @relation(fields: [eventId], references: [id], onDelete: Cascade)\n\n  filePath  String\n  changeType String // 'added' | 'modified' | 'deleted' | 'renamed'\n\n  @@index([eventId])\n  @@index([filePath])\n}\n\nmodel Event {\n  // ... existing fields\n  mrFileChanges MRFileChange[]\n}\n```\n\n**Acceptance criteria:**\n- [ ] MRFileChange model added\n- [ ] Linked to Event\n- [ ] Indexed for queries\n- [ ] Migration runs\n\n**Hours:** 3","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-12T09:04:18.678069-05:00","updated_at":"2025-12-12T09:04:18.678069-05:00","dependencies":[{"issue_id":"gitlab-insights-xug","depends_on_id":"gitlab-insights-d1a","type":"blocks","created_at":"2025-12-15T12:14:19.159633-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-yb2n","title":"Implement error toast notifications","description":"Show toast on pagination failures after TanStack Query retries exhausted. Include 'Scroll down to retry' description and manual 'Retry' action button. Duration: 10s (longer than default 5s). Preserve already-loaded items during errors.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:07.565668-05:00","updated_at":"2025-12-15T12:09:07.565668-05:00"}
{"id":"gitlab-insights-ylc","title":"8.1.5: Add expertise tRPC router endpoints","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":60,"created_at":"2025-12-15T11:10:56.23158-05:00","updated_at":"2025-12-15T12:03:17.873115-05:00","closed_at":"2025-12-15T12:03:17.873115-05:00","dependencies":[{"issue_id":"gitlab-insights-ylc","depends_on_id":"gitlab-insights-wpl","type":"parent-child","created_at":"2025-12-15T11:11:39.044144-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-ylc","depends_on_id":"gitlab-insights-dxn","type":"blocks","created_at":"2025-12-15T11:11:41.103759-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-z5uh","title":"8.4.4: Build ActivityDigestView component","description":"","status":"closed","priority":1,"issue_type":"task","estimated_minutes":180,"created_at":"2025-12-15T11:15:38.884185-05:00","updated_at":"2025-12-15T12:03:19.751145-05:00","closed_at":"2025-12-15T12:03:19.751145-05:00","dependencies":[{"issue_id":"gitlab-insights-z5uh","depends_on_id":"gitlab-insights-8tm","type":"parent-child","created_at":"2025-12-15T11:16:06.569719-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-z5uh","depends_on_id":"gitlab-insights-7x83","type":"blocks","created_at":"2025-12-15T11:16:08.240115-05:00","created_by":"daemon"},{"issue_id":"gitlab-insights-z5uh","depends_on_id":"gitlab-insights-6kvz","type":"blocks","created_at":"2025-12-15T11:16:45.246209-05:00","created_by":"daemon"}]}
{"id":"gitlab-insights-zdlk","title":"Perform accessibility testing","description":"Verify screen reader announces loading states, keyboard navigation works across pages, focus management during page loads, ARIA labels on loading indicators. Test with NVDA/JAWS and keyboard-only navigation.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T12:09:06.758631-05:00","updated_at":"2025-12-15T12:09:06.758631-05:00"}
