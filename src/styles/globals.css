@import "tailwindcss";
@import "highlight.js/styles/github-dark.css";
@config "../../tailwind.config.ts";

@theme {
  --font-sans: var(--font-geist-sans), ui-sans-serif, system-ui, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

  /* Olive/Moss Green Accent Colors */
  --color-olive: hsl(68, 49%, 28%); /* was #5e6b24 */
  --color-olive-light: hsl(68, 36%, 52%); /* was #9DAA5F */
  --color-olive-hover: hsl(68, 49%, 23%); /* was #4F5A1F */
  --color-olive-hover-light: hsl(68, 36%, 58%); /* was #A8B86C */

  /* Base Colors */
  --color-bg-dark: hsl(0, 2%, 18%); /* was #2d2e2e */
  --color-bg-light: hsl(120, 100%, 99%); /* was #FDFFFC */

  /* Semantic Colors - Success */
  --color-success: hsl(142, 71%, 37%); /* was #16A34A - Light mode */
  --color-success-dark: hsl(142, 71%, 45%); /* was #22C55E - Dark mode */

  /* Semantic Colors - Warning */
  --color-warning: hsl(38, 92%, 50%); /* was #F59E0B - Light mode */
  --color-warning-dark: hsl(54, 97%, 63%); /* was #FDE047 - Dark mode */

  /* Semantic Colors - Error */
  --color-error: hsl(0, 72%, 42%); /* was #B91C1C - Light mode */
  --color-error-dark: hsl(0, 72%, 51%); /* was #DC2626 - Dark mode */

  /* Semantic Colors - Info */
  --color-info: hsl(199, 97%, 39%); /* was #0284C7 - Light mode */
  --color-info-dark: hsl(199, 92%, 60%); /* was #38BDF8 - Dark mode */

  /* Event Type Badge Colors */
  --color-badge-issue: hsl(258, 90%, 66%); /* was #8B5CF6 - Light mode purple */
  --color-badge-issue-dark: hsl(258, 90%, 76%); /* was #A78BFA - Dark mode purple */
  --color-badge-mr: hsl(199, 89%, 48%); /* was #0EA5E9 - Light mode blue */
  --color-badge-mr-dark: hsl(199, 93%, 60%); /* was #38BDF8 - Dark mode blue */
  --color-badge-comment: hsl(215, 16%, 47%); /* was #64748B - Light mode gray */
  --color-badge-comment-dark: hsl(214, 17%, 66%); /* was #94A3B8 - Dark mode gray */

  /* Neutral Gray Scale */
  --color-gray-50: hsl(210, 20%, 98%); /* was #F9FAFB */
  --color-gray-100: hsl(220, 14%, 96%); /* was #F3F4F6 */
  --color-gray-200: hsl(220, 13%, 91%); /* was #E5E7EB */
  --color-gray-300: hsl(214, 12%, 83%); /* was #D1D5DB */
  --color-gray-400: hsl(218, 11%, 65%); /* was #9CA3AF */
  --color-gray-500: hsl(220, 9%, 46%); /* was #6B7280 */
  --color-gray-600: hsl(215, 16%, 34%); /* was #4B5563 */
  --color-gray-700: hsl(217, 19%, 27%); /* was #374151 */
  --color-gray-800: hsl(215, 28%, 17%); /* was #1F2937 */
  --color-gray-900: hsl(221, 39%, 11%); /* was #111827 */

  /* ==========================================================================
     Semantic Tokens - Theme-Aware Color Mappings
     
     These tokens define the ROLE of colors (text, background, border) rather
     than specific values. Components should use these tokens for consistent
     theming across light and dark modes.
     
     Usage in Tailwind:
     - Light mode: class="text-text-primary bg-bg-surface"
     - Dark mode:  class="dark:text-text-primary-dark dark:bg-bg-surface-dark"
     
     Or use CSS custom properties directly for computed styles.
     ========================================================================== */

  /* Light Mode Semantic Tokens (Default) */
  --color-text-primary: var(--color-gray-900);      /* Near-black for high contrast */
  --color-text-secondary: var(--color-gray-500);    /* Muted gray for secondary content */
  --color-text-tertiary: var(--color-gray-400);     /* Light gray for metadata, timestamps */
  --color-bg-surface: var(--color-bg-light);        /* Clean white background */
  --color-bg-elevated: var(--color-gray-50);        /* Subtle lift for cards, modals */
  --color-border-default: var(--color-gray-200);    /* Visible but soft borders */
  --color-border-subtle: var(--color-gray-100);     /* Very subtle dividers */

  /* Dark Mode Semantic Tokens (Applied when .dark class on html) */
  --color-text-primary-dark: var(--color-gray-50);  /* Bright white for readability */
  --color-text-secondary-dark: var(--color-gray-300); /* Light gray for secondary */
  --color-text-tertiary-dark: var(--color-gray-400);  /* Muted for metadata */
  --color-bg-surface-dark: var(--color-bg-dark);    /* Dark charcoal background */
  --color-bg-elevated-dark: var(--color-gray-800);  /* Slightly lighter for elevation */
  --color-border-default-dark: var(--color-gray-600); /* Visible on dark backgrounds */
  --color-border-subtle-dark: var(--color-gray-700);  /* Subtle dark dividers */

  /* Layout Dimensions */
  --header-height: 64px;

  /* Animation Durations */
  --transition-slide: 200ms ease-out;

  /* Keyframes for slide animations */
  @keyframes slide-in {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slide-out {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(100%);
    }
  }

  /* Animation Classes */
  --animate-slide-in: slide-in 200ms ease-out;
  --animate-slide-out: slide-out 200ms ease-out;
}

/**
 * Search result keyword highlight styling
 * AC 2.5.1: Olive background with stronger opacity for better visibility
 * AC 2.5.4: Inherits text color for contrast on dark background
 */
mark {
  background-color: hsl(68 36% 52% / 0.5); /* was rgba(157, 170, 95, 0.5) - olive-light with 50% opacity */
  color: inherit;
  padding: 1px 4px;
  border-radius: 4px; /* rounded-sm equivalent */
}

/**
 * GitLab Markdown component styles
 * Customizes code blocks, tables, task lists, and other markdown elements
 */
.gitlab-markdown {
  /* Tables */
  & table {
    width: 100%;
    border-collapse: collapse;
    margin: 1rem 0;
  }

  & th,
  & td {
    border: 1px solid var(--color-border-default);
    padding: 0.5rem 0.75rem;
    text-align: left;
  }

  .dark & th,
  .dark & td {
    border-color: var(--color-border-default-dark);
  }

  & th {
    background-color: var(--color-bg-elevated);
    font-weight: 600;
  }

  .dark & th {
    background-color: var(--color-bg-elevated-dark);
  }

  /* Task lists */
  & input[type="checkbox"] {
    margin-right: 0.5rem;
    accent-color: var(--color-olive-light);
  }

  /* GitLab reference links - monospace for issue/MR refs */
  & a[href*="/-/issues/"],
  & a[href*="/-/merge_requests/"] {
    font-family: var(--font-sans);
    font-size: 0.875rem;
  }

  /* Blockquotes */
  & blockquote {
    border-left: 4px solid var(--color-border-default);
    padding-left: 1rem;
    font-style: italic;
    color: var(--color-text-secondary);
  }

  .dark & blockquote {
    border-color: var(--color-border-default-dark);
    color: var(--color-text-secondary-dark);
  }

  /* Horizontal rules */
  & hr {
    border-color: var(--color-border-default);
    margin: 1.5rem 0;
  }

  .dark & hr {
    border-color: var(--color-border-default-dark);
  }

  /* Code blocks - ensure highlight.js styles apply */
  & pre {
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1rem 0;
  }

  & pre code {
    display: block;
    padding: 1rem;
    font-size: 0.875rem;
  }

  /* Collapsible sections (details/summary) */
  & details > *:not(summary) {
    padding: 0 1rem;
  }

  & details > *:last-child {
    padding-bottom: 1rem;
  }

  & details[open] summary {
    border-bottom: 1px solid var(--color-border-default);
  }

  .dark & details[open] summary {
    border-bottom-color: var(--color-border-default-dark);
  }

  /* Rotate chevron when open */
  & details[open] summary svg {
    transform: rotate(90deg);
  }
}
